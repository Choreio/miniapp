import{r as o,o as Ye,x as ze,j as ne,p as gn,q as Be,D as vn,C as En,v as He,w as je,M as bn,m as xn,I as wn}from"./index-BUIFIREP.js";const Tt=o.createContext({}),Cn={bezeled:"tgui-99a630d0096f2169",gray:"tgui-30bf4976f818e8bf"},_n=e=>{var{mode:t="plain",className:r,text:n,children:i}=e,s=Ye(e,["mode","className","text","children"]);const c=ze(),{mode:l}=o.useContext(Tt),a=l||t;return ne.jsxs(gn,Be(He({Component:"button",className:je("tgui-c5545e0bc6105e48",c==="ios"&&"tgui-bf32cd3c110b8729",a!=="plain"&&Cn[a],r)},s),{children:[i,vn(n)&&ne.jsx(En,{className:"tgui-c0c9bf3b1a53a8a4",level:"1",weight:"2",children:n})]}))},Pn=o.forwardRef((e,t)=>{var{mode:r,className:n,children:i}=e,s=Ye(e,["mode","className","children"]);const c=ze(),l=bn({mode:r});return ne.jsx("div",Be(He({ref:t,className:je("tgui-39e9f02ce4b4b950",c==="ios"&&"tgui-b3d7f75461a64b76",n)},s),{children:ne.jsx(Tt.Provider,{value:l,children:i})}))});Pn.Item=_n;const Ko=o.forwardRef((e,t)=>{var{before:r,after:n,className:i,children:s}=e,c=Ye(e,["before","after","className","children"]);const l=ze();return ne.jsxs("header",Be(He({ref:t,className:je("tgui-f67c8fb3553eee55",i)},c),{children:[ne.jsx("div",{className:"tgui-09b5f6cfd7ba56ab",children:r}),l==="ios"&&ne.jsx(xn,{weight:"2",className:"tgui-7ce1022bfdcb0ae3",children:s}),ne.jsx("div",{className:"tgui-fe1d6742d85038d7",children:n})]}))}),kt="carousel",Dt="controller",Mn="navigation",In="no-scroll",Ke="portal",Sn="root",At="toolbar",vt="zoom",ke="loading",De="error",Ae="complete",yn="placeholder",Nn=e=>`active-slide-${e}`,Ln="fullsize",Ge="flex_center",On="no_scroll",Wt="no_scroll_padding",Zt="slide_wrapper",Rn="slide_wrapper_interactive",se="prev",le="next",Et="swipe",de="close",$t="onPointerDown",Ft="onPointerMove",Vt="onPointerUp",Ut="onPointerLeave",Xt="onPointerCancel",qe="onKeyDown",Tn="onKeyUp",Qe="onWheel",kn="Escape",Dn="ArrowLeft",An="ArrowRight",Wn="button",Fe="icon",Yt="contain",bt="cover",zt="Unknown action type",Bt="yarl__";function Q(...e){return[...e].filter(Boolean).join(" ")}function O(e){return`${Bt}${e}`}function Y(e){return`--${Bt}${e}`}function ve(e,t){return`${e}${t?`_${t}`:""}`}function Je(e){return t=>ve(e,t)}function Zn(e,t){var r;return(r=e==null?void 0:e[t])!==null&&r!==void 0?r:t}function et(...e){return()=>{e.forEach(t=>{t()})}}function oe(e,t,r){return()=>{const n=o.useContext(r);if(!n)throw new Error(`${e} must be used within a ${t}.Provider`);return n}}function tt(){return typeof window<"u"}function nt(e,t=0){const r=10**t;return Math.round((e+Number.EPSILON)*r)/r}function fe(e){return e.type===void 0||e.type==="image"}function ot(e,t){return e.imageFit===bt||e.imageFit!==Yt&&t===bt}function Me(e){return typeof e=="string"?Number.parseInt(e,10):e}function _e(e){if(typeof e=="number")return{pixel:e};if(typeof e=="string"){const t=Me(e);return e.endsWith("%")?{percent:t}:{pixel:t}}return{pixel:0}}function $n(e,t){const r=_e(t),n=r.percent!==void 0?e.width/100*r.percent:r.pixel;return{width:Math.max(e.width-2*n,0),height:Math.max(e.height-2*n,0)}}function Fn(){return(tt()?window==null?void 0:window.devicePixelRatio:void 0)||1}function Ht(e,t){return t>0?(e%t+t)%t:0}function jt(e){return e.length>0}function Kt(e,t){return e[Ht(t,e.length)]}function Ve(e,t){return jt(e)?Kt(e,t):void 0}function Vn(e){return fe(e)?e.src:void 0}function Un(e,t,r){if(!r)return e;const{buttons:n,...i}=e,s=n.findIndex(l=>l===t),c=o.isValidElement(r)?o.cloneElement(r,{key:t},null):r;if(s>=0){const l=[...n];return l.splice(s,1,c),{buttons:l,...i}}return{buttons:[c,...n],...i}}function Xn(e,t,r=0){return Math.min(e.preload,Math.max(e.finite?t.length-1:Math.floor(t.length/2),r))}const Ue={open:!1,close:()=>{},index:0,slides:[],render:{},plugins:[],toolbar:{buttons:[de]},labels:{},animation:{fade:250,swipe:500,easing:{fade:"ease",swipe:"ease-out",navigation:"ease-in-out"}},carousel:{finite:!1,preload:2,padding:"16px",spacing:"30%",imageFit:Yt,imageProps:{}},controller:{ref:null,focus:!0,aria:!1,touchAction:"none",closeOnPullUp:!1,closeOnPullDown:!1,closeOnBackdropClick:!1,preventDefaultWheelX:!0,preventDefaultWheelY:!1},portal:{},noScroll:{disabled:!1},on:{},styles:{},className:""};function re(e,t){return{name:e,component:t}}function $(e,t){return{module:e,children:t}}function Gt(e,t,r){return e.module.name===t?r(e):e.children?[$(e.module,e.children.flatMap(n=>{var i;return(i=Gt(n,t,r))!==null&&i!==void 0?i:[]}))]:[e]}function ue(e,t,r){return e.flatMap(n=>{var i;return(i=Gt(n,t,r))!==null&&i!==void 0?i:[]})}function Yn(e,t=[],r=[]){let n=e;const i=p=>{const h=[...n];for(;h.length>0;){const m=h.pop();if((m==null?void 0:m.module.name)===p)return!0;m!=null&&m.children&&h.push(...m.children)}return!1},s=(p,h)=>{if(p===""){n=[$(h,n)];return}n=ue(n,p,m=>[$(h,[m])])},c=(p,h)=>{n=ue(n,p,m=>[$(m.module,[$(h,m.children)])])},l=(p,h,m)=>{n=ue(n,p,b=>{var w;return[$(b.module,[...m?[$(h)]:[],...(w=b.children)!==null&&w!==void 0?w:[],...m?[]:[$(h)]])]})},a=(p,h,m)=>{n=ue(n,p,b=>[...m?[$(h)]:[],b,...m?[]:[$(h)]])},u=p=>{c(Dt,p)},d=(p,h)=>{n=ue(n,p,m=>[$(h,m.children)])},f=p=>{n=ue(n,p,h=>h.children)},g=p=>{r.push(p)};return t.forEach(p=>{p({contains:i,addParent:s,append:c,addChild:l,addSibling:a,addModule:u,replace:d,remove:f,augment:g})}),{config:n,augmentation:p=>r.reduce((h,m)=>m(h),p)}}const qt=o.createContext(null),rt=oe("useDocument","DocumentContext",qt);function zn({nodeRef:e,children:t}){const r=o.useMemo(()=>{const n=s=>{var c;return((c=s||e.current)===null||c===void 0?void 0:c.ownerDocument)||document};return{getOwnerDocument:n,getOwnerWindow:s=>{var c;return((c=n(s))===null||c===void 0?void 0:c.defaultView)||window}}},[e]);return o.createElement(qt.Provider,{value:r},t)}const Qt=o.createContext(null),Ie=oe("useEvents","EventsContext",Qt);function Bn({children:e}){const[t]=o.useState({});o.useEffect(()=>()=>{Object.keys(t).forEach(n=>delete t[n])},[t]);const r=o.useMemo(()=>{const n=(c,l)=>{var a;(a=t[c])===null||a===void 0||a.splice(0,t[c].length,...t[c].filter(u=>u!==l))};return{publish:(...[c,l])=>{var a;(a=t[c])===null||a===void 0||a.forEach(u=>u(l))},subscribe:(c,l)=>(t[c]||(t[c]=[]),t[c].push(l),()=>n(c,l)),unsubscribe:n}},[t]);return o.createElement(Qt.Provider,{value:r},e)}const Jt=o.createContext(null),H=oe("useLightboxProps","LightboxPropsContext",Jt);function Hn({children:e,...t}){return o.createElement(Jt.Provider,{value:t},e)}const en=o.createContext(null),ie=oe("useLightboxState","LightboxStateContext",en),tn=o.createContext(null),jn=oe("useLightboxDispatch","LightboxDispatchContext",tn);function Kn(e,t){switch(t.type){case"swipe":{const{slides:r}=e,n=(t==null?void 0:t.increment)||0,i=e.globalIndex+n,s=Ht(i,r.length),c=Ve(r,s),l=n||t.duration?{increment:n,duration:t.duration,easing:t.easing}:void 0;return{slides:r,currentIndex:s,globalIndex:i,currentSlide:c,animation:l}}case"update":return t.slides!==e.slides||t.index!==e.currentIndex?{slides:t.slides,currentIndex:t.index,globalIndex:t.index,currentSlide:Ve(t.slides,t.index)}:e;default:throw new Error(zt)}}function Gn({slides:e,index:t,children:r}){const[n,i]=o.useReducer(Kn,{slides:e,currentIndex:t,globalIndex:t,currentSlide:Ve(e,t)});o.useEffect(()=>{i({type:"update",slides:e,index:t})},[e,t]);const s=o.useMemo(()=>({...n,state:n,dispatch:i}),[n,i]);return o.createElement(tn.Provider,{value:i},o.createElement(en.Provider,{value:s},r))}const nn=o.createContext(null),Se=oe("useTimeouts","TimeoutsContext",nn);function qn({children:e}){const[t]=o.useState([]);o.useEffect(()=>()=>{t.forEach(n=>window.clearTimeout(n)),t.splice(0,t.length)},[t]);const r=o.useMemo(()=>{const n=c=>{t.splice(0,t.length,...t.filter(l=>l!==c))};return{setTimeout:(c,l)=>{const a=window.setTimeout(()=>{n(a),c()},l);return t.push(a),a},clearTimeout:c=>{c!==void 0&&(n(c),window.clearTimeout(c))}}},[t]);return o.createElement(nn.Provider,{value:r},e)}const it=o.forwardRef(function({label:t,className:r,icon:n,renderIcon:i,onClick:s,style:c,...l},a){const{styles:u,labels:d}=H(),f=Zn(d,t);return o.createElement("button",{ref:a,type:"button",title:f,"aria-label":f,className:Q(O(Wn),r),onClick:s,style:{...c,...u.button},...l},i?i():o.createElement(n,{className:O(Fe),style:u.icon}))});function Qn(e,t){const r=n=>o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24","aria-hidden":"true",focusable:"false",...n},t);return r.displayName=e,r}function ae(e,t){return Qn(e,o.createElement("g",{fill:"currentColor"},o.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),t))}const Jn=ae("Close",o.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),eo=ae("Previous",o.createElement("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})),to=ae("Next",o.createElement("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})),no=ae("Loading",o.createElement(o.Fragment,null,Array.from({length:8}).map((e,t,r)=>o.createElement("line",{key:t,x1:"12",y1:"6.5",x2:"12",y2:"1.8",strokeLinecap:"round",strokeWidth:"2.6",stroke:"currentColor",strokeOpacity:1/r.length*(t+1),transform:`rotate(${360/r.length*t}, 12, 12)`})))),oo=ae("Error",o.createElement("path",{d:"M21.9,21.9l-8.49-8.49l0,0L3.59,3.59l0,0L2.1,2.1L0.69,3.51L3,5.83V19c0,1.1,0.9,2,2,2h13.17l2.31,2.31L21.9,21.9z M5,18 l3.5-4.5l2.5,3.01L12.17,15l3,3H5z M21,18.17L5.83,3H19c1.1,0,2,0.9,2,2V18.17z"})),J=tt()?o.useLayoutEffect:o.useEffect;function ct(){const[e,t]=o.useState(!1);return o.useEffect(()=>{var r,n;const i=(r=window.matchMedia)===null||r===void 0?void 0:r.call(window,"(prefers-reduced-motion: reduce)");t(i==null?void 0:i.matches);const s=c=>t(c.matches);return(n=i==null?void 0:i.addEventListener)===null||n===void 0||n.call(i,"change",s),()=>{var c;return(c=i==null?void 0:i.removeEventListener)===null||c===void 0?void 0:c.call(i,"change",s)}},[]),e}function ro(e){let t=0,r=0,n=0;const s=window.getComputedStyle(e).transform.match(/matrix.*\((.+)\)/);if(s){const c=s[1].split(",").map(Me);c.length===6?(t=c[4],r=c[5]):c.length===16&&(t=c[12],r=c[13],n=c[14])}return{x:t,y:r,z:n}}function xt(e,t){const r=o.useRef(),n=o.useRef(),i=ct();return J(()=>{var s,c,l;if(e.current&&r.current!==void 0&&!i){const{keyframes:a,duration:u,easing:d,onfinish:f}=t(r.current,e.current.getBoundingClientRect(),ro(e.current))||{};if(a&&u){(s=n.current)===null||s===void 0||s.cancel(),n.current=void 0;try{n.current=(l=(c=e.current).animate)===null||l===void 0?void 0:l.call(c,a,{duration:u,easing:d})}catch(g){console.error(g)}n.current&&(n.current.onfinish=()=>{n.current=void 0,f==null||f()})}}r.current=void 0}),{prepareAnimation:s=>{r.current=s},isAnimationPlaying:()=>{var s;return((s=n.current)===null||s===void 0?void 0:s.playState)==="running"}}}function on(){const e=o.useRef(null),t=o.useRef(),[r,n]=o.useState();return{setContainerRef:o.useCallback(s=>{e.current=s,t.current&&(t.current.disconnect(),t.current=void 0);const c=()=>{if(s){const l=window.getComputedStyle(s),a=u=>parseFloat(u)||0;n({width:Math.round(s.clientWidth-a(l.paddingLeft)-a(l.paddingRight)),height:Math.round(s.clientHeight-a(l.paddingTop)-a(l.paddingBottom))})}else n(void 0)};c(),s&&typeof ResizeObserver<"u"&&(t.current=new ResizeObserver(c),t.current.observe(s))},[]),containerRef:e,containerRect:r}}function Ce(){const e=o.useRef(),{setTimeout:t,clearTimeout:r}=Se();return o.useCallback((n,i)=>{r(e.current),e.current=t(n,i>0?i:0)},[t,r])}function R(e){const t=o.useRef(e);return J(()=>{t.current=e}),o.useCallback((...r)=>{var n;return(n=t.current)===null||n===void 0?void 0:n.call(t,...r)},[])}function wt(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function Xe(e,t){return o.useMemo(()=>e==null&&t==null?null:r=>{wt(e,r),wt(t,r)},[e,t])}function io(e,t=!1){const r=o.useRef();J(()=>{t&&r.current&&(r.current=!1,e())},[t,e]);const n=o.useCallback(()=>{r.current=!0},[]),i=o.useCallback(()=>{r.current=!1},[]);return{onFocus:n,onBlur:i}}function st(){const[e,t]=o.useState(!1);return J(()=>{t(window.getComputedStyle(window.document.documentElement).direction==="rtl")},[]),e}function co(){const[e]=o.useState({}),t=o.useCallback((i,s)=>{var c;(c=e[i])===null||c===void 0||c.forEach(l=>{s.isPropagationStopped()||l(s)})},[e]),r=o.useMemo(()=>({onPointerDown:i=>t($t,i),onPointerMove:i=>t(Ft,i),onPointerUp:i=>t(Vt,i),onPointerLeave:i=>t(Ut,i),onPointerCancel:i=>t(Xt,i),onKeyDown:i=>t(qe,i),onKeyUp:i=>t(Tn,i),onWheel:i=>t(Qe,i)}),[t]),n=o.useCallback((i,s)=>(e[i]||(e[i]=[]),e[i].unshift(s),()=>{const c=e[i];c&&c.splice(0,c.length,...c.filter(l=>l!==s))}),[e]);return{registerSensors:r,subscribeSensors:n}}function Ct(e,t){const r=o.useRef(0),n=Ce(),i=R((...s)=>{r.current=Date.now(),e(s)});return o.useCallback((...s)=>{n(()=>{i(s)},t-(Date.now()-r.current))},[t,i,n])}const We=Je("slide"),Ze=Je("slide_image");function Pe({slide:e,offset:t,render:r,rect:n,imageFit:i,imageProps:s,onClick:c,onLoad:l,onError:a,style:u}){var d,f,g,p,h,m,b;const[w,P]=o.useState(ke),{publish:N}=Ie(),{setTimeout:Z}=Se(),_=o.useRef(null);o.useEffect(()=>{t===0&&N(Nn(w))},[t,w,N]);const M=R(y=>{("decode"in y?y.decode():Promise.resolve()).catch(()=>{}).then(()=>{y.parentNode&&(P(Ae),Z(()=>{l==null||l(y)},0))})}),S=o.useCallback(y=>{_.current=y,y!=null&&y.complete&&M(y)},[M]),T=o.useCallback(y=>{M(y.currentTarget)},[M]),x=R(()=>{P(De),a==null||a()}),C=ot(e,i),L=(y,z)=>Number.isFinite(y)?y:z,U=L(Math.max(...((f=(d=e.srcSet)===null||d===void 0?void 0:d.map(y=>y.width))!==null&&f!==void 0?f:[]).concat(e.width?[e.width]:[]).filter(Boolean)),((g=_.current)===null||g===void 0?void 0:g.naturalWidth)||0),A=L(Math.max(...((h=(p=e.srcSet)===null||p===void 0?void 0:p.map(y=>y.height))!==null&&h!==void 0?h:[]).concat(e.height?[e.height]:[]).filter(Boolean)),((m=_.current)===null||m===void 0?void 0:m.naturalHeight)||0),E=U&&A?{maxWidth:`min(${U}px, 100%)`,maxHeight:`min(${A}px, 100%)`}:{maxWidth:"100%",maxHeight:"100%"},I=(b=e.srcSet)===null||b===void 0?void 0:b.sort((y,z)=>y.width-z.width).map(y=>`${y.src} ${y.width}w`).join(", "),W=()=>n&&!C&&e.width&&e.height?n.height/e.height*e.width:Number.MAX_VALUE,k=I&&n&&tt()?`${Math.round(Math.min(W(),n.width))}px`:void 0,{style:F,className:j,...ee}=s||{};return o.createElement(o.Fragment,null,o.createElement("img",{ref:S,onLoad:T,onError:x,onClick:c,draggable:!1,className:Q(O(Ze()),C&&O(Ze("cover")),w!==Ae&&O(Ze("loading")),j),style:{...E,...u,...F},...ee,alt:e.alt,sizes:k,srcSet:I,src:e.src}),w!==Ae&&o.createElement("div",{className:O(We(yn))},w===ke&&(r!=null&&r.iconLoading?r.iconLoading():o.createElement(no,{className:Q(O(Fe),O(We(ke)))})),w===De&&(r!=null&&r.iconError?r.iconError():o.createElement(oo,{className:Q(O(Fe),O(We(De)))}))))}const so=o.forwardRef(function({className:t,children:r,...n},i){const s=o.useRef(null);return o.createElement(zn,{nodeRef:s},o.createElement("div",{ref:Xe(i,s),className:Q(O("root"),t),...n},r))});var V;(function(e){e[e.NONE=0]="NONE",e[e.SWIPE=1]="SWIPE",e[e.PULL=2]="PULL",e[e.ANIMATION=3]="ANIMATION"})(V||(V={}));function rn(e,t,r,n,i){o.useEffect(()=>i?()=>{}:et(e($t,t),e(Ft,r),e(Vt,n),e(Ut,n),e(Xt,n)),[e,t,r,n,i])}var K;(function(e){e[e.NONE=0]="NONE",e[e.SWIPE=1]="SWIPE",e[e.PULL=2]="PULL"})(K||(K={}));const $e=30;function lo(e,t,r,n,i,s,c,l,a,u,d,f,g,p){const h=o.useRef(0),m=o.useRef([]),b=o.useRef(),w=o.useRef(0),P=o.useRef(K.NONE),N=o.useCallback(x=>{b.current===x.pointerId&&(b.current=void 0,P.current=K.NONE);const C=m.current;C.splice(0,C.length,...C.filter(L=>L.pointerId!==x.pointerId))},[]),Z=o.useCallback(x=>{N(x),x.persist(),m.current.push(x)},[N]),_=R(x=>{Z(x)}),M=(x,C)=>u&&x>C||a&&x<-C,S=R(x=>{if(m.current.find(C=>C.pointerId===x.pointerId)&&b.current===x.pointerId){const C=Date.now()-w.current,L=h.current;P.current===K.SWIPE?Math.abs(L)>.3*r||Math.abs(L)>5&&C<n?c(L,C):l(L):P.current===K.PULL&&(M(L,2*$e)?g(L,C):p(L)),h.current=0,P.current=K.NONE}N(x)}),T=R(x=>{const C=m.current.find(L=>L.pointerId===x.pointerId);if(C){const L=b.current===x.pointerId;if(x.buttons===0){L&&h.current!==0?S(x):N(C);return}const U=x.clientX-C.clientX,A=x.clientY-C.clientY;if(b.current===void 0){const E=I=>{Z(x),b.current=x.pointerId,w.current=Date.now(),P.current=I};Math.abs(U)>Math.abs(A)&&Math.abs(U)>$e&&t(U)?(E(K.SWIPE),i()):Math.abs(A)>Math.abs(U)&&M(A,$e)&&(E(K.PULL),d())}else L&&(P.current===K.SWIPE?(h.current=U,s(U)):P.current===K.PULL&&(h.current=A,f(A)))}});rn(e,_,T,S)}function ao({preventDefaultWheelX:e,preventDefaultWheelY:t}){const r=o.useRef(null),n=R(i=>{const s=Math.abs(i.deltaX)>Math.abs(i.deltaY);(s&&e||!s&&t||i.ctrlKey)&&i.preventDefault()});return o.useCallback(i=>{var s;i?i.addEventListener("wheel",n,{passive:!1}):(s=r.current)===null||s===void 0||s.removeEventListener("wheel",n),r.current=i},[n])}function uo(e,t,r,n,i,s,c,l,a){const u=o.useRef(0),d=o.useRef(0),f=o.useRef(),g=o.useRef(),p=o.useRef(0),h=o.useRef(0),{setTimeout:m,clearTimeout:b}=Se(),w=o.useCallback(()=>{f.current&&(b(f.current),f.current=void 0)},[b]),P=o.useCallback(()=>{g.current&&(b(g.current),g.current=void 0)},[b]),N=R(()=>{e!==V.SWIPE&&(u.current=0,h.current=0,w(),P())});o.useEffect(N,[e,N]);const Z=R(M=>{g.current=void 0,u.current===M&&a(u.current)}),_=R(M=>{if(!M.ctrlKey&&!(Math.abs(M.deltaY)>Math.abs(M.deltaX)))if(e===V.NONE){if(Math.abs(M.deltaX)<=1.2*Math.abs(p.current)){p.current=M.deltaX;return}if(!r(-M.deltaX))return;if(d.current+=M.deltaX,w(),Math.abs(d.current)>30)d.current=0,p.current=0,h.current=Date.now(),s();else{const S=d.current;f.current=m(()=>{f.current=void 0,S===d.current&&(d.current=0)},i)}}else if(e===V.SWIPE){let S=u.current-M.deltaX;if(S=Math.min(Math.abs(S),n)*Math.sign(S),u.current=S,c(S),P(),Math.abs(S)>.2*n){p.current=M.deltaX,l(S,Date.now()-h.current);return}g.current=m(()=>Z(S),2*i)}else p.current=M.deltaX});o.useEffect(()=>t(Qe,_),[t,_])}const _t=Je("container"),cn=o.createContext(null),te=oe("useController","ControllerContext",cn);function fo({children:e,...t}){var r;const{carousel:n,animation:i,controller:s,on:c,styles:l,render:a}=t,{closeOnPullUp:u,closeOnPullDown:d,preventDefaultWheelX:f,preventDefaultWheelY:g}=s,[p,h]=o.useState(),m=ie(),b=jn(),[w,P]=o.useState(V.NONE),N=o.useRef(0),Z=o.useRef(0),_=o.useRef(1),{registerSensors:M,subscribeSensors:S}=co(),{subscribe:T,publish:x}=Ie(),C=Ce(),L=Ce(),U=Ce(),{containerRef:A,setContainerRef:E,containerRect:I}=on(),W=Xe(ao({preventDefaultWheelX:f,preventDefaultWheelY:g}),E),k=o.useRef(null),F=Xe(k,void 0),{getOwnerDocument:j}=rt(),ee=st(),y=v=>(ee?-1:1)*(typeof v=="number"?v:1),z=R(()=>{var v;return(v=A.current)===null||v===void 0?void 0:v.focus()}),at=R(()=>t),ut=R(()=>m),Ee=o.useCallback(v=>x(se,v),[x]),be=o.useCallback(v=>x(le,v),[x]),he=o.useCallback(()=>x(de),[x]),Ne=v=>!(n.finite&&(y(v)>0&&m.currentIndex===0||y(v)<0&&m.currentIndex===m.slides.length-1)),dt=v=>{var D;N.current=v,(D=A.current)===null||D===void 0||D.style.setProperty(Y("swipe_offset"),`${Math.round(v)}px`)},Le=v=>{var D,X;Z.current=v,_.current=(()=>{const pe=d&&v>0?v:u&&v<0?-v:0;return Math.min(Math.max(nt(1-pe/60*(1-.5),2),.5),1)})(),(D=A.current)===null||D===void 0||D.style.setProperty(Y("pull_offset"),`${Math.round(v)}px`),(X=A.current)===null||X===void 0||X.style.setProperty(Y("pull_opacity"),`${_.current}`)},{prepareAnimation:dn}=xt(k,(v,D,X)=>{if(k.current&&I)return{keyframes:[{transform:`translate(0, ${v.rect.y-D.y+X.y}px)`,opacity:v.opacity},{transform:"translate(0, 0)",opacity:1}],duration:v.duration,easing:i.easing.fade}}),ft=(v,D)=>{if(u||d){Le(v);let X=0;k.current&&(X=i.fade*(D?2:1),dn({rect:k.current.getBoundingClientRect(),opacity:_.current,duration:X})),U(()=>{Le(0),P(V.NONE)},X),P(V.ANIMATION),D||he()}},{prepareAnimation:fn,isAnimationPlaying:hn}=xt(k,(v,D,X)=>{var G;if(k.current&&I&&(!((G=m.animation)===null||G===void 0)&&G.duration)){const B=_e(n.spacing),pe=(B.percent?B.percent*I.width/100:B.pixel)||0;return{keyframes:[{transform:`translate(${y(m.globalIndex-v.index)*(I.width+pe)+v.rect.x-D.x+X.x}px, 0)`},{transform:"translate(0, 0)"}],duration:m.animation.duration,easing:m.animation.easing}}}),me=R(v=>{var D,X;const G=v.offset||0,B=G?i.swipe:(D=i.navigation)!==null&&D!==void 0?D:i.swipe,pe=!G&&!hn()?i.easing.navigation:i.easing.swipe;let{direction:xe}=v;const we=(X=v.count)!==null&&X!==void 0?X:1;let Oe=V.ANIMATION,q=B*we;if(!xe){const ge=I==null?void 0:I.width,gt=v.duration||0,Te=ge?B/ge*Math.abs(G):B;we!==0?(gt<Te?q=q/Te*Math.max(gt,Te/5):ge&&(q=B/ge*(ge-Math.abs(G))),xe=y(G)>0?se:le):q=B/2}let Re=0;xe===se?Ne(y(1))?Re=-we:(Oe=V.NONE,q=B):xe===le&&(Ne(y(-1))?Re=we:(Oe=V.NONE,q=B)),q=Math.round(q),L(()=>{dt(0),P(V.NONE)},q),k.current&&fn({rect:k.current.getBoundingClientRect(),index:m.globalIndex}),P(Oe),x(Et,{type:"swipe",increment:Re,duration:q,easing:pe})});o.useEffect(()=>{var v,D;!((v=m.animation)===null||v===void 0)&&v.increment&&(!((D=m.animation)===null||D===void 0)&&D.duration)&&C(()=>b({type:"swipe",increment:0}),m.animation.duration)},[m.animation,b,C]);const ht=[S,Ne,(I==null?void 0:I.width)||0,i.swipe,()=>P(V.SWIPE),v=>dt(v),(v,D)=>me({offset:v,duration:D,count:1}),v=>me({offset:v,count:0})],mn=[()=>{d&&P(V.PULL)},v=>Le(v),v=>ft(v),v=>ft(v,!0)];lo(...ht,u,d,...mn),uo(w,...ht);const mt=R(()=>{s.focus&&j().querySelector(`.${O(Ke)} .${O(_t())}`)&&z()});o.useEffect(mt,[mt]);const pt=R(()=>{var v;(v=c.view)===null||v===void 0||v.call(c,{index:m.currentIndex})});o.useEffect(pt,[m.globalIndex,pt]),o.useEffect(()=>et(T(se,v=>me({direction:se,...v})),T(le,v=>me({direction:le,...v})),T(Et,v=>b(v))),[T,me,b]);const pn=o.useMemo(()=>({prev:Ee,next:be,close:he,focus:z,slideRect:I?$n(I,n.padding):{width:0,height:0},containerRect:I||{width:0,height:0},subscribeSensors:S,containerRef:A,setCarouselRef:F,toolbarWidth:p,setToolbarWidth:h}),[Ee,be,he,z,S,I,A,F,p,h,n.padding]);return o.useImperativeHandle(s.ref,()=>({prev:Ee,next:be,close:he,focus:z,getLightboxProps:at,getLightboxState:ut}),[Ee,be,he,z,at,ut]),o.createElement("div",{ref:W,className:Q(O(_t()),O(Ge)),style:{...w===V.SWIPE?{[Y("swipe_offset")]:`${Math.round(N.current)}px`}:null,...w===V.PULL?{[Y("pull_offset")]:`${Math.round(Z.current)}px`,[Y("pull_opacity")]:`${_.current}`}:null,...s.touchAction!=="none"?{[Y("controller_touch_action")]:s.touchAction}:null,...l.container},...s.aria?{role:"presentation","aria-live":"polite"}:null,tabIndex:-1,...M},I&&o.createElement(cn.Provider,{value:pn},e,(r=a.controls)===null||r===void 0?void 0:r.call(a)))}const ho=re(Dt,fo);function ce(e){return ve(kt,e)}function Pt(e){return ve("slide",e)}function mo({slide:e,offset:t}){const r=o.useRef(null),{currentIndex:n}=ie(),{slideRect:i,close:s}=te(),{render:c,carousel:{imageFit:l,imageProps:a},on:{click:u},controller:{closeOnBackdropClick:d},styles:{slide:f}}=H(),g=()=>{var h,m,b,w;let P=(h=c.slide)===null||h===void 0?void 0:h.call(c,{slide:e,offset:t,rect:i});return!P&&fe(e)&&(P=o.createElement(Pe,{slide:e,offset:t,render:c,rect:i,imageFit:l,imageProps:a,onClick:t===0?()=>u==null?void 0:u({index:n}):void 0})),P?o.createElement(o.Fragment,null,(m=c.slideHeader)===null||m===void 0?void 0:m.call(c,{slide:e}),((b=c.slideContainer)!==null&&b!==void 0?b:({children:N})=>N)({slide:e,children:P}),(w=c.slideFooter)===null||w===void 0?void 0:w.call(c,{slide:e})):null},p=h=>{const m=r.current,b=h.target instanceof HTMLElement?h.target:void 0;d&&b&&m&&(b===m||Array.from(m.children).find(w=>w===b)&&b.classList.contains(O(Zt)))&&s()};return o.createElement("div",{ref:r,className:Q(O(Pt()),t===0&&O(Pt("current")),O(Ge)),"aria-hidden":t!==0,onClick:p,style:f},g())}function po(){const e=H().styles.slide;return o.createElement("div",{className:O("slide"),style:e})}function go({carousel:e}){const{slides:t,currentIndex:r,globalIndex:n}=ie(),{setCarouselRef:i}=te(),s=_e(e.spacing),c=_e(e.padding),l=Xn(e,t,1),a=[];if(jt(t))for(let u=r-l;u<=r+l;u+=1){const d=Kt(t,u),f=n-r+u,g=e.finite&&(u<0||u>t.length-1);a.push(g?{key:f}:{key:[`${f}`,Vn(d)].filter(Boolean).join("|"),offset:u-r,slide:d})}return o.createElement("div",{ref:i,className:Q(O(ce()),a.length>0&&O(ce("with_slides"))),style:{[`${Y(ce("slides_count"))}`]:a.length,[`${Y(ce("spacing_px"))}`]:s.pixel||0,[`${Y(ce("spacing_percent"))}`]:s.percent||0,[`${Y(ce("padding_px"))}`]:c.pixel||0,[`${Y(ce("padding_percent"))}`]:c.percent||0}},a.map(({key:u,slide:d,offset:f})=>d?o.createElement(mo,{key:u,slide:d,offset:f}):o.createElement(po,{key:u})))}const vo=re(kt,go);function sn(){const{carousel:e}=H(),{slides:t,currentIndex:r}=ie(),n=t.length===0||e.finite&&r===0,i=t.length===0||e.finite&&r===t.length-1;return{prevDisabled:n,nextDisabled:i}}function Eo(e){var t;const r=st(),{publish:n}=Ie(),{animation:i}=H(),{prevDisabled:s,nextDisabled:c}=sn(),l=((t=i.navigation)!==null&&t!==void 0?t:i.swipe)/2,a=Ct(()=>n(se),l),u=Ct(()=>n(le),l),d=R(f=>{switch(f.key){case kn:n(de);break;case Dn:(r?c:s)||(r?u:a)();break;case An:(r?s:c)||(r?a:u)();break}});o.useEffect(()=>e(qe,d),[e,d])}function Mt({label:e,icon:t,renderIcon:r,action:n,onClick:i,disabled:s,style:c}){return o.createElement(it,{label:e,icon:t,renderIcon:r,className:O(`navigation_${n}`),disabled:s,onClick:i,style:c,...io(te().focus,s)})}function bo({render:{buttonPrev:e,buttonNext:t,iconPrev:r,iconNext:n},styles:i}){const{prev:s,next:c,subscribeSensors:l}=te(),{prevDisabled:a,nextDisabled:u}=sn();return Eo(l),o.createElement(o.Fragment,null,e?e():o.createElement(Mt,{label:"Previous",action:se,icon:eo,renderIcon:r,style:i.navigationPrev,disabled:a,onClick:s}),t?t():o.createElement(Mt,{label:"Next",action:le,icon:to,renderIcon:n,style:i.navigationNext,disabled:u,onClick:c}))}const xo=re(Mn,bo),It=O(On),wo=O(Wt);function Co(e){return"style"in e}function St(e,t,r){const n=window.getComputedStyle(e),i=r?"padding-left":"padding-right",s=r?n.paddingLeft:n.paddingRight,c=e.style.getPropertyValue(i);return e.style.setProperty(i,`${(Me(s)||0)+t}px`),()=>{c?e.style.setProperty(i,c):e.style.removeProperty(i)}}function _o({noScroll:{disabled:e},children:t}){const r=st(),{getOwnerDocument:n,getOwnerWindow:i}=rt();return o.useEffect(()=>{if(e)return()=>{};const s=[],c=i(),{body:l,documentElement:a}=n(),u=Math.round(c.innerWidth-a.clientWidth);if(u>0){s.push(St(l,u,r));const d=l.getElementsByTagName("*");for(let f=0;f<d.length;f+=1){const g=d[f];Co(g)&&c.getComputedStyle(g).getPropertyValue("position")==="fixed"&&!g.classList.contains(wo)&&s.push(St(g,u,r))}}return l.classList.add(It),()=>{l.classList.remove(It),s.forEach(d=>d())}},[r,e,n,i]),o.createElement(o.Fragment,null,t)}const Po=re(In,_o);function yt(e){return ve(Ke,e)}function Nt(e,t,r){const n=e.getAttribute(t);return e.setAttribute(t,r),()=>{n?e.setAttribute(t,n):e.removeAttribute(t)}}function Mo({children:e,animation:t,styles:r,className:n,on:i,portal:s,close:c}){const[l,a]=o.useState(!1),[u,d]=o.useState(!1),f=o.useRef([]),g=o.useRef(null),{setTimeout:p}=Se(),{subscribe:h}=Ie(),b=ct()?0:t.fade;o.useEffect(()=>(a(!0),()=>{a(!1),d(!1)}),[]);const w=R(()=>{f.current.forEach(_=>_()),f.current=[]}),P=R(()=>{var _;d(!1),w(),(_=i.exiting)===null||_===void 0||_.call(i),p(()=>{var M;(M=i.exited)===null||M===void 0||M.call(i),c()},b)});o.useEffect(()=>h(de,P),[h,P]);const N=R(_=>{var M,S,T;_.scrollTop,d(!0),(M=i.entering)===null||M===void 0||M.call(i);const x=(T=(S=_.parentNode)===null||S===void 0?void 0:S.children)!==null&&T!==void 0?T:[];for(let C=0;C<x.length;C+=1){const L=x[C];["TEMPLATE","SCRIPT","STYLE"].indexOf(L.tagName)===-1&&L!==_&&(f.current.push(Nt(L,"inert","true")),f.current.push(Nt(L,"aria-hidden","true")))}f.current.push(()=>{var C,L;(L=(C=g.current)===null||C===void 0?void 0:C.focus)===null||L===void 0||L.call(C)}),p(()=>{var C;(C=i.entered)===null||C===void 0||C.call(i)},b)}),Z=o.useCallback(_=>{_?N(_):w()},[N,w]);return l?wn.createPortal(o.createElement(so,{ref:Z,className:Q(n,O(yt()),O(Wt),u&&O(yt("open"))),role:"presentation","aria-live":"polite",style:{...t.fade!==Ue.animation.fade?{[Y("fade_animation_duration")]:`${b}ms`}:null,...t.easing.fade!==Ue.animation.easing.fade?{[Y("fade_animation_timing_function")]:t.easing.fade}:null,...r.root},onFocus:_=>{g.current||(g.current=_.relatedTarget)}},e),s.root||document.body):null}const Io=re(Ke,Mo);function So({children:e}){return o.createElement(o.Fragment,null,e)}const yo=re(Sn,So);function No(e){return ve(At,e)}function Lo({toolbar:{buttons:e},render:{buttonClose:t,iconClose:r},styles:n}){const{close:i,setToolbarWidth:s}=te(),{setContainerRef:c,containerRect:l}=on();J(()=>{s(l==null?void 0:l.width)},[s,l==null?void 0:l.width]);const a=()=>t?t():o.createElement(it,{key:de,label:"Close",icon:Jn,renderIcon:r,onClick:i});return o.createElement("div",{ref:c,style:n.toolbar,className:O(No())},e==null?void 0:e.map(u=>u===de?a():u))}const Oo=re(At,Lo);function ln(e,t){var r;return o.createElement(e.module.component,{key:e.module.name,...t},(r=e.children)===null||r===void 0?void 0:r.map(n=>ln(n,t)))}function Ro(e,t={}){const{easing:r,...n}=e,{easing:i,...s}=t;return{easing:{...r,...i},...n,...s}}function Go({carousel:e,animation:t,render:r,toolbar:n,controller:i,noScroll:s,on:c,plugins:l,slides:a,index:u,...d}){const{animation:f,carousel:g,render:p,toolbar:h,controller:m,noScroll:b,on:w,slides:P,index:N,plugins:Z,..._}=Ue,{config:M,augmentation:S}=Yn([$(Io,[$(Po,[$(ho,[$(vo),$(Oo),$(xo)])])])],l||Z),T=S({animation:Ro(f,t),carousel:{...g,...e},render:{...p,...r},toolbar:{...h,...n},controller:{...m,...i},noScroll:{...b,...s},on:{...w,...c},..._,...d});return T.open?o.createElement(Hn,{...T},o.createElement(Gn,{slides:a||P,index:Me(u||N)},o.createElement(qn,null,o.createElement(Bn,null,ln($(yo,M),T))))):null}const To={maxZoomPixelRatio:1,zoomInMultiplier:2,doubleTapDelay:300,doubleClickDelay:500,doubleClickMaxStops:2,keyboardMoveDistance:50,wheelZoomDistanceFactor:100,pinchZoomDistanceFactor:100,scrollToZoom:!1},an=e=>({...To,...e});function ko(e,t,r,n){const i=o.useRef(),s=o.useRef(),{zoom:c}=H().animation,l=ct(),a=R(()=>{var u,d,f;if((u=i.current)===null||u===void 0||u.cancel(),i.current=void 0,s.current&&(n!=null&&n.current)){try{i.current=(f=(d=n.current).animate)===null||f===void 0?void 0:f.call(d,[{transform:s.current},{transform:`scale(${e}) translateX(${t}px) translateY(${r}px)`}],{duration:l?0:c??500,easing:i.current?"ease-out":"ease-in-out"})}catch(g){console.error(g)}s.current=void 0,i.current&&(i.current.onfinish=()=>{i.current=void 0})}});return J(a,[e,t,r,a]),o.useCallback(()=>{s.current=n!=null&&n.current?window.getComputedStyle(n.current).transform:void 0},[n])}function Do(e,t){const{on:r}=H(),n=R(()=>{var i;t||(i=r.zoom)===null||i===void 0||i.call(r,{zoom:e})});o.useEffect(n,[e,n])}function ye(){const{zoom:e}=H();return an(e)}function Ao(e,t){var r,n;let i={width:0,height:0},s={width:0,height:0};const{currentSlide:c}=ie(),{imageFit:l}=H().carousel,{maxZoomPixelRatio:a}=ye();if(e&&c){const d={...c,...t};if(fe(d)){const f=ot(d,l),g=Math.max(...(((r=d.srcSet)===null||r===void 0?void 0:r.map(h=>h.width))||[]).concat(d.width?[d.width]:[])),p=Math.max(...(((n=d.srcSet)===null||n===void 0?void 0:n.map(h=>h.height))||[]).concat(d.height?[d.height]:[]));g>0&&p>0&&e.width>0&&e.height>0&&(s=f?{width:Math.round(Math.min(g,e.width/e.height*p)),height:Math.round(Math.min(p,e.height/e.width*g))}:{width:g,height:p},s={width:s.width*a,height:s.height*a},i=f?{width:Math.min(e.width,s.width,g),height:Math.min(e.height,s.height,p)}:{width:Math.round(Math.min(e.width,e.height/p*g,g)),height:Math.round(Math.min(e.height,e.width/g*p,p))})}}const u=i.width?Math.max(nt(s.width/i.width,5),1):1;return{imageRect:i,maxZoom:u}}function Lt(e,t){return((e.clientX-t.clientX)**2+(e.clientY-t.clientY)**2)**.5}function Ot(e,t,r=100,n=2){return e*Math.min(1+Math.abs(t/r),n)**Math.sign(t)}function Wo(e,t,r,n,i,s){const c=o.useRef([]),l=o.useRef(0),a=o.useRef(),{globalIndex:u}=ie(),{getOwnerWindow:d}=rt(),{containerRef:f,subscribeSensors:g}=te(),{keyboardMoveDistance:p,zoomInMultiplier:h,wheelZoomDistanceFactor:m,scrollToZoom:b,doubleTapDelay:w,doubleClickDelay:P,doubleClickMaxStops:N,pinchZoomDistanceFactor:Z}=ye(),_=o.useCallback(E=>{if(f.current){const{pageX:I,pageY:W}=E,{scrollX:k,scrollY:F}=d(),{left:j,top:ee,width:y,height:z}=f.current.getBoundingClientRect();return[I-j-k-y/2,W-ee-F-z/2]}return[]},[f,d]),M=R(E=>{const I=()=>{E.preventDefault(),E.stopPropagation()};if(e>1){const F=(j,ee)=>{I(),i(j,ee)};E.key==="ArrowDown"?F(0,p):E.key==="ArrowUp"?F(0,-p):E.key==="ArrowLeft"?F(-p,0):E.key==="ArrowRight"&&F(p,0)}const W=F=>{I(),n(F)},k=()=>E.getModifierState("Meta");E.key==="+"||E.key==="="&&k()?W(e*h):E.key==="-"||E.key==="_"&&k()?W(e/h):E.key==="0"&&k()&&W(1)}),S=R(E=>{if((E.ctrlKey||b)&&Math.abs(E.deltaY)>Math.abs(E.deltaX)){E.stopPropagation(),n(Ot(e,-E.deltaY,m),!0,..._(E));return}e>1&&(E.stopPropagation(),b||i(E.deltaX,E.deltaY))}),T=o.useCallback(E=>{const I=c.current;I.splice(0,I.length,...I.filter(W=>W.pointerId!==E.pointerId))},[]),x=o.useCallback(E=>{T(E),E.persist(),c.current.push(E)},[T]),C=R(E=>{var I;const W=c.current;if(E.pointerType==="mouse"&&E.buttons>1||!(!((I=s==null?void 0:s.current)===null||I===void 0)&&I.contains(E.target)))return;e>1&&E.stopPropagation();const{timeStamp:k}=E;W.length===0&&k-l.current<(E.pointerType==="touch"?w:P)?(l.current=0,n(e!==t?e*Math.max(t**(1/N),h):1,!1,..._(E))):l.current=k,x(E),W.length===2&&(a.current=Lt(W[0],W[1]))}),L=R(E=>{const I=c.current,W=I.find(k=>k.pointerId===E.pointerId);if(I.length===2&&a.current){E.stopPropagation(),x(E);const k=Lt(I[0],I[1]),F=k-a.current;Math.abs(F)>0&&(n(Ot(e,F,Z),!0,...I.map(j=>_(j)).reduce((j,ee)=>ee.map((y,z)=>j[z]+y/2))),a.current=k);return}e>1&&(E.stopPropagation(),W&&(I.length===1&&i((W.clientX-E.clientX)/e,(W.clientY-E.clientY)/e),x(E)))}),U=o.useCallback(E=>{const I=c.current;I.length===2&&I.find(W=>W.pointerId===E.pointerId)&&(a.current=void 0),T(E)},[T]),A=o.useCallback(()=>{const E=c.current;E.splice(0,E.length),l.current=0,a.current=void 0},[]);rn(g,C,L,U,r),o.useEffect(A,[u,A]),o.useEffect(()=>r?()=>{}:et(A,g(qe,M),g(Qe,S)),[r,g,A,M,S])}function Zo(e,t,r){const[n,i]=o.useState(1),[s,c]=o.useState(0),[l,a]=o.useState(0),u=ko(n,s,l,r),{currentSlide:d,globalIndex:f}=ie(),{containerRect:g,slideRect:p}=te(),{zoomInMultiplier:h}=ye(),m=d&&fe(d)?d.src:void 0,b=!m||!(r!=null&&r.current);J(()=>{i(1),c(0),a(0)},[f,m]);const w=o.useCallback((M,S,T)=>{const x=T||n,C=s-(M||0),L=l-(S||0),U=(e.width*x-p.width)/2/x,A=(e.height*x-p.height)/2/x;c(Math.min(Math.abs(C),Math.max(U,0))*Math.sign(C)),a(Math.min(Math.abs(L),Math.max(A,0))*Math.sign(L))},[n,s,l,p,e.width,e.height]),P=o.useCallback((M,S,T,x)=>{const C=nt(Math.min(Math.max(M+.001<t?M:t,1),t),5);C!==n&&(S||u(),w(T?T*(1/n-1/C):0,x?x*(1/n-1/C):0,C),i(C))},[n,t,w,u]),N=R(()=>{n>1&&(n>t&&P(t,!0),w())});J(N,[g.width,g.height,N]);const Z=o.useCallback(()=>P(n*h),[n,h,P]),_=o.useCallback(()=>P(n/h),[n,h,P]);return{zoom:n,offsetX:s,offsetY:l,disabled:b,changeOffsets:w,changeZoom:P,zoomIn:Z,zoomOut:_}}const un=o.createContext(null),lt=oe("useZoom","ZoomControllerContext",un);function $o({children:e}){const[t,r]=o.useState(),{slideRect:n}=te(),{imageRect:i,maxZoom:s}=Ao(n,t==null?void 0:t.imageDimensions),{zoom:c,offsetX:l,offsetY:a,disabled:u,changeZoom:d,changeOffsets:f,zoomIn:g,zoomOut:p}=Zo(i,s,t==null?void 0:t.zoomWrapperRef);Do(c,u),Wo(c,s,u,d,f,t==null?void 0:t.zoomWrapperRef);const h=o.useMemo(()=>({zoom:c,maxZoom:s,offsetX:l,offsetY:a,disabled:u,zoomIn:g,zoomOut:p,changeZoom:d}),[c,s,l,a,u,g,p,d]);o.useImperativeHandle(ye().ref,()=>h,[h]);const m=o.useMemo(()=>({...h,setZoomWrapper:r}),[h,r]);return o.createElement(un.Provider,{value:m},e)}const Fo=ae("ZoomIn",o.createElement(o.Fragment,null,o.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),o.createElement("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"}))),Vo=ae("ZoomOut",o.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"})),Rt=o.forwardRef(function({zoomIn:t,onLoseFocus:r},n){const i=o.useRef(!1),s=o.useRef(!1),{zoom:c,maxZoom:l,zoomIn:a,zoomOut:u,disabled:d}=lt(),{render:f}=H(),g=d||(t?c>=l:c<=1);return o.useEffect(()=>{g&&i.current&&s.current&&r(),g||(i.current=!0)},[g,r]),o.createElement(it,{ref:n,disabled:g,label:t?"Zoom in":"Zoom out",icon:t?Fo:Vo,renderIcon:t?f.iconZoomIn:f.iconZoomOut,onClick:t?a:u,onFocus:()=>{s.current=!0},onBlur:()=>{s.current=!1}})});function Uo(){const e=o.useRef(null),t=o.useRef(null),{focus:r}=te(),n=o.useCallback(c=>{var l,a;!((l=c.current)===null||l===void 0)&&l.disabled?r():(a=c.current)===null||a===void 0||a.focus()},[r]),i=o.useCallback(()=>n(e),[n]),s=o.useCallback(()=>n(t),[n]);return o.createElement(o.Fragment,null,o.createElement(Rt,{zoomIn:!0,ref:e,onLoseFocus:s}),o.createElement(Rt,{ref:t,onLoseFocus:i}))}function Xo(){const{render:e}=H(),t=lt();return e.buttonZoom?o.createElement(o.Fragment,null,e.buttonZoom(t)):o.createElement(Uo,null)}function Yo(e){var t;return(((t=e.srcSet)===null||t===void 0?void 0:t.length)||0)>0}function zo({current:e,preload:t},{type:r,source:n}){switch(r){case"fetch":return e?{current:e,preload:n}:{current:n};case"done":return n===t?{current:n}:{current:e,preload:t};default:throw new Error(zt)}}function Bo(e){var t,r;const[{current:n,preload:i},s]=o.useReducer(zo,{}),{slide:c,rect:l,imageFit:a,render:u,interactive:d}=e,f=c.srcSet.sort((_,M)=>_.width-M.width),g=(t=c.width)!==null&&t!==void 0?t:f[f.length-1].width,p=(r=c.height)!==null&&r!==void 0?r:f[f.length-1].height,h=ot(c,a),m=Math.max(...f.map(_=>_.width)),b=Math.min((h?Math.max:Math.min)(l.width,g*(l.height/p)),m),w=Fn(),P=R(()=>{var _;const M=(_=f.find(S=>S.width>=b*w))!==null&&_!==void 0?_:f[f.length-1];(!n||f.findIndex(S=>S.src===n)<f.findIndex(S=>S===M))&&s({type:"fetch",source:M.src})});J(P,[l.width,l.height,w,P]);const N=R(_=>s({type:"done",source:_})),Z={WebkitTransform:d?"initial":"translateZ(0)"};return h||Object.assign(Z,l.width/l.height<g/p?{width:"100%",height:"auto"}:{width:"auto",height:"100%"}),o.createElement(o.Fragment,null,i&&i!==n&&o.createElement(Pe,{key:"preload",...e,slide:{...c,src:i,srcSet:void 0},style:{position:"absolute",visibility:"hidden",...Z},onLoad:()=>N(i),render:{...u,iconLoading:()=>null,iconError:()=>null}}),n&&o.createElement(Pe,{key:"current",...e,slide:{...c,src:n,srcSet:void 0},style:Z}))}function Ho({render:e,slide:t,offset:r,rect:n}){var i;const[s,c]=o.useState(),l=o.useRef(null),{zoom:a,maxZoom:u,offsetX:d,offsetY:f,setZoomWrapper:g}=lt(),p=a>1,{carousel:h,on:m}=H(),{currentIndex:b}=ie();J(()=>r===0?(g({zoomWrapperRef:l,imageDimensions:s}),()=>g(void 0)):()=>{},[r,s,g]);let w=(i=e.slide)===null||i===void 0?void 0:i.call(e,{slide:t,offset:r,rect:n,zoom:a,maxZoom:u});if(!w&&fe(t)){const P={slide:t,offset:r,rect:n,render:e,imageFit:h.imageFit,imageProps:h.imageProps,onClick:r===0?()=>{var N;return(N=m.click)===null||N===void 0?void 0:N.call(m,{index:b})}:void 0};w=Yo(t)?o.createElement(Bo,{...P,slide:t,interactive:p,rect:r===0?{width:n.width*a,height:n.height*a}:n}):o.createElement(Pe,{onLoad:N=>c({width:N.naturalWidth,height:N.naturalHeight}),...P})}return w?o.createElement("div",{ref:l,className:Q(O(Ln),O(Ge),O(Zt),p&&O(Rn)),style:r===0?{transform:`scale(${a}) translateX(${d}px) translateY(${f}px)`}:void 0},w):null}const qo=({augment:e,addModule:t})=>{e(({zoom:r,toolbar:n,render:i,controller:s,...c})=>{const l=an(r);return{zoom:l,toolbar:Un(n,vt,o.createElement(Xo,null)),render:{...i,slide:a=>{var u;return fe(a.slide)?o.createElement(Ho,{render:i,...a}):(u=i.slide)===null||u===void 0?void 0:u.call(i,a)}},controller:{...s,preventDefaultWheelY:l.scrollToZoom},...c}}),t(re(vt,$o))};export{Pn as I,Go as L,Ko as M,qo as Z,_n as a};
