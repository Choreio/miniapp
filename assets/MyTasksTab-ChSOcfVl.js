const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./TasksMap-DPSTL7US.js","./index-CD5OBiba.js","./index-D1lNEFkw.css","./GeolocationRequest-BrLl8U8R.js","./MapContainerYandex-CaZYqg7v.js","./Input-D56nivfP.js","./Section-Yl5zceUz.js","./TasksAccordeon-C39Rd0S6.js","./TaskCard-mZ_iEzRG.js","./calcDistance-p9X9NEyQ.js","./index-nGK9gomE.js","./FileInput-BiYp9cza.js","./VisuallyHidden-Df-1f10W.js","./Avatar-CL2YYnLp.js"])))=>i.map(i=>d[i]);
import{R as h,D as T,F as j,u as M,r as a,c as r,s as _,G as v,d as A,j as s,T as E}from"./index-CD5OBiba.js";import{G as w,S as y,a as f}from"./GeolocationRequest-BrLl8U8R.js";import{S as R}from"./Section-Yl5zceUz.js";import"./MapContainerYandex-CaZYqg7v.js";import"./Input-D56nivfP.js";const S=h.lazy(()=>T(async()=>{const{TasksMap:e}=await import("./TasksMap-DPSTL7US.js");return{TasksMap:e}},__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url).then(({TasksMap:e})=>({default:e}))),k=h.lazy(()=>T(async()=>{const{TasksAccordeon:e}=await import("./TasksAccordeon-C39Rd0S6.js");return{TasksAccordeon:e}},__vite__mapDeps([7,1,2,5,6,8,9,10,4,11,12,13]),import.meta.url).then(({TasksAccordeon:e})=>({default:e}))),z=()=>{const e=j(),d=M(),[o,l]=a.useState(e.mode),m=t=>{console.log("Changing mode"),l(t)};a.useEffect(()=>{["list","map"].includes(e.mode||"")?l(e.mode):l("list")},[e]),a.useEffect(()=>{d("/tasks/my/"+o)},[d,o]);const i=r(_),c=r(v),u=a.useMemo(()=>c.filter(t=>{var n;return((n=t.customer)==null?void 0:n.id)===i.id&&t.status!=="closed"}),[c,i]),x=a.useMemo(()=>c.filter(t=>{var n;return((n=t.customer)==null?void 0:n.id)===i.id&&t.status==="closed"}),[c,i]),[g,p]=a.useState(!0);return a.useEffect(()=>{console.log("Force redo accordeon"),p(!1),setTimeout(()=>{p(!0)},50)},[c]),r(A).available?s.jsxs("div",{className:"md:container md:mx-auto",children:[s.jsxs("div",{className:"p-2 flex align-middle items-center justify-between w-full",children:[s.jsx(E,{children:"My tasks"}),s.jsxs(y,{className:"w-40 h-10 self-end z-[0]",children:[s.jsx(f,{className:"w-4 h-8 align-middle p-1",selected:o==="list",onClick:()=>{m("list")},children:"List"}),s.jsx(f,{selected:o==="map",className:"w-4 h-8 align-middle p-1",onClick:()=>{m("map")},children:"Map"})]})]}),s.jsx(R,{className:"h-full",children:o==="list"?s.jsxs(s.Fragment,{children:[s.jsx(k,{title:"Active tasks",tasks:u,mode:"edit",open:g}),s.jsx(k,{title:"Finished tasks",tasks:x,mode:"view"})]}):s.jsx(s.Fragment,{children:s.jsx(S,{tasks:u})})})]}):s.jsx(w,{})};export{z as MyTasksTab};
