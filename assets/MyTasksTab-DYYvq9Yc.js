const __vite__fileDeps=["./TasksMap-DWdODQpP.js","./index-ByNOcer-.js","./index-QYmOunxA.css","./GeolocationRequest-B9Y4QNpA.js","./MapContainerYandex-Cq1tU_Nh.js","./Input-BmxBgZ7Y.js","./List-DgIbQkPF.js","./TasksAccordeon-BX_HpLls.js","./TaskCard-v7TeDmfX.js","./calcDistance-p9X9NEyQ.js","./Field-R2GitiSo.js","./index-Rgq7b0Cc.js","./proxy-CXc_OPS_.js","./FileInput-CSBdwFYU.js","./VisuallyHidden-hoLU1URk.js","./Avatar-Bn9mfJqc.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{R as h,F as x,G as T,b as _,r as t,e as n,s as v,H as M,f as A,j as e,T as E}from"./index-ByNOcer-.js";import{G as R,S,a as p}from"./GeolocationRequest-B9Y4QNpA.js";import{S as C}from"./Input-BmxBgZ7Y.js";import"./MapContainerYandex-Cq1tU_Nh.js";import"./List-DgIbQkPF.js";const N=h.lazy(()=>x(()=>import("./TasksMap-DWdODQpP.js"),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url).then(({TasksMap:a})=>({default:a}))),f=h.lazy(()=>x(()=>import("./TasksAccordeon-BX_HpLls.js"),__vite__mapDeps([7,1,2,5,6,8,9,10,11,4,12,13,14,15]),import.meta.url).then(({TasksAccordeon:a})=>({default:a}))),z=()=>{const a=T(),r=_(),[o,k]=t.useState(a.mode||"list"),d=s=>{console.log("Changing mode"),k(s)};t.useEffect(()=>{r("tasks/my/"+o)},[r,o]);const l=n(v),c=n(M),m=t.useMemo(()=>c.filter(s=>{var i;return((i=s.customer)==null?void 0:i.id)===l.id&&s.status!=="closed"}),[c,l]),g=t.useMemo(()=>c.filter(s=>{var i;return((i=s.customer)==null?void 0:i.id)===l.id&&s.status==="closed"}),[c,l]),[j,u]=t.useState(!0);return t.useEffect(()=>{console.log("Force redo accordeon"),u(!1),setTimeout(()=>{u(!0)},50)},[c]),n(A).available?e.jsxs("div",{className:"md:container md:mx-auto",children:[e.jsxs("div",{className:"p-2 flex align-middle items-center justify-between w-full",children:[e.jsx(E,{children:"My tasks"}),e.jsxs(S,{className:"w-40 h-10 self-end z-[0]",children:[e.jsx(p,{className:"w-4 h-8 align-middle p-1",selected:o==="list",onClick:()=>{d("list")},children:"List"}),e.jsx(p,{selected:o==="map",className:"w-4 h-8 align-middle p-1",onClick:()=>{d("map")},children:"Map"})]})]}),e.jsx(C,{className:"h-full",children:o==="list"?e.jsxs(e.Fragment,{children:[e.jsx(f,{title:"Active tasks",tasks:m,mode:"edit",open:j}),e.jsx(f,{title:"Finished tasks",tasks:g,mode:"view"})]}):e.jsx(e.Fragment,{children:e.jsx(N,{tasks:m})})})]}):e.jsx(R,{})};export{z as MyTasksTab};
