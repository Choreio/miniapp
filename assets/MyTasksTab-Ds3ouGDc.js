const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./TasksMap-B5hzrWKy.js","./index-BvJMId5O.js","./index-CZBGo0u-.css","./GeolocationRequest-02FAGZiS.js","./MapContainerYandex-CNnWdlbz.js","./Input-fzvQysO2.js","./Section-ChIrXGgq.js","./TasksAccordeon-RCZp905f.js","./TaskCard-DRC8fLxJ.js","./calcDistance-p9X9NEyQ.js","./index-CMBWD4Db.js","./FileInput-B9Dfvlck.js","./VisuallyHidden-DsAlTa10.js","./Avatar-OKWUC2md.js"])))=>i.map(i=>d[i]);
import{R as h,F as T,G as j,b as M,r as a,e as r,s as _,H as v,f as A,j as s,T as E}from"./index-BvJMId5O.js";import{G as w,S as y,a as f}from"./GeolocationRequest-02FAGZiS.js";import{S as R}from"./Section-ChIrXGgq.js";import"./MapContainerYandex-CNnWdlbz.js";import"./Input-fzvQysO2.js";const S=h.lazy(()=>T(async()=>{const{TasksMap:e}=await import("./TasksMap-B5hzrWKy.js");return{TasksMap:e}},__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url).then(({TasksMap:e})=>({default:e}))),k=h.lazy(()=>T(async()=>{const{TasksAccordeon:e}=await import("./TasksAccordeon-RCZp905f.js");return{TasksAccordeon:e}},__vite__mapDeps([7,1,2,5,6,8,9,10,4,11,12,13]),import.meta.url).then(({TasksAccordeon:e})=>({default:e}))),z=()=>{const e=j(),d=M(),[o,l]=a.useState(e.mode),m=t=>{console.log("Changing mode"),l(t)};a.useEffect(()=>{["list","map"].includes(e.mode||"")?l(e.mode):l("list")},[e]),a.useEffect(()=>{d("/tasks/my/"+o)},[d,o]);const i=r(_),c=r(v),u=a.useMemo(()=>c.filter(t=>{var n;return((n=t.customer)==null?void 0:n.id)===i.id&&t.status!=="closed"}),[c,i]),x=a.useMemo(()=>c.filter(t=>{var n;return((n=t.customer)==null?void 0:n.id)===i.id&&t.status==="closed"}),[c,i]),[g,p]=a.useState(!0);return a.useEffect(()=>{console.log("Force redo accordeon"),p(!1),setTimeout(()=>{p(!0)},50)},[c]),r(A).available?s.jsxs("div",{className:"md:container md:mx-auto",children:[s.jsxs("div",{className:"p-2 flex align-middle items-center justify-between w-full",children:[s.jsx(E,{children:"My tasks"}),s.jsxs(y,{className:"w-40 h-10 self-end z-[0]",children:[s.jsx(f,{className:"w-4 h-8 align-middle p-1",selected:o==="list",onClick:()=>{m("list")},children:"List"}),s.jsx(f,{selected:o==="map",className:"w-4 h-8 align-middle p-1",onClick:()=>{m("map")},children:"Map"})]})]}),s.jsx(R,{className:"h-full",children:o==="list"?s.jsxs(s.Fragment,{children:[s.jsx(k,{title:"Active tasks",tasks:u,mode:"edit",open:g}),s.jsx(k,{title:"Finished tasks",tasks:x,mode:"view"})]}):s.jsx(s.Fragment,{children:s.jsx(S,{tasks:u})})})]}):s.jsx(w,{})};export{z as MyTasksTab};
