const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./TasksMap-WH2jnqlM.js","./index-Ds-NZCBB.js","./index-DnftONe8.css","./GeolocationRequest-DulW8HrH.js","./MapContainerYandex-Coy9gVPB.js","./Input-DHtvoLXj.js","./Section-DjlSGsqP.js","./TasksAccordeon-CbQMoJV9.js","./TaskCard-tUm3Iplc.js","./calcDistance-p9X9NEyQ.js","./index-DoPJnqsF.js","./FileInput-DWwIfE1G.js","./VisuallyHidden-w1DHBSuI.js","./Avatar-veL-KnVx.js"])))=>i.map(i=>d[i]);
import{R as f,H as h,I as j,b as M,r as a,e as r,s as _,J as v,f as A,j as s,T as w}from"./index-Ds-NZCBB.js";import{G as y,S as E,a as p}from"./GeolocationRequest-DulW8HrH.js";import{S as R}from"./Section-DjlSGsqP.js";import"./MapContainerYandex-Coy9gVPB.js";import"./Input-DHtvoLXj.js";const S=f.lazy(()=>h(async()=>{const{TasksMap:e}=await import("./TasksMap-WH2jnqlM.js");return{TasksMap:e}},__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url).then(({TasksMap:e})=>({default:e}))),k=f.lazy(()=>h(async()=>{const{TasksAccordeon:e}=await import("./TasksAccordeon-CbQMoJV9.js");return{TasksAccordeon:e}},__vite__mapDeps([7,1,2,5,6,8,9,10,4,11,12,13]),import.meta.url).then(({TasksAccordeon:e})=>({default:e}))),P=()=>{const e=j(),l=M(),[o,T]=a.useState(e.mode||"list"),d=t=>{console.log("Changing mode"),T(t)};a.useEffect(()=>{l("tasks/my/"+o)},[l,o]);const i=r(_),c=r(v),m=a.useMemo(()=>c.filter(t=>{var n;return((n=t.customer)==null?void 0:n.id)===i.id&&t.status!=="closed"}),[c,i]),x=a.useMemo(()=>c.filter(t=>{var n;return((n=t.customer)==null?void 0:n.id)===i.id&&t.status==="closed"}),[c,i]),[g,u]=a.useState(!0);return a.useEffect(()=>{console.log("Force redo accordeon"),u(!1),setTimeout(()=>{u(!0)},50)},[c]),r(A).available?s.jsxs("div",{className:"md:container md:mx-auto",children:[s.jsxs("div",{className:"p-2 flex align-middle items-center justify-between w-full",children:[s.jsx(w,{children:"My tasks"}),s.jsxs(E,{className:"w-40 h-10 self-end z-[0]",children:[s.jsx(p,{className:"w-4 h-8 align-middle p-1",selected:o==="list",onClick:()=>{d("list")},children:"List"}),s.jsx(p,{selected:o==="map",className:"w-4 h-8 align-middle p-1",onClick:()=>{d("map")},children:"Map"})]})]}),s.jsx(R,{className:"h-full",children:o==="list"?s.jsxs(s.Fragment,{children:[s.jsx(k,{title:"Active tasks",tasks:m,mode:"edit",open:g}),s.jsx(k,{title:"Finished tasks",tasks:x,mode:"view"})]}):s.jsx(s.Fragment,{children:s.jsx(S,{tasks:m})})})]}):s.jsx(y,{})};export{P as MyTasksTab};
