const __vite__fileDeps=["./MapPage-BkCsuRfd.js","./index-CIw8H4wH.js","./index-D1sSZdho.css","./GeolocationRequest-2ZfmRZo_.js","./Input-BbpIxFL5.js","./TasksList-ChuhCC6v.js","./TaskCard-Znqi5iE2.js","./FileInput-Cxi95vUJ.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{k as ht,r as w,l as qe,j as f,m as J,n as q,o as we,p as de,q as gt,v as pt,C as Z,c as ee,s as Ge,b as xt,w as Ye,x as wt,T as Xe,y as vt,z as yt,R as Ze,_ as Je,h as bt,d as Rt,B as Ct}from"./index-CIw8H4wH.js";import{S as Ke,a as re,b as Tt,M as At,G as jt,F as Ot}from"./GeolocationRequest-2ZfmRZo_.js";import{M as Me,a as kt,T as St}from"./TaskCard-Znqi5iE2.js";import{L as Pt,I as be,C as Te,B as Re,S as Et}from"./Input-BbpIxFL5.js";import{F as Nt}from"./FileInput-Cxi95vUJ.js";function se(e){return Qe(e)?(e.nodeName||"").toLowerCase():"#document"}function B(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function G(e){var t;return(t=(Qe(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Qe(e){return e instanceof Node||e instanceof B(e).Node}function V(e){return e instanceof Element||e instanceof B(e).Element}function z(e){return e instanceof HTMLElement||e instanceof B(e).HTMLElement}function Le(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof B(e).ShadowRoot}function ce(e){const{overflow:t,overflowX:s,overflowY:n,display:o}=$(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+s)&&!["inline","contents"].includes(o)}function Mt(e){return["table","td","th"].includes(se(e))}function je(e){const t=Oe(),s=$(e);return s.transform!=="none"||s.perspective!=="none"||(s.containerType?s.containerType!=="normal":!1)||!t&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!t&&(s.filter?s.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(s.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(s.contain||"").includes(n))}function Lt(e){let t=Y(e);for(;z(t)&&!ne(t);){if(je(t))return t;t=Y(t)}return null}function Oe(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ne(e){return["html","body","#document"].includes(se(e))}function $(e){return B(e).getComputedStyle(e)}function ve(e){return V(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Y(e){if(se(e)==="html")return e;const t=e.assignedSlot||e.parentNode||Le(e)&&e.host||G(e);return Le(t)?t.host:t}function et(e){const t=Y(e);return ne(t)?e.ownerDocument?e.ownerDocument.body:e.body:z(t)&&ce(t)?t:et(t)}function le(e,t,s){var n;t===void 0&&(t=[]),s===void 0&&(s=!0);const o=et(e),r=o===((n=e.ownerDocument)==null?void 0:n.body),i=B(o);return r?t.concat(i,i.visualViewport||[],ce(o)?o:[],i.frameElement&&s?le(i.frameElement):[]):t.concat(o,le(o,[],s))}const Dt=({children:e})=>{const{portalContainer:t}=ht();return t!=null&&t.current?qe.createPortal(e,t.current):w.isValidElement(e)?e:null},Ft=["top","right","bottom","left"],De=["start","end"],Fe=Ft.reduce((e,t)=>e.concat(t,t+"-"+De[0],t+"-"+De[1]),[]),H=Math.min,I=Math.max,me=Math.round,fe=Math.floor,X=e=>({x:e,y:e}),_t={left:"right",right:"left",bottom:"top",top:"bottom"},It={start:"end",end:"start"};function Ae(e,t,s){return I(e,H(t,s))}function Q(e,t){return typeof e=="function"?e(t):e}function U(e){return e.split("-")[0]}function W(e){return e.split("-")[1]}function tt(e){return e==="x"?"y":"x"}function ke(e){return e==="y"?"height":"width"}function ae(e){return["top","bottom"].includes(U(e))?"y":"x"}function Se(e){return tt(ae(e))}function nt(e,t,s){s===void 0&&(s=!1);const n=W(e),o=Se(e),r=ke(o);let i=o==="x"?n===(s?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[r]>t.floating[r]&&(i=ge(i)),[i,ge(i)]}function Bt(e){const t=ge(e);return[he(e),t,he(t)]}function he(e){return e.replace(/start|end/g,t=>It[t])}function Wt(e,t,s){const n=["left","right"],o=["right","left"],r=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return s?t?o:n:t?n:o;case"left":case"right":return t?r:i;default:return[]}}function zt(e,t,s,n){const o=W(e);let r=Wt(U(e),s==="start",n);return o&&(r=r.map(i=>i+"-"+o),t&&(r=r.concat(r.map(he)))),r}function ge(e){return e.replace(/left|right|bottom|top/g,t=>_t[t])}function $t(e){return{top:0,right:0,bottom:0,left:0,...e}}function st(e){return typeof e!="number"?$t(e):{top:e,right:e,bottom:e,left:e}}function pe(e){const{x:t,y:s,width:n,height:o}=e;return{width:n,height:o,top:s,left:t,right:t+n,bottom:s+o,x:t,y:s}}function _e(e,t,s){let{reference:n,floating:o}=e;const r=ae(t),i=Se(t),l=ke(i),c=U(t),a=r==="y",u=n.x+n.width/2-o.width/2,m=n.y+n.height/2-o.height/2,h=n[l]/2-o[l]/2;let d;switch(c){case"top":d={x:u,y:n.y-o.height};break;case"bottom":d={x:u,y:n.y+n.height};break;case"right":d={x:n.x+n.width,y:m};break;case"left":d={x:n.x-o.width,y:m};break;default:d={x:n.x,y:n.y}}switch(W(t)){case"start":d[i]-=h*(s&&a?-1:1);break;case"end":d[i]+=h*(s&&a?-1:1);break}return d}const Ht=async(e,t,s)=>{const{placement:n="bottom",strategy:o="absolute",middleware:r=[],platform:i}=s,l=r.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let a=await i.getElementRects({reference:e,floating:t,strategy:o}),{x:u,y:m}=_e(a,n,c),h=n,d={},v=0;for(let g=0;g<l.length;g++){const{name:y,fn:p}=l[g],{x:b,y:T,data:R,reset:C}=await p({x:u,y:m,initialPlacement:n,placement:h,strategy:o,middlewareData:d,rects:a,platform:i,elements:{reference:e,floating:t}});u=b??u,m=T??m,d={...d,[y]:{...d[y],...R}},C&&v<=50&&(v++,typeof C=="object"&&(C.placement&&(h=C.placement),C.rects&&(a=C.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:o}):C.rects),{x:u,y:m}=_e(a,h,c)),g=-1)}return{x:u,y:m,placement:h,strategy:o,middlewareData:d}};async function ye(e,t){var s;t===void 0&&(t={});const{x:n,y:o,platform:r,rects:i,elements:l,strategy:c}=e,{boundary:a="clippingAncestors",rootBoundary:u="viewport",elementContext:m="floating",altBoundary:h=!1,padding:d=0}=Q(t,e),v=st(d),y=l[h?m==="floating"?"reference":"floating":m],p=pe(await r.getClippingRect({element:(s=await(r.isElement==null?void 0:r.isElement(y)))==null||s?y:y.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(l.floating)),boundary:a,rootBoundary:u,strategy:c})),b=m==="floating"?{x:n,y:o,width:i.floating.width,height:i.floating.height}:i.reference,T=await(r.getOffsetParent==null?void 0:r.getOffsetParent(l.floating)),R=await(r.isElement==null?void 0:r.isElement(T))?await(r.getScale==null?void 0:r.getScale(T))||{x:1,y:1}:{x:1,y:1},C=pe(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:b,offsetParent:T,strategy:c}):b);return{top:(p.top-C.top+v.top)/R.y,bottom:(C.bottom-p.bottom+v.bottom)/R.y,left:(p.left-C.left+v.left)/R.x,right:(C.right-p.right+v.right)/R.x}}const Vt=e=>({name:"arrow",options:e,async fn(t){const{x:s,y:n,placement:o,rects:r,platform:i,elements:l,middlewareData:c}=t,{element:a,padding:u=0}=Q(e,t)||{};if(a==null)return{};const m=st(u),h={x:s,y:n},d=Se(o),v=ke(d),g=await i.getDimensions(a),y=d==="y",p=y?"top":"left",b=y?"bottom":"right",T=y?"clientHeight":"clientWidth",R=r.reference[v]+r.reference[d]-h[d]-r.floating[v],C=h[d]-r.reference[d],j=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a));let O=j?j[T]:0;(!O||!await(i.isElement==null?void 0:i.isElement(j)))&&(O=l.floating[T]||r.floating[v]);const E=R/2-C/2,N=O/2-g[v]/2-1,A=H(m[p],N),S=H(m[b],N),k=A,_=O-g[v]-S,L=O/2-g[v]/2+E,M=Ae(k,L,_),D=!c.arrow&&W(o)!=null&&L!==M&&r.reference[v]/2-(L<k?A:S)-g[v]/2<0,x=D?L<k?L-k:L-_:0;return{[d]:h[d]+x,data:{[d]:M,centerOffset:L-M-x,...D&&{alignmentOffset:x}},reset:D}}});function Ut(e,t,s){return(e?[...s.filter(o=>W(o)===e),...s.filter(o=>W(o)!==e)]:s.filter(o=>U(o)===o)).filter(o=>e?W(o)===e||(t?he(o)!==o:!1):!0)}const qt=function(e){return e===void 0&&(e={}),{name:"autoPlacement",options:e,async fn(t){var s,n,o;const{rects:r,middlewareData:i,placement:l,platform:c,elements:a}=t,{crossAxis:u=!1,alignment:m,allowedPlacements:h=Fe,autoAlignment:d=!0,...v}=Q(e,t),g=m!==void 0||h===Fe?Ut(m||null,d,h):h,y=await ye(t,v),p=((s=i.autoPlacement)==null?void 0:s.index)||0,b=g[p];if(b==null)return{};const T=nt(b,r,await(c.isRTL==null?void 0:c.isRTL(a.floating)));if(l!==b)return{reset:{placement:g[0]}};const R=[y[U(b)],y[T[0]],y[T[1]]],C=[...((n=i.autoPlacement)==null?void 0:n.overflows)||[],{placement:b,overflows:R}],j=g[p+1];if(j)return{data:{index:p+1,overflows:C},reset:{placement:j}};const O=C.map(A=>{const S=W(A.placement);return[A.placement,S&&u?A.overflows.slice(0,2).reduce((k,_)=>k+_,0):A.overflows[0],A.overflows]}).sort((A,S)=>A[1]-S[1]),N=((o=O.filter(A=>A[2].slice(0,W(A[0])?2:3).every(S=>S<=0))[0])==null?void 0:o[0])||O[0][0];return N!==l?{data:{index:p+1,overflows:C},reset:{placement:N}}:{}}}},Gt=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var s,n;const{placement:o,middlewareData:r,rects:i,initialPlacement:l,platform:c,elements:a}=t,{mainAxis:u=!0,crossAxis:m=!0,fallbackPlacements:h,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:g=!0,...y}=Q(e,t);if((s=r.arrow)!=null&&s.alignmentOffset)return{};const p=U(o),b=U(l)===l,T=await(c.isRTL==null?void 0:c.isRTL(a.floating)),R=h||(b||!g?[ge(l)]:Bt(l));!h&&v!=="none"&&R.push(...zt(l,g,v,T));const C=[l,...R],j=await ye(t,y),O=[];let E=((n=r.flip)==null?void 0:n.overflows)||[];if(u&&O.push(j[p]),m){const k=nt(o,i,T);O.push(j[k[0]],j[k[1]])}if(E=[...E,{placement:o,overflows:O}],!O.every(k=>k<=0)){var N,A;const k=(((N=r.flip)==null?void 0:N.index)||0)+1,_=C[k];if(_)return{data:{index:k,overflows:E},reset:{placement:_}};let L=(A=E.filter(M=>M.overflows[0]<=0).sort((M,D)=>M.overflows[1]-D.overflows[1])[0])==null?void 0:A.placement;if(!L)switch(d){case"bestFit":{var S;const M=(S=E.map(D=>[D.placement,D.overflows.filter(x=>x>0).reduce((x,P)=>x+P,0)]).sort((D,x)=>D[1]-x[1])[0])==null?void 0:S[0];M&&(L=M);break}case"initialPlacement":L=l;break}if(o!==L)return{reset:{placement:L}}}return{}}}};async function Yt(e,t){const{placement:s,platform:n,elements:o}=e,r=await(n.isRTL==null?void 0:n.isRTL(o.floating)),i=U(s),l=W(s),c=ae(s)==="y",a=["left","top"].includes(i)?-1:1,u=r&&c?-1:1,m=Q(t,e);let{mainAxis:h,crossAxis:d,alignmentAxis:v}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...m};return l&&typeof v=="number"&&(d=l==="end"?v*-1:v),c?{x:d*u,y:h*a}:{x:h*a,y:d*u}}const Xt=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var s,n;const{x:o,y:r,placement:i,middlewareData:l}=t,c=await Yt(t,e);return i===((s=l.offset)==null?void 0:s.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:o+c.x,y:r+c.y,data:{...c,placement:i}}}}},Zt=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:s,y:n,placement:o}=t,{mainAxis:r=!0,crossAxis:i=!1,limiter:l={fn:y=>{let{x:p,y:b}=y;return{x:p,y:b}}},...c}=Q(e,t),a={x:s,y:n},u=await ye(t,c),m=ae(U(o)),h=tt(m);let d=a[h],v=a[m];if(r){const y=h==="y"?"top":"left",p=h==="y"?"bottom":"right",b=d+u[y],T=d-u[p];d=Ae(b,d,T)}if(i){const y=m==="y"?"top":"left",p=m==="y"?"bottom":"right",b=v+u[y],T=v-u[p];v=Ae(b,v,T)}const g=l.fn({...t,[h]:d,[m]:v});return{...g,data:{x:g.x-s,y:g.y-n}}}}},Jt=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:s,rects:n,platform:o,elements:r}=t,{apply:i=()=>{},...l}=Q(e,t),c=await ye(t,l),a=U(s),u=W(s),m=ae(s)==="y",{width:h,height:d}=n.floating;let v,g;a==="top"||a==="bottom"?(v=a,g=u===(await(o.isRTL==null?void 0:o.isRTL(r.floating))?"start":"end")?"left":"right"):(g=a,v=u==="end"?"top":"bottom");const y=d-c.top-c.bottom,p=h-c.left-c.right,b=H(d-c[v],y),T=H(h-c[g],p),R=!t.middlewareData.shift;let C=b,j=T;if(m?j=u||R?H(T,p):p:C=u||R?H(b,y):y,R&&!u){const E=I(c.left,0),N=I(c.right,0),A=I(c.top,0),S=I(c.bottom,0);m?j=h-2*(E!==0||N!==0?E+N:I(c.left,c.right)):C=d-2*(A!==0||S!==0?A+S:I(c.top,c.bottom))}await i({...t,availableWidth:j,availableHeight:C});const O=await o.getDimensions(r.floating);return h!==O.width||d!==O.height?{reset:{rects:!0}}:{}}}};function ot(e){const t=$(e);let s=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const o=z(e),r=o?e.offsetWidth:s,i=o?e.offsetHeight:n,l=me(s)!==r||me(n)!==i;return l&&(s=r,n=i),{width:s,height:n,$:l}}function Pe(e){return V(e)?e:e.contextElement}function te(e){const t=Pe(e);if(!z(t))return X(1);const s=t.getBoundingClientRect(),{width:n,height:o,$:r}=ot(t);let i=(r?me(s.width):s.width)/n,l=(r?me(s.height):s.height)/o;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const Kt=X(0);function it(e){const t=B(e);return!Oe()||!t.visualViewport?Kt:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Qt(e,t,s){return t===void 0&&(t=!1),!s||t&&s!==B(e)?!1:t}function K(e,t,s,n){t===void 0&&(t=!1),s===void 0&&(s=!1);const o=e.getBoundingClientRect(),r=Pe(e);let i=X(1);t&&(n?V(n)&&(i=te(n)):i=te(e));const l=Qt(r,s,n)?it(r):X(0);let c=(o.left+l.x)/i.x,a=(o.top+l.y)/i.y,u=o.width/i.x,m=o.height/i.y;if(r){const h=B(r),d=n&&V(n)?B(n):n;let v=h,g=v.frameElement;for(;g&&n&&d!==v;){const y=te(g),p=g.getBoundingClientRect(),b=$(g),T=p.left+(g.clientLeft+parseFloat(b.paddingLeft))*y.x,R=p.top+(g.clientTop+parseFloat(b.paddingTop))*y.y;c*=y.x,a*=y.y,u*=y.x,m*=y.y,c+=T,a+=R,v=B(g),g=v.frameElement}}return pe({width:u,height:m,x:c,y:a})}const en=[":popover-open",":modal"];function Ee(e){return en.some(t=>{try{return e.matches(t)}catch{return!1}})}function tn(e){let{elements:t,rect:s,offsetParent:n,strategy:o}=e;const r=o==="fixed",i=G(n),l=t?Ee(t.floating):!1;if(n===i||l&&r)return s;let c={scrollLeft:0,scrollTop:0},a=X(1);const u=X(0),m=z(n);if((m||!m&&!r)&&((se(n)!=="body"||ce(i))&&(c=ve(n)),z(n))){const h=K(n);a=te(n),u.x=h.x+n.clientLeft,u.y=h.y+n.clientTop}return{width:s.width*a.x,height:s.height*a.y,x:s.x*a.x-c.scrollLeft*a.x+u.x,y:s.y*a.y-c.scrollTop*a.y+u.y}}function nn(e){return Array.from(e.getClientRects())}function rt(e){return K(G(e)).left+ve(e).scrollLeft}function sn(e){const t=G(e),s=ve(e),n=e.ownerDocument.body,o=I(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),r=I(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let i=-s.scrollLeft+rt(e);const l=-s.scrollTop;return $(n).direction==="rtl"&&(i+=I(t.clientWidth,n.clientWidth)-o),{width:o,height:r,x:i,y:l}}function on(e,t){const s=B(e),n=G(e),o=s.visualViewport;let r=n.clientWidth,i=n.clientHeight,l=0,c=0;if(o){r=o.width,i=o.height;const a=Oe();(!a||a&&t==="fixed")&&(l=o.offsetLeft,c=o.offsetTop)}return{width:r,height:i,x:l,y:c}}function rn(e,t){const s=K(e,!0,t==="fixed"),n=s.top+e.clientTop,o=s.left+e.clientLeft,r=z(e)?te(e):X(1),i=e.clientWidth*r.x,l=e.clientHeight*r.y,c=o*r.x,a=n*r.y;return{width:i,height:l,x:c,y:a}}function Ie(e,t,s){let n;if(t==="viewport")n=on(e,s);else if(t==="document")n=sn(G(e));else if(V(t))n=rn(t,s);else{const o=it(e);n={...t,x:t.x-o.x,y:t.y-o.y}}return pe(n)}function lt(e,t){const s=Y(e);return s===t||!V(s)||ne(s)?!1:$(s).position==="fixed"||lt(s,t)}function ln(e,t){const s=t.get(e);if(s)return s;let n=le(e,[],!1).filter(l=>V(l)&&se(l)!=="body"),o=null;const r=$(e).position==="fixed";let i=r?Y(e):e;for(;V(i)&&!ne(i);){const l=$(i),c=je(i);!c&&l.position==="fixed"&&(o=null),(r?!c&&!o:!c&&l.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||ce(i)&&!c&&lt(e,i))?n=n.filter(u=>u!==i):o=l,i=Y(i)}return t.set(e,n),n}function cn(e){let{element:t,boundary:s,rootBoundary:n,strategy:o}=e;const i=[...s==="clippingAncestors"?Ee(t)?[]:ln(t,this._c):[].concat(s),n],l=i[0],c=i.reduce((a,u)=>{const m=Ie(t,u,o);return a.top=I(m.top,a.top),a.right=H(m.right,a.right),a.bottom=H(m.bottom,a.bottom),a.left=I(m.left,a.left),a},Ie(t,l,o));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function an(e){const{width:t,height:s}=ot(e);return{width:t,height:s}}function fn(e,t,s){const n=z(t),o=G(t),r=s==="fixed",i=K(e,!0,r,t);let l={scrollLeft:0,scrollTop:0};const c=X(0);if(n||!n&&!r)if((se(t)!=="body"||ce(o))&&(l=ve(t)),n){const m=K(t,!0,r,t);c.x=m.x+t.clientLeft,c.y=m.y+t.clientTop}else o&&(c.x=rt(o));const a=i.left+l.scrollLeft-c.x,u=i.top+l.scrollTop-c.y;return{x:a,y:u,width:i.width,height:i.height}}function Ce(e){return $(e).position==="static"}function Be(e,t){return!z(e)||$(e).position==="fixed"?null:t?t(e):e.offsetParent}function ct(e,t){const s=B(e);if(Ee(e))return s;if(!z(e)){let o=Y(e);for(;o&&!ne(o);){if(V(o)&&!Ce(o))return o;o=Y(o)}return s}let n=Be(e,t);for(;n&&Mt(n)&&Ce(n);)n=Be(n,t);return n&&ne(n)&&Ce(n)&&!je(n)?s:n||Lt(e)||s}const un=async function(e){const t=this.getOffsetParent||ct,s=this.getDimensions,n=await s(e.floating);return{reference:fn(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function dn(e){return $(e).direction==="rtl"}const mn={convertOffsetParentRelativeRectToViewportRelativeRect:tn,getDocumentElement:G,getClippingRect:cn,getOffsetParent:ct,getElementRects:un,getClientRects:nn,getDimensions:an,getScale:te,isElement:V,isRTL:dn};function hn(e,t){let s=null,n;const o=G(e);function r(){var l;clearTimeout(n),(l=s)==null||l.disconnect(),s=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),r();const{left:a,top:u,width:m,height:h}=e.getBoundingClientRect();if(l||t(),!m||!h)return;const d=fe(u),v=fe(o.clientWidth-(a+m)),g=fe(o.clientHeight-(u+h)),y=fe(a),b={rootMargin:-d+"px "+-v+"px "+-g+"px "+-y+"px",threshold:I(0,H(1,c))||1};let T=!0;function R(C){const j=C[0].intersectionRatio;if(j!==c){if(!T)return i();j?i(!1,j):n=setTimeout(()=>{i(!1,1e-7)},1e3)}T=!1}try{s=new IntersectionObserver(R,{...b,root:o.ownerDocument})}catch{s=new IntersectionObserver(R,b)}s.observe(e)}return i(!0),r}function gn(e,t,s,n){n===void 0&&(n={});const{ancestorScroll:o=!0,ancestorResize:r=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=n,a=Pe(e),u=o||r?[...a?le(a):[],...le(t)]:[];u.forEach(p=>{o&&p.addEventListener("scroll",s,{passive:!0}),r&&p.addEventListener("resize",s)});const m=a&&l?hn(a,s):null;let h=-1,d=null;i&&(d=new ResizeObserver(p=>{let[b]=p;b&&b.target===a&&d&&(d.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var T;(T=d)==null||T.observe(t)})),s()}),a&&!c&&d.observe(a),d.observe(t));let v,g=c?K(e):null;c&&y();function y(){const p=K(e);g&&(p.x!==g.x||p.y!==g.y||p.width!==g.width||p.height!==g.height)&&s(),g=p,v=requestAnimationFrame(y)}return s(),()=>{var p;u.forEach(b=>{o&&b.removeEventListener("scroll",s),r&&b.removeEventListener("resize",s)}),m==null||m(),(p=d)==null||p.disconnect(),d=null,c&&cancelAnimationFrame(v)}}const pn=Xt,xn=qt,wn=Zt,vn=Gt,yn=Jt,We=Vt,bn=(e,t,s)=>{const n=new Map,o={platform:mn,...s},r={...o.platform,_c:n};return Ht(e,t,{...o,platform:r})};var ue=typeof document<"u"?w.useLayoutEffect:w.useEffect;function xe(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let s,n,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(s=e.length,s!==t.length)return!1;for(n=s;n--!==0;)if(!xe(e[n],t[n]))return!1;return!0}if(o=Object.keys(e),s=o.length,s!==Object.keys(t).length)return!1;for(n=s;n--!==0;)if(!{}.hasOwnProperty.call(t,o[n]))return!1;for(n=s;n--!==0;){const r=o[n];if(!(r==="_owner"&&e.$$typeof)&&!xe(e[r],t[r]))return!1}return!0}return e!==e&&t!==t}function at(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function ze(e,t){const s=at(e);return Math.round(t*s)/s}function $e(e){const t=w.useRef(e);return ue(()=>{t.current=e}),t}function Rn(e){e===void 0&&(e={});const{placement:t="bottom",strategy:s="absolute",middleware:n=[],platform:o,elements:{reference:r,floating:i}={},transform:l=!0,whileElementsMounted:c,open:a}=e,[u,m]=w.useState({x:0,y:0,strategy:s,placement:t,middlewareData:{},isPositioned:!1}),[h,d]=w.useState(n);xe(h,n)||d(n);const[v,g]=w.useState(null),[y,p]=w.useState(null),b=w.useCallback(x=>{x!==j.current&&(j.current=x,g(x))},[]),T=w.useCallback(x=>{x!==O.current&&(O.current=x,p(x))},[]),R=r||v,C=i||y,j=w.useRef(null),O=w.useRef(null),E=w.useRef(u),N=c!=null,A=$e(c),S=$e(o),k=w.useCallback(()=>{if(!j.current||!O.current)return;const x={placement:t,strategy:s,middleware:h};S.current&&(x.platform=S.current),bn(j.current,O.current,x).then(P=>{const F={...P,isPositioned:!0};_.current&&!xe(E.current,F)&&(E.current=F,qe.flushSync(()=>{m(F)}))})},[h,t,s,S]);ue(()=>{a===!1&&E.current.isPositioned&&(E.current.isPositioned=!1,m(x=>({...x,isPositioned:!1})))},[a]);const _=w.useRef(!1);ue(()=>(_.current=!0,()=>{_.current=!1}),[]),ue(()=>{if(R&&(j.current=R),C&&(O.current=C),R&&C){if(A.current)return A.current(R,C,k);k()}},[R,C,k,A,N]);const L=w.useMemo(()=>({reference:j,floating:O,setReference:b,setFloating:T}),[b,T]),M=w.useMemo(()=>({reference:R,floating:C}),[R,C]),D=w.useMemo(()=>{const x={position:s,left:0,top:0};if(!M.floating)return x;const P=ze(M.floating,u.x),F=ze(M.floating,u.y);return l?{...x,transform:"translate("+P+"px, "+F+"px)",...at(M.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:P,top:F}},[s,l,M.floating,u.x,u.y]);return w.useMemo(()=>({...u,update:k,refs:L,elements:M,floatingStyles:D}),[u,k,L,M,D])}const Cn=e=>{function t(s){return{}.hasOwnProperty.call(s,"current")}return{name:"arrow",options:e,fn(s){const{element:n,padding:o}=typeof e=="function"?e(s):e;return n&&t(n)?n.current!=null?We({element:n.current,padding:o}).fn(s):{}:n?We({element:n,padding:o}).fn(s):{}}}},Tn=(e,t)=>({...pn(e),options:[e,t]}),An=(e,t)=>({...wn(e),options:[e,t]}),jn=(e,t)=>({...vn(e),options:[e,t]}),On=(e,t)=>({...yn(e),options:[e,t]}),kn=(e,t)=>({...xn(e),options:[e,t]}),Sn=(e,t)=>({...Cn(e),options:[e,t]}),Pn=(e,t={x:0,y:0},s=0,n=!1)=>{const o=r=>{const i={x:t.x||0,y:t.y||0};return n?s:i[r?"y":"x"]+s};return e.startsWith("top")?["bottom",{top:"100%",left:o(!1)}]:e.startsWith("right")?["left",{top:o(!0),left:0}]:e.startsWith("bottom")?[void 0,{bottom:"100%",left:o(!1)}]:["right",{top:o(!0),right:0}]},He=22,ft=6,En=12,Nn=1,Ve=ft+Nn,ut=e=>f.jsx("svg",J(q({width:He,height:Ve,viewBox:`0 0 ${He} ${Ve}`,xmlns:"http://www.w3.org/2000/svg"},e),{children:f.jsx("path",{d:"M10.804 0C6.387 0 6.94 6 .865 6h19.878c-6.074 0-5.521-6-9.939-6Z",fill:"currentColor"})})),Mn={right:"tgui-6c3deae89ec68e99",bottom:"tgui-fed67e27ad8cb75f",left:"tgui-b27d1c4f6222569e"},Ln=w.forwardRef((e,t)=>{var{style:s,offset:n,isStaticOffset:o,coords:r,placement:i="bottom",Icon:l=ut,className:c}=e,a=we(e,["style","offset","isStaticOffset","coords","placement","Icon","className"]);const[u,m]=Pn(i,r,n,o);return f.jsx("div",J(q({ref:t,style:q({},m,s),className:de("tgui-97a62789a70393d0",u&&Mn[u],c)},a),{children:f.jsx(l,{className:"tgui-6ae8c47f9448321b"})}))}),Dn={ancestorScroll:!0,ancestorResize:!0,elementResize:!1,animationFrame:!1},Fn=(e,t,s,n=Dn)=>{const{elementResize:o=!1}=n,r=we(n,["elementResize"]),i=gn(e,t,s,J(q({},r),{elementResize:!1}));let l=null;if(o){let c=!0;l=new MutationObserver(()=>{c||s(),c=!1}),z(e)&&l.observe(e,{childList:!0,subtree:!0}),l.observe(t,{childList:!0,subtree:!0})}return()=>{l!==null&&(l.disconnect(),l=null),i()}},_n=e=>!e.startsWith("auto"),In=e=>{const t=e.replace(/auto-|auto/,"");return t==="start"||t==="end"?t:null},Bn=({placement:e="bottom-start",arrowRef:t=null,withArrow:s,arrowHeight:n,arrowPadding:o,sameWidth:r,offsetByMainAxis:i=0,offsetByCrossAxis:l=0,customMiddlewares:c})=>w.useMemo(()=>{const a=_n(e),u=[Tn({crossAxis:l,mainAxis:s&&n?i+n:i})];return a?u.push(jn({fallbackAxisSideDirection:"start"})):u.push(kn({alignment:In(e)})),u.push(An()),r&&u.push(On({apply({rects:m,elements:h}){Object.assign(h.floating.style,{width:`${m.reference.width}px`})}})),c&&u.push(...c),s&&u.push(Sn({element:t,padding:o})),{middlewares:u,strictPlacement:a?e:void 0}},[l,t,s,n,o,i,r,c,e]),Wn=w.forwardRef((e,t)=>{var{placement:s="auto",sameWidth:n,offsetByMainAxis:o=8,offsetByCrossAxis:r=0,withArrow:i=!0,customMiddlewares:l,autoUpdateOnTargetResize:c=!1,arrowProps:a,ArrowIcon:u=ut,Component:m="div",style:h,targetRef:d,className:v,children:g}=e,y=we(e,["placement","sameWidth","offsetByMainAxis","offsetByCrossAxis","withArrow","customMiddlewares","autoUpdateOnTargetResize","arrowProps","ArrowIcon","Component","style","targetRef","className","children"]);const[p,b]=w.useState(null),{strictPlacement:T,middlewares:R}=Bn({placement:s,sameWidth:n,withArrow:i,arrowRef:p,arrowHeight:(a==null?void 0:a.height)||ft,arrowPadding:(a==null?void 0:a.padding)||En,offsetByMainAxis:o,offsetByCrossAxis:r,customMiddlewares:l}),{placement:C,refs:j,middlewareData:O,floatingStyles:E}=Rn({placement:T,middleware:R,whileElementsMounted(...N){return Fn(...N,{elementResize:c})}});return gt(()=>{j.setReference("current"in d?d.current:d)},[j.setReference,d]),f.jsx(Dt,{children:f.jsxs(m,J(q({},y),{ref:pt(t,j.setFloating),style:q({},h,E),className:de("tgui-e9c83f4f150e5513",v),children:[i&&f.jsx(Ln,J(q({},a),{coords:O.arrow,placement:C,ref:b,Icon:u})),g]}))})}),ie=e=>{var{mode:t="light",children:s,className:n,arrowProps:o}=e,r=we(e,["mode","children","className","arrowProps"]);return f.jsx(Wn,J(q({withArrow:!0,arrowProps:J(q({},o),{className:de("tgui-e0107e1e5ea5b9f3",o==null?void 0:o.className)}),className:de("tgui-5638a4ef4e806d8c",t==="dark"&&"tgui-bc60ca772e3ae3c6",n)},r),{children:f.jsx(Z,{level:"1",children:s})}))};function zn({title:e,titleId:t,...s},n){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},s),e?w.createElement("title",{id:t},e):null,w.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z",clipRule:"evenodd"}))}const $n=w.forwardRef(zn),Hn=({closeModal:e})=>{var M,D;const t=ee(Ge),s=xt(),[n,o]=w.useState(!1),r=w.useRef(null),[i,l]=w.useState(""),c=w.useRef(null),[a,u]=w.useState(""),m=w.useRef(null),[h,d]=w.useState(""),v=w.useRef(null),[g,y]=w.useState(),[p,b]=w.useState([]),T=w.useRef(null),[R,C]=w.useState({available:!1}),j=w.useMemo(()=>t.id,[t]),O=()=>{var P,F;const x=JSON.parse(sessionStorage.getItem("saved-task")||"{}");try{l(x.title),u(x.desc),d(((P=x==null?void 0:x.reward)==null?void 0:P.split(" ")[0])||""),y((F=x==null?void 0:x.reward)==null?void 0:F.split(" ")[1]),b(x.attachments||[]),C(x.location)}catch{console.log("Cant parse saved task")}},E=w.useCallback((x,P,F,Ne,oe,dt,mt)=>({id:Date.now().toString(),title:x,desc:P,reward:F+" "+Ne,attachments:oe,location:dt,customer:mt,status:"open"}),[]),[N,A]=w.useState(ee(Ye));w.useEffect(()=>{N&&(console.log("Restore created task"),O())},[]),w.useEffect(()=>{i.trim()!==""||a.trim()!==""||h.trim()!==""||(g||"").trim()!==""||p.length>0||R.available?(console.log("Changes made"),A(!0),sessionStorage.setItem("saved-task",JSON.stringify(E(i,a,h,g||"TON",p,R,j)))):(A(!1),sessionStorage.removeItem("saved-task"))},[i,a,h,g,p,R,j,E]),w.useEffect(()=>{console.log("Update changes store"),s(wt(N))},[N,s]);const S=x=>{const P=x.currentTarget.files;if(P&&(P==null?void 0:P.length)>0){const F=[];for(let oe=0;oe<P.length;oe++)F.push(URL.createObjectURL(P[oe]));b([...p||[],...F])}},k=x=>{const P=[...p];P.splice(x,1),b(P)},_=()=>{if(i.trim().length===0||a.trim().length===0||h.length===0||(g||"")===""||!R.available)return o(!0);const x=E(i,a,h,g||"TON",p,R,j);s(yt(x)),A(!1),sessionStorage.removeItem("created-task"),e()},L=()=>{A(!1),sessionStorage.removeItem("created-task"),e()};return f.jsxs("div",{children:[f.jsx("div",{className:"p-2 flex align-middle items-center justify-between w-full",children:f.jsx(Xe,{children:"Task details"})}),f.jsx("div",{children:f.jsxs(Pt,{className:"flex flex-col gap-2 h-full",children:[f.jsxs("div",{children:[f.jsxs(Z,{level:"2",weight:"2",className:"pl-6 text-[--tg-theme-hint-color]",children:["Title",f.jsx("span",{className:"text-red-600",children:"*"})]}),f.jsx("div",{ref:r,children:f.jsx(be,{value:i,status:i.length===0&&n?"error":"default",placeholder:"Title...",onChange:x=>{const P=x.currentTarget.value;l(P)}})}),f.jsx(ie,{className:"z-50",mode:"dark",placement:"top",targetRef:r,hidden:!(i.length===0&&n),children:"This field is required"})]}),f.jsxs("div",{children:[f.jsxs(Z,{level:"2",weight:"2",className:"pl-6 text-[--tg-theme-hint-color]",children:["Description",f.jsx("span",{className:"text-red-600",children:"*"})]}),f.jsx("div",{ref:c,children:f.jsx(be,{placeholder:"Description...",value:a,status:a.length===0&&n?"error":"default",onChange:x=>u(x.currentTarget.value)})}),f.jsx(ie,{className:"z-50",mode:"dark",placement:"top",targetRef:c,hidden:!(a.length===0&&n),children:"This field is required"})]}),f.jsxs("div",{children:[f.jsxs(Z,{level:"2",weight:"2",className:"pl-6 text-[--tg-theme-hint-color]",children:["Reward",f.jsx("span",{className:"text-red-600",children:"*"})]}),f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{ref:m,children:f.jsx(be,{placeholder:"Cost...",inputMode:"numeric",type:"number",status:h.length===0&&n?"error":"default",value:h||"",onChange:x=>{d(x.currentTarget.value)}})}),f.jsx(ie,{className:"z-50",mode:"dark",placement:"top",targetRef:m,hidden:!(h.length===0&&n),children:"This field is required"}),f.jsx("div",{ref:v,children:f.jsxs(Ke,{className:"h-12 items-center",children:[f.jsx(re,{onClick:()=>y("TON"),selected:g==="TON",children:"TON"}),f.jsx(re,{onClick:()=>y("USDT"),selected:g==="USDT",children:"USDT"}),f.jsx(re,{onClick:()=>y("BTC"),selected:g==="BTC",children:"BTC"})]})}),f.jsx(ie,{className:"z-50",mode:"dark",targetRef:v,hidden:!((g||"").length===0&&n),children:"Please select currency"})]})]}),f.jsxs("div",{children:[f.jsx(Z,{level:"2",weight:"2",className:"pl-6 text-[--tg-theme-hint-color]",children:"Attachments"}),p&&p.length>0&&p.map((x,P)=>f.jsx(Te,{className:"pl-6",after:f.jsx(Re,{mode:"plain",onClick:()=>k(P),children:"X"}),children:f.jsx(vt,{children:x})},P+x)),f.jsx(Nt,{multiple:!0,label:"Attach a new file",accept:"image/*",onChange:S})]}),f.jsxs("div",{children:[f.jsxs(Z,{level:"2",weight:"2",className:"pl-6 text-[--tg-theme-hint-color]",children:["Address",f.jsx("span",{className:"text-red-600",children:"*"})]}),f.jsx("div",{ref:T,className:"overflow-visible",children:f.jsx(Tt,{status:!R.available&&n?"error":"default",geoposition:R||{available:!1},setGeoposition:x=>C(x)})}),f.jsx(ie,{className:"z-50",mode:"dark",placement:"top",targetRef:T,hidden:!(!R.available&&n),children:"This field is required"})]}),R.available&&f.jsxs("div",{children:[f.jsx(Z,{level:"2",weight:"2",className:"pl-6 text-[--tg-theme-hint-color]",children:"On map"}),f.jsx(Te,{children:f.jsx(At,{type:"target",center:{latitude:Number((M=R.latLong)==null?void 0:M.latitude),longitude:Number((D=R.latLong)==null?void 0:D.longitude)}})})]})]})}),f.jsx("div",{className:"sticky bottom-1",children:f.jsxs("div",{className:"flex flex-row justify-center items-center",children:[f.jsx(Re,{className:"bg-green-400 w-full",onClick:_,children:"Create"}),f.jsx(Re,{className:"bg-red-400 w-full",onClick:L,children:"Cancel"})]})})]})},Vn=Ze.lazy(()=>Je(()=>import("./MapPage-BkCsuRfd.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url).then(({MapPage:e})=>({default:e}))),Ue=Ze.lazy(()=>Je(()=>import("./TasksList-ChuhCC6v.js"),__vite__mapDeps([5,1,2,4,6,3,7]),import.meta.url).then(({TasksList:e})=>({default:e}))),Jn=()=>{const[e,t]=w.useState("list"),s=A=>{console.log("Changing mode"),t(A)},[n,o]=w.useState(!1),r=()=>{o(!0),console.log("Modal opened")},i=()=>{o(!1),console.log("Modal closed")},[l,c]=w.useState(),a=A=>{console.log("Selected task: "+A),c([...p,...T].find(S=>S.id===A)),r()},[u,m]=w.useState(!1),h=ee(Ye),d=()=>{m(!0),console.log("Modal opened")},v=()=>{m(!1),console.log("Modal closed")},g=ee(Ge),y=ee(bt),[p,b]=w.useState([]),[T,R]=w.useState([]),C=w.useCallback(A=>{const S=A.filter(k=>k.customer===g.id&&(k.status==="open"||k.status==="active"));return console.log("Function - getActiveTasks: Active tasks length = "+S.length),S},[g]),j=w.useCallback(A=>{const S=A.filter(k=>k.acceptedBy===g.id&&k.status==="closed");return console.log("Function - getFinishedTasks: Finished tasks length = "+S.length),S},[g]),[O,E]=w.useState(!0);w.useEffect(()=>{console.log("MyTasksTab: Tasks array changed"),b(C(y)),R(j(y)),console.log("Force redo accordeon"),E(!1),setTimeout(()=>{E(!0)},50)},[y,C,j]);const N=ee(Rt);return N.available?f.jsxs("div",{className:"md:container md:mx-auto",children:[f.jsx(Et,{className:"pt-4 h-full",header:f.jsxs("div",{className:"p-2 flex align-middle items-center justify-between w-full",children:[f.jsx(Xe,{className:"self-start",children:"Tasks"}),f.jsxs(Ke,{className:"w-40 h-8 self-end ",children:[f.jsx(re,{className:"w-4 h-8 align-middle p-1",onClick:()=>{s("list")},children:"List"}),f.jsx(re,{className:"w-4 h-8 align-middle p-1",onClick:()=>{s("map")},children:"Map"})]})]}),children:e==="list"?f.jsxs(f.Fragment,{children:[f.jsx(Te,{before:f.jsxs("div",{children:[f.jsx($n,{className:"h-8 w-8"}),h&&f.jsx(Ct,{className:"absolute top-1 right-1 bg-yellow-600",type:"number",children:"!"})]}),onClick:d,children:"Create a new task"}),f.jsx(Ue,{title:"Active tasks",tasks:p,mode:"edit",open:O}),f.jsx(Ue,{title:"Finished tasks",tasks:T,mode:"view"})]}):f.jsx(f.Fragment,{children:f.jsx(Vn,{tasks:p,position:N,onBubbleClick:a})})}),f.jsx(Me,{open:n,onOpenChange:A=>{o(A)},className:"z-10 h-2/3",header:f.jsx(kt,{after:f.jsx(Ot,{className:"text-[--tg-theme-plain-foreground] h-4",onClick:i})}),children:f.jsx(St,{taskId:l==null?void 0:l.id,closeModal:i,mode:"view"})}),f.jsx(Me,{open:u,onOpenChange:A=>{m(A)},className:"z-10 top-0 bottom-0",children:f.jsx(Hn,{openModal:u,closeModal:v})})]}):f.jsx(jt,{})};export{Jn as MyTasksTab};
