const __vite__fileDeps=["./GeolocationRequest-DnLnRJ7A.js","./index-VFKkkdMM.js","./index-CvQTBs6Q.css","./Input-Cv6hzr2T.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{r as s,l as tt,q as nt,j as c,m as Wn,n as st,z as Bn,C as V,o as ot,p as rt,K as Zn,x as lt,G as $n,b as it,c as ne,s as Gt,L as qt,M as Ot,R as Jt,_ as Qt,N as Oe,O as Vn,Q as zn,U as Yn,k as Xn,V as Hn,W as Kn,d as Gn,B as qn,E as Jn,T as Qn}from"./index-VFKkkdMM.js";import{F as ct,M as es,b as en}from"./GeolocationRequest-DnLnRJ7A.js";import{C as be,L as at,B as oe,I as ve}from"./Input-Cv6hzr2T.js";import{I as ut,F as tn,A as ts}from"./FileInput-Bq4i_xfn.js";const nn=s.createContext({}),ns={bezeled:"tgui-99a630d0096f2169",gray:"tgui-30bf4976f818e8bf"},me=e=>{var{mode:t="plain",className:r,text:n,children:o}=e,l=tt(e,["mode","className","text","children"]);const i=nt(),{mode:a}=s.useContext(nn),u=a||t;return c.jsxs(Wn,st(ot({Component:"button",className:rt("tgui-c5545e0bc6105e48",i==="ios"&&"tgui-bf32cd3c110b8729",u!=="plain"&&ns[u],r)},l),{children:[o,Bn(n)&&c.jsx(V,{className:"tgui-c0c9bf3b1a53a8a4",level:"1",weight:"2",children:n})]}))},dt=s.forwardRef((e,t)=>{var{mode:r,className:n,children:o}=e,l=tt(e,["mode","className","children"]);const i=nt(),a=Zn({mode:r});return c.jsx("div",st(ot({ref:t,className:rt("tgui-39e9f02ce4b4b950",i==="ios"&&"tgui-b3d7f75461a64b76",n)},l),{children:c.jsx(nn.Provider,{value:a,children:o})}))});dt.Item=me;const ss=s.forwardRef((e,t)=>{var{before:r,after:n,className:o,children:l}=e,i=tt(e,["before","after","className","children"]);const a=nt();return c.jsxs("header",st(ot({ref:t,className:rt("tgui-f67c8fb3553eee55",o)},i),{children:[c.jsx("div",{className:"tgui-09b5f6cfd7ba56ab",children:r}),a==="ios"&&c.jsx(lt,{weight:"2",className:"tgui-7ce1022bfdcb0ae3",children:l}),c.jsx("div",{className:"tgui-fe1d6742d85038d7",children:n})]}))}),os=({children:e,openModal:t,setOpenModal:r,closeModal:n,hidingModal:o,setHidingModal:l})=>c.jsxs("div",{id:"pseudoModal",hidden:!t,className:"w-screen fixed top-0 bottom-0 bg-[--tg-theme-bg-color] overflow-y-scroll".concat(" ",o?"animate-bottomDisappear":"animate-bottomAppear"," ",t?"z-10":"-z-10"),style:{animationFillMode:"forward"},onAnimationEnd:()=>{if(o){const i=document.getElementById("pseudoModal");i&&(i.style.opacity="0"),r(!1),l(!1),console.log("Modal closed")}},children:[c.jsx("div",{className:"sticky -top-0 inset-0 z-[11] bg-[--tg-theme-bg-color]",children:c.jsx(ss,{after:c.jsx(ct,{className:"text-[--tg-theme-plain-foreground] h-4",onClick:n})})}),e]}),pe=e=>Number(e)*Math.PI/180,rs=(e,t)=>{if(!e||!t)return 0;const r=6378.137,n=pe(t.latitude)-pe(e.latitude),o=pe(t.longitude)-pe(e.longitude),l=Math.sin(n/2)*Math.sin(n/2)+Math.cos(pe(e.latitude))*Math.cos(pe(t.latitude))*Math.sin(o/2)*Math.sin(o/2),i=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),a=r*i;return Number(a.toFixed(3))},sn="carousel",on="controller",ls="navigation",is="no-scroll",ft="portal",cs="root",rn="toolbar",kt="zoom",ze="loading",Ye="error",Xe="complete",as="placeholder",us=e=>`active-slide-${e}`,ds="fullsize",ht="flex_center",fs="no_scroll",ln="no_scroll_padding",cn="slide_wrapper",hs="slide_wrapper_interactive",fe="prev",he="next",Rt="swipe",we="close",an="onPointerDown",un="onPointerMove",dn="onPointerUp",fn="onPointerLeave",hn="onPointerCancel",mt="onKeyDown",ms="onKeyUp",gt="onWheel",gs="Escape",ps="ArrowLeft",xs="ArrowRight",vs="button",qe="icon",mn="contain",Dt="cover",gn="Unknown action type",pn="yarl__";function te(...e){return[...e].filter(Boolean).join(" ")}function R(e){return`${pn}${e}`}function K(e){return`--${pn}${e}`}function Te(e,t){return`${e}${t?`_${t}`:""}`}function pt(e){return t=>Te(e,t)}function bs(e,t){var r;return(r=e==null?void 0:e[t])!==null&&r!==void 0?r:t}function xt(...e){return()=>{e.forEach(t=>{t()})}}function ie(e,t,r){return()=>{const n=s.useContext(r);if(!n)throw new Error(`${e} must be used within a ${t}.Provider`);return n}}function vt(){return typeof window<"u"}function bt(e,t=0){const r=10**t;return Math.round((e+Number.EPSILON)*r)/r}function Ce(e){return e.type===void 0||e.type==="image"}function wt(e,t){return e.imageFit===Dt||e.imageFit!==mn&&t===Dt}function De(e){return typeof e=="string"?Number.parseInt(e,10):e}function ke(e){if(typeof e=="number")return{pixel:e};if(typeof e=="string"){const t=De(e);return e.endsWith("%")?{percent:t}:{pixel:t}}return{pixel:0}}function ws(e,t){const r=ke(t),n=r.percent!==void 0?e.width/100*r.percent:r.pixel;return{width:Math.max(e.width-2*n,0),height:Math.max(e.height-2*n,0)}}function Cs(){return(vt()?window==null?void 0:window.devicePixelRatio:void 0)||1}function xn(e,t){return t>0?(e%t+t)%t:0}function vn(e){return e.length>0}function bn(e,t){return e[xn(t,e.length)]}function Je(e,t){return vn(e)?bn(e,t):void 0}function Es(e){return Ce(e)?e.src:void 0}function Ns(e,t,r){if(!r)return e;const{buttons:n,...o}=e,l=n.findIndex(a=>a===t),i=s.isValidElement(r)?s.cloneElement(r,{key:t},null):r;if(l>=0){const a=[...n];return a.splice(l,1,i),{buttons:a,...o}}return{buttons:[i,...n],...o}}function ys(e,t,r=0){return Math.min(e.preload,Math.max(e.finite?t.length-1:Math.floor(t.length/2),r))}const Qe={open:!1,close:()=>{},index:0,slides:[],render:{},plugins:[],toolbar:{buttons:[we]},labels:{},animation:{fade:250,swipe:500,easing:{fade:"ease",swipe:"ease-out",navigation:"ease-in-out"}},carousel:{finite:!1,preload:2,padding:"16px",spacing:"30%",imageFit:mn,imageProps:{}},controller:{ref:null,focus:!0,aria:!1,touchAction:"none",closeOnPullUp:!1,closeOnPullDown:!1,closeOnBackdropClick:!1,preventDefaultWheelX:!0,preventDefaultWheelY:!1},portal:{},noScroll:{disabled:!1},on:{},styles:{},className:""};function ce(e,t){return{name:e,component:t}}function Y(e,t){return{module:e,children:t}}function wn(e,t,r){return e.module.name===t?r(e):e.children?[Y(e.module,e.children.flatMap(n=>{var o;return(o=wn(n,t,r))!==null&&o!==void 0?o:[]}))]:[e]}function xe(e,t,r){return e.flatMap(n=>{var o;return(o=wn(n,t,r))!==null&&o!==void 0?o:[]})}function Ms(e,t=[],r=[]){let n=e;const o=g=>{const p=[...n];for(;p.length>0;){const h=p.pop();if((h==null?void 0:h.module.name)===g)return!0;h!=null&&h.children&&p.push(...h.children)}return!1},l=(g,p)=>{if(g===""){n=[Y(p,n)];return}n=xe(n,g,h=>[Y(p,[h])])},i=(g,p)=>{n=xe(n,g,h=>[Y(h.module,[Y(p,h.children)])])},a=(g,p,h)=>{n=xe(n,g,v=>{var M;return[Y(v.module,[...h?[Y(p)]:[],...(M=v.children)!==null&&M!==void 0?M:[],...h?[]:[Y(p)]])]})},u=(g,p,h)=>{n=xe(n,g,v=>[...h?[Y(p)]:[],v,...h?[]:[Y(p)]])},d=g=>{i(on,g)},m=(g,p)=>{n=xe(n,g,h=>[Y(p,h.children)])},f=g=>{n=xe(n,g,p=>p.children)},x=g=>{r.push(g)};return t.forEach(g=>{g({contains:o,addParent:l,append:i,addChild:a,addSibling:u,addModule:d,replace:m,remove:f,augment:x})}),{config:n,augmentation:g=>r.reduce((p,h)=>h(p),g)}}const Cn=s.createContext(null),Ct=ie("useDocument","DocumentContext",Cn);function Ss({nodeRef:e,children:t}){const r=s.useMemo(()=>{const n=l=>{var i;return((i=l||e.current)===null||i===void 0?void 0:i.ownerDocument)||document};return{getOwnerDocument:n,getOwnerWindow:l=>{var i;return((i=n(l))===null||i===void 0?void 0:i.defaultView)||window}}},[e]);return s.createElement(Cn.Provider,{value:r},t)}const En=s.createContext(null),Ae=ie("useEvents","EventsContext",En);function _s({children:e}){const[t]=s.useState({});s.useEffect(()=>()=>{Object.keys(t).forEach(n=>delete t[n])},[t]);const r=s.useMemo(()=>{const n=(i,a)=>{var u;(u=t[i])===null||u===void 0||u.splice(0,t[i].length,...t[i].filter(d=>d!==a))};return{publish:(...[i,a])=>{var u;(u=t[i])===null||u===void 0||u.forEach(d=>d(a))},subscribe:(i,a)=>(t[i]||(t[i]=[]),t[i].push(a),()=>n(i,a)),unsubscribe:n}},[t]);return s.createElement(En.Provider,{value:r},e)}const Nn=s.createContext(null),q=ie("useLightboxProps","LightboxPropsContext",Nn);function Ts({children:e,...t}){return s.createElement(Nn.Provider,{value:t},e)}const yn=s.createContext(null),ae=ie("useLightboxState","LightboxStateContext",yn),Mn=s.createContext(null),js=ie("useLightboxDispatch","LightboxDispatchContext",Mn);function Is(e,t){switch(t.type){case"swipe":{const{slides:r}=e,n=(t==null?void 0:t.increment)||0,o=e.globalIndex+n,l=xn(o,r.length),i=Je(r,l),a=n||t.duration?{increment:n,duration:t.duration,easing:t.easing}:void 0;return{slides:r,currentIndex:l,globalIndex:o,currentSlide:i,animation:a}}case"update":return t.slides!==e.slides||t.index!==e.currentIndex?{slides:t.slides,currentIndex:t.index,globalIndex:t.index,currentSlide:Je(t.slides,t.index)}:e;default:throw new Error(gn)}}function Ps({slides:e,index:t,children:r}){const[n,o]=s.useReducer(Is,{slides:e,currentIndex:t,globalIndex:t,currentSlide:Je(e,t)});s.useEffect(()=>{o({type:"update",slides:e,index:t})},[e,t]);const l=s.useMemo(()=>({...n,state:n,dispatch:o}),[n,o]);return s.createElement(Mn.Provider,{value:o},s.createElement(yn.Provider,{value:l},r))}const Sn=s.createContext(null),Fe=ie("useTimeouts","TimeoutsContext",Sn);function Ls({children:e}){const[t]=s.useState([]);s.useEffect(()=>()=>{t.forEach(n=>window.clearTimeout(n)),t.splice(0,t.length)},[t]);const r=s.useMemo(()=>{const n=i=>{t.splice(0,t.length,...t.filter(a=>a!==i))};return{setTimeout:(i,a)=>{const u=window.setTimeout(()=>{n(u),i()},a);return t.push(u),u},clearTimeout:i=>{i!==void 0&&(n(i),window.clearTimeout(i))}}},[t]);return s.createElement(Sn.Provider,{value:r},e)}const Et=s.forwardRef(function({label:t,className:r,icon:n,renderIcon:o,onClick:l,style:i,...a},u){const{styles:d,labels:m}=q(),f=bs(m,t);return s.createElement("button",{ref:u,type:"button",title:f,"aria-label":f,className:te(R(vs),r),onClick:l,style:{...i,...d.button},...a},o?o():s.createElement(n,{className:R(qe),style:d.icon}))});function Os(e,t){const r=n=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"24",height:"24","aria-hidden":"true",focusable:"false",...n},t);return r.displayName=e,r}function ge(e,t){return Os(e,s.createElement("g",{fill:"currentColor"},s.createElement("path",{d:"M0 0h24v24H0z",fill:"none"}),t))}const ks=ge("Close",s.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),Rs=ge("Previous",s.createElement("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"})),Ds=ge("Next",s.createElement("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"})),As=ge("Loading",s.createElement(s.Fragment,null,Array.from({length:8}).map((e,t,r)=>s.createElement("line",{key:t,x1:"12",y1:"6.5",x2:"12",y2:"1.8",strokeLinecap:"round",strokeWidth:"2.6",stroke:"currentColor",strokeOpacity:1/r.length*(t+1),transform:`rotate(${360/r.length*t}, 12, 12)`})))),Fs=ge("Error",s.createElement("path",{d:"M21.9,21.9l-8.49-8.49l0,0L3.59,3.59l0,0L2.1,2.1L0.69,3.51L3,5.83V19c0,1.1,0.9,2,2,2h13.17l2.31,2.31L21.9,21.9z M5,18 l3.5-4.5l2.5,3.01L12.17,15l3,3H5z M21,18.17L5.83,3H19c1.1,0,2,0.9,2,2V18.17z"})),se=vt()?s.useLayoutEffect:s.useEffect;function Nt(){const[e,t]=s.useState(!1);return s.useEffect(()=>{var r,n;const o=(r=window.matchMedia)===null||r===void 0?void 0:r.call(window,"(prefers-reduced-motion: reduce)");t(o==null?void 0:o.matches);const l=i=>t(i.matches);return(n=o==null?void 0:o.addEventListener)===null||n===void 0||n.call(o,"change",l),()=>{var i;return(i=o==null?void 0:o.removeEventListener)===null||i===void 0?void 0:i.call(o,"change",l)}},[]),e}function Us(e){let t=0,r=0,n=0;const l=window.getComputedStyle(e).transform.match(/matrix.*\((.+)\)/);if(l){const i=l[1].split(",").map(De);i.length===6?(t=i[4],r=i[5]):i.length===16&&(t=i[12],r=i[13],n=i[14])}return{x:t,y:r,z:n}}function At(e,t){const r=s.useRef(),n=s.useRef(),o=Nt();return se(()=>{var l,i,a;if(e.current&&r.current!==void 0&&!o){const{keyframes:u,duration:d,easing:m,onfinish:f}=t(r.current,e.current.getBoundingClientRect(),Us(e.current))||{};if(u&&d){(l=n.current)===null||l===void 0||l.cancel(),n.current=void 0;try{n.current=(a=(i=e.current).animate)===null||a===void 0?void 0:a.call(i,u,{duration:d,easing:m})}catch(x){console.error(x)}n.current&&(n.current.onfinish=()=>{n.current=void 0,f==null||f()})}}r.current=void 0}),{prepareAnimation:l=>{r.current=l},isAnimationPlaying:()=>{var l;return((l=n.current)===null||l===void 0?void 0:l.playState)==="running"}}}function _n(){const e=s.useRef(null),t=s.useRef(),[r,n]=s.useState();return{setContainerRef:s.useCallback(l=>{e.current=l,t.current&&(t.current.disconnect(),t.current=void 0);const i=()=>{if(l){const a=window.getComputedStyle(l),u=d=>parseFloat(d)||0;n({width:Math.round(l.clientWidth-u(a.paddingLeft)-u(a.paddingRight)),height:Math.round(l.clientHeight-u(a.paddingTop)-u(a.paddingBottom))})}else n(void 0)};i(),l&&typeof ResizeObserver<"u"&&(t.current=new ResizeObserver(i),t.current.observe(l))},[]),containerRef:e,containerRect:r}}function Le(){const e=s.useRef(),{setTimeout:t,clearTimeout:r}=Fe();return s.useCallback((n,o)=>{r(e.current),e.current=t(n,o>0?o:0)},[t,r])}function W(e){const t=s.useRef(e);return se(()=>{t.current=e}),s.useCallback((...r)=>{var n;return(n=t.current)===null||n===void 0?void 0:n.call(t,...r)},[])}function Ft(e,t){typeof e=="function"?e(t):e&&(e.current=t)}function et(e,t){return s.useMemo(()=>e==null&&t==null?null:r=>{Ft(e,r),Ft(t,r)},[e,t])}function Ws(e,t=!1){const r=s.useRef();se(()=>{t&&r.current&&(r.current=!1,e())},[t,e]);const n=s.useCallback(()=>{r.current=!0},[]),o=s.useCallback(()=>{r.current=!1},[]);return{onFocus:n,onBlur:o}}function yt(){const[e,t]=s.useState(!1);return se(()=>{t(window.getComputedStyle(window.document.documentElement).direction==="rtl")},[]),e}function Bs(){const[e]=s.useState({}),t=s.useCallback((o,l)=>{var i;(i=e[o])===null||i===void 0||i.forEach(a=>{l.isPropagationStopped()||a(l)})},[e]),r=s.useMemo(()=>({onPointerDown:o=>t(an,o),onPointerMove:o=>t(un,o),onPointerUp:o=>t(dn,o),onPointerLeave:o=>t(fn,o),onPointerCancel:o=>t(hn,o),onKeyDown:o=>t(mt,o),onKeyUp:o=>t(ms,o),onWheel:o=>t(gt,o)}),[t]),n=s.useCallback((o,l)=>(e[o]||(e[o]=[]),e[o].unshift(l),()=>{const i=e[o];i&&i.splice(0,i.length,...i.filter(a=>a!==l))}),[e]);return{registerSensors:r,subscribeSensors:n}}function Ut(e,t){const r=s.useRef(0),n=Le(),o=W((...l)=>{r.current=Date.now(),e(l)});return s.useCallback((...l)=>{n(()=>{o(l)},t-(Date.now()-r.current))},[t,o,n])}const He=pt("slide"),Ke=pt("slide_image");function Re({slide:e,offset:t,render:r,rect:n,imageFit:o,imageProps:l,onClick:i,onLoad:a,onError:u,style:d}){var m,f,x,g,p,h,v;const[M,y]=s.useState(ze),{publish:L}=Ae(),{setTimeout:D}=Fe(),S=s.useRef(null);s.useEffect(()=>{t===0&&L(us(M))},[t,M,L]);const b=W(E=>{("decode"in E?E.decode():Promise.resolve()).catch(()=>{}).then(()=>{E.parentNode&&(y(Xe),D(()=>{a==null||a(E)},0))})}),I=s.useCallback(E=>{S.current=E,E!=null&&E.complete&&b(E)},[b]),A=s.useCallback(E=>{b(E.currentTarget)},[b]),T=W(()=>{y(Ye),u==null||u()}),j=wt(e,o),k=(E,U)=>Number.isFinite(E)?E:U,z=k(Math.max(...((f=(m=e.srcSet)===null||m===void 0?void 0:m.map(E=>E.width))!==null&&f!==void 0?f:[]).concat(e.width?[e.width]:[]).filter(Boolean)),((x=S.current)===null||x===void 0?void 0:x.naturalWidth)||0),B=k(Math.max(...((p=(g=e.srcSet)===null||g===void 0?void 0:g.map(E=>E.height))!==null&&p!==void 0?p:[]).concat(e.height?[e.height]:[]).filter(Boolean)),((h=S.current)===null||h===void 0?void 0:h.naturalHeight)||0),w=z&&B?{maxWidth:`min(${z}px, 100%)`,maxHeight:`min(${B}px, 100%)`}:{maxWidth:"100%",maxHeight:"100%"},P=(v=e.srcSet)===null||v===void 0?void 0:v.sort((E,U)=>E.width-U.width).map(E=>`${E.src} ${E.width}w`).join(", "),Z=()=>n&&!j&&e.width&&e.height?n.height/e.height*e.width:Number.MAX_VALUE,F=P&&n&&vt()?`${Math.round(Math.min(Z(),n.width))}px`:void 0,{style:_,className:O,...C}=l||{};return s.createElement(s.Fragment,null,s.createElement("img",{ref:I,onLoad:A,onError:T,onClick:i,draggable:!1,className:te(R(Ke()),j&&R(Ke("cover")),M!==Xe&&R(Ke("loading")),O),style:{...w,...d,..._},...C,alt:e.alt,sizes:F,srcSet:P,src:e.src}),M!==Xe&&s.createElement("div",{className:R(He(as))},M===ze&&(r!=null&&r.iconLoading?r.iconLoading():s.createElement(As,{className:te(R(qe),R(He(ze)))})),M===Ye&&(r!=null&&r.iconError?r.iconError():s.createElement(Fs,{className:te(R(qe),R(He(Ye)))}))))}const Zs=s.forwardRef(function({className:t,children:r,...n},o){const l=s.useRef(null);return s.createElement(Ss,{nodeRef:l},s.createElement("div",{ref:et(o,l),className:te(R("root"),t),...n},r))});var X;(function(e){e[e.NONE=0]="NONE",e[e.SWIPE=1]="SWIPE",e[e.PULL=2]="PULL",e[e.ANIMATION=3]="ANIMATION"})(X||(X={}));function Tn(e,t,r,n,o){s.useEffect(()=>o?()=>{}:xt(e(an,t),e(un,r),e(dn,n),e(fn,n),e(hn,n)),[e,t,r,n,o])}var J;(function(e){e[e.NONE=0]="NONE",e[e.SWIPE=1]="SWIPE",e[e.PULL=2]="PULL"})(J||(J={}));const Ge=30;function $s(e,t,r,n,o,l,i,a,u,d,m,f,x,g){const p=s.useRef(0),h=s.useRef([]),v=s.useRef(),M=s.useRef(0),y=s.useRef(J.NONE),L=s.useCallback(T=>{v.current===T.pointerId&&(v.current=void 0,y.current=J.NONE);const j=h.current;j.splice(0,j.length,...j.filter(k=>k.pointerId!==T.pointerId))},[]),D=s.useCallback(T=>{L(T),T.persist(),h.current.push(T)},[L]),S=W(T=>{D(T)}),b=(T,j)=>d&&T>j||u&&T<-j,I=W(T=>{if(h.current.find(j=>j.pointerId===T.pointerId)&&v.current===T.pointerId){const j=Date.now()-M.current,k=p.current;y.current===J.SWIPE?Math.abs(k)>.3*r||Math.abs(k)>5&&j<n?i(k,j):a(k):y.current===J.PULL&&(b(k,2*Ge)?x(k,j):g(k)),p.current=0,y.current=J.NONE}L(T)}),A=W(T=>{const j=h.current.find(k=>k.pointerId===T.pointerId);if(j){const k=v.current===T.pointerId;if(T.buttons===0){k&&p.current!==0?I(T):L(j);return}const z=T.clientX-j.clientX,B=T.clientY-j.clientY;if(v.current===void 0){const w=P=>{D(T),v.current=T.pointerId,M.current=Date.now(),y.current=P};Math.abs(z)>Math.abs(B)&&Math.abs(z)>Ge&&t(z)?(w(J.SWIPE),o()):Math.abs(B)>Math.abs(z)&&b(B,Ge)&&(w(J.PULL),m())}else k&&(y.current===J.SWIPE?(p.current=z,l(z)):y.current===J.PULL&&(p.current=B,f(B)))}});Tn(e,S,A,I)}function Vs({preventDefaultWheelX:e,preventDefaultWheelY:t}){const r=s.useRef(null),n=W(o=>{const l=Math.abs(o.deltaX)>Math.abs(o.deltaY);(l&&e||!l&&t||o.ctrlKey)&&o.preventDefault()});return s.useCallback(o=>{var l;o?o.addEventListener("wheel",n,{passive:!1}):(l=r.current)===null||l===void 0||l.removeEventListener("wheel",n),r.current=o},[n])}function zs(e,t,r,n,o,l,i,a,u){const d=s.useRef(0),m=s.useRef(0),f=s.useRef(),x=s.useRef(),g=s.useRef(0),p=s.useRef(0),{setTimeout:h,clearTimeout:v}=Fe(),M=s.useCallback(()=>{f.current&&(v(f.current),f.current=void 0)},[v]),y=s.useCallback(()=>{x.current&&(v(x.current),x.current=void 0)},[v]),L=W(()=>{e!==X.SWIPE&&(d.current=0,p.current=0,M(),y())});s.useEffect(L,[e,L]);const D=W(b=>{x.current=void 0,d.current===b&&u(d.current)}),S=W(b=>{if(!b.ctrlKey&&!(Math.abs(b.deltaY)>Math.abs(b.deltaX)))if(e===X.NONE){if(Math.abs(b.deltaX)<=1.2*Math.abs(g.current)){g.current=b.deltaX;return}if(!r(-b.deltaX))return;if(m.current+=b.deltaX,M(),Math.abs(m.current)>30)m.current=0,g.current=0,p.current=Date.now(),l();else{const I=m.current;f.current=h(()=>{f.current=void 0,I===m.current&&(m.current=0)},o)}}else if(e===X.SWIPE){let I=d.current-b.deltaX;if(I=Math.min(Math.abs(I),n)*Math.sign(I),d.current=I,i(I),y(),Math.abs(I)>.2*n){g.current=b.deltaX,a(I,Date.now()-p.current);return}x.current=h(()=>D(I),2*o)}else g.current=b.deltaX});s.useEffect(()=>t(gt,S),[t,S])}const Wt=pt("container"),jn=s.createContext(null),re=ie("useController","ControllerContext",jn);function Ys({children:e,...t}){var r;const{carousel:n,animation:o,controller:l,on:i,styles:a,render:u}=t,{closeOnPullUp:d,closeOnPullDown:m,preventDefaultWheelX:f,preventDefaultWheelY:x}=l,[g,p]=s.useState(),h=ae(),v=js(),[M,y]=s.useState(X.NONE),L=s.useRef(0),D=s.useRef(0),S=s.useRef(1),{registerSensors:b,subscribeSensors:I}=Bs(),{subscribe:A,publish:T}=Ae(),j=Le(),k=Le(),z=Le(),{containerRef:B,setContainerRef:w,containerRect:P}=_n(),Z=et(Vs({preventDefaultWheelX:f,preventDefaultWheelY:x}),w),F=s.useRef(null),_=et(F,void 0),{getOwnerDocument:O}=Ct(),C=yt(),E=N=>(C?-1:1)*(typeof N=="number"?N:1),U=W(()=>{var N;return(N=B.current)===null||N===void 0?void 0:N.focus()}),Ee=W(()=>t),le=W(()=>h),Ne=s.useCallback(N=>T(fe,N),[T]),je=s.useCallback(N=>T(he,N),[T]),ye=s.useCallback(()=>T(we),[T]),We=N=>!(n.finite&&(E(N)>0&&h.currentIndex===0||E(N)<0&&h.currentIndex===h.slides.length-1)),_t=N=>{var $;L.current=N,($=B.current)===null||$===void 0||$.style.setProperty(K("swipe_offset"),`${Math.round(N)}px`)},Be=N=>{var $,H;D.current=N,S.current=(()=>{const Se=m&&N>0?N:d&&N<0?-N:0;return Math.min(Math.max(bt(1-Se/60*(1-.5),2),.5),1)})(),($=B.current)===null||$===void 0||$.style.setProperty(K("pull_offset"),`${Math.round(N)}px`),(H=B.current)===null||H===void 0||H.style.setProperty(K("pull_opacity"),`${S.current}`)},{prepareAnimation:Rn}=At(F,(N,$,H)=>{if(F.current&&P)return{keyframes:[{transform:`translate(0, ${N.rect.y-$.y+H.y}px)`,opacity:N.opacity},{transform:"translate(0, 0)",opacity:1}],duration:N.duration,easing:o.easing.fade}}),Tt=(N,$)=>{if(d||m){Be(N);let H=0;F.current&&(H=o.fade*($?2:1),Rn({rect:F.current.getBoundingClientRect(),opacity:S.current,duration:H})),z(()=>{Be(0),y(X.NONE)},H),y(X.ANIMATION),$||ye()}},{prepareAnimation:Dn,isAnimationPlaying:An}=At(F,(N,$,H)=>{var Q;if(F.current&&P&&(!((Q=h.animation)===null||Q===void 0)&&Q.duration)){const G=ke(n.spacing),Se=(G.percent?G.percent*P.width/100:G.pixel)||0;return{keyframes:[{transform:`translate(${E(h.globalIndex-N.index)*(P.width+Se)+N.rect.x-$.x+H.x}px, 0)`},{transform:"translate(0, 0)"}],duration:h.animation.duration,easing:h.animation.easing}}}),Me=W(N=>{var $,H;const Q=N.offset||0,G=Q?o.swipe:($=o.navigation)!==null&&$!==void 0?$:o.swipe,Se=!Q&&!An()?o.easing.navigation:o.easing.swipe;let{direction:Ie}=N;const Pe=(H=N.count)!==null&&H!==void 0?H:1;let Ze=X.ANIMATION,ee=G*Pe;if(!Ie){const _e=P==null?void 0:P.width,Lt=N.duration||0,Ve=_e?G/_e*Math.abs(Q):G;Pe!==0?(Lt<Ve?ee=ee/Ve*Math.max(Lt,Ve/5):_e&&(ee=G/_e*(_e-Math.abs(Q))),Ie=E(Q)>0?fe:he):ee=G/2}let $e=0;Ie===fe?We(E(1))?$e=-Pe:(Ze=X.NONE,ee=G):Ie===he&&(We(E(-1))?$e=Pe:(Ze=X.NONE,ee=G)),ee=Math.round(ee),k(()=>{_t(0),y(X.NONE)},ee),F.current&&Dn({rect:F.current.getBoundingClientRect(),index:h.globalIndex}),y(Ze),T(Rt,{type:"swipe",increment:$e,duration:ee,easing:Se})});s.useEffect(()=>{var N,$;!((N=h.animation)===null||N===void 0)&&N.increment&&(!(($=h.animation)===null||$===void 0)&&$.duration)&&j(()=>v({type:"swipe",increment:0}),h.animation.duration)},[h.animation,v,j]);const jt=[I,We,(P==null?void 0:P.width)||0,o.swipe,()=>y(X.SWIPE),N=>_t(N),(N,$)=>Me({offset:N,duration:$,count:1}),N=>Me({offset:N,count:0})],Fn=[()=>{m&&y(X.PULL)},N=>Be(N),N=>Tt(N),N=>Tt(N,!0)];$s(...jt,d,m,...Fn),zs(M,...jt);const It=W(()=>{l.focus&&O().querySelector(`.${R(ft)} .${R(Wt())}`)&&U()});s.useEffect(It,[It]);const Pt=W(()=>{var N;(N=i.view)===null||N===void 0||N.call(i,{index:h.currentIndex})});s.useEffect(Pt,[h.globalIndex,Pt]),s.useEffect(()=>xt(A(fe,N=>Me({direction:fe,...N})),A(he,N=>Me({direction:he,...N})),A(Rt,N=>v(N))),[A,Me,v]);const Un=s.useMemo(()=>({prev:Ne,next:je,close:ye,focus:U,slideRect:P?ws(P,n.padding):{width:0,height:0},containerRect:P||{width:0,height:0},subscribeSensors:I,containerRef:B,setCarouselRef:_,toolbarWidth:g,setToolbarWidth:p}),[Ne,je,ye,U,I,P,B,_,g,p,n.padding]);return s.useImperativeHandle(l.ref,()=>({prev:Ne,next:je,close:ye,focus:U,getLightboxProps:Ee,getLightboxState:le}),[Ne,je,ye,U,Ee,le]),s.createElement("div",{ref:Z,className:te(R(Wt()),R(ht)),style:{...M===X.SWIPE?{[K("swipe_offset")]:`${Math.round(L.current)}px`}:null,...M===X.PULL?{[K("pull_offset")]:`${Math.round(D.current)}px`,[K("pull_opacity")]:`${S.current}`}:null,...l.touchAction!=="none"?{[K("controller_touch_action")]:l.touchAction}:null,...a.container},...l.aria?{role:"presentation","aria-live":"polite"}:null,tabIndex:-1,...b},P&&s.createElement(jn.Provider,{value:Un},e,(r=u.controls)===null||r===void 0?void 0:r.call(u)))}const Xs=ce(on,Ys);function ue(e){return Te(sn,e)}function Bt(e){return Te("slide",e)}function Hs({slide:e,offset:t}){const r=s.useRef(null),{currentIndex:n}=ae(),{slideRect:o,close:l}=re(),{render:i,carousel:{imageFit:a,imageProps:u},on:{click:d},controller:{closeOnBackdropClick:m},styles:{slide:f}}=q(),x=()=>{var p,h,v,M;let y=(p=i.slide)===null||p===void 0?void 0:p.call(i,{slide:e,offset:t,rect:o});return!y&&Ce(e)&&(y=s.createElement(Re,{slide:e,offset:t,render:i,rect:o,imageFit:a,imageProps:u,onClick:t===0?()=>d==null?void 0:d({index:n}):void 0})),y?s.createElement(s.Fragment,null,(h=i.slideHeader)===null||h===void 0?void 0:h.call(i,{slide:e}),((v=i.slideContainer)!==null&&v!==void 0?v:({children:L})=>L)({slide:e,children:y}),(M=i.slideFooter)===null||M===void 0?void 0:M.call(i,{slide:e})):null},g=p=>{const h=r.current,v=p.target instanceof HTMLElement?p.target:void 0;m&&v&&h&&(v===h||Array.from(h.children).find(M=>M===v)&&v.classList.contains(R(cn)))&&l()};return s.createElement("div",{ref:r,className:te(R(Bt()),t===0&&R(Bt("current")),R(ht)),"aria-hidden":t!==0,onClick:g,style:f},x())}function Ks(){const e=q().styles.slide;return s.createElement("div",{className:R("slide"),style:e})}function Gs({carousel:e}){const{slides:t,currentIndex:r,globalIndex:n}=ae(),{setCarouselRef:o}=re(),l=ke(e.spacing),i=ke(e.padding),a=ys(e,t,1),u=[];if(vn(t))for(let d=r-a;d<=r+a;d+=1){const m=bn(t,d),f=n-r+d,x=e.finite&&(d<0||d>t.length-1);u.push(x?{key:f}:{key:[`${f}`,Es(m)].filter(Boolean).join("|"),offset:d-r,slide:m})}return s.createElement("div",{ref:o,className:te(R(ue()),u.length>0&&R(ue("with_slides"))),style:{[`${K(ue("slides_count"))}`]:u.length,[`${K(ue("spacing_px"))}`]:l.pixel||0,[`${K(ue("spacing_percent"))}`]:l.percent||0,[`${K(ue("padding_px"))}`]:i.pixel||0,[`${K(ue("padding_percent"))}`]:i.percent||0}},u.map(({key:d,slide:m,offset:f})=>m?s.createElement(Hs,{key:d,slide:m,offset:f}):s.createElement(Ks,{key:d})))}const qs=ce(sn,Gs);function In(){const{carousel:e}=q(),{slides:t,currentIndex:r}=ae(),n=t.length===0||e.finite&&r===0,o=t.length===0||e.finite&&r===t.length-1;return{prevDisabled:n,nextDisabled:o}}function Js(e){var t;const r=yt(),{publish:n}=Ae(),{animation:o}=q(),{prevDisabled:l,nextDisabled:i}=In(),a=((t=o.navigation)!==null&&t!==void 0?t:o.swipe)/2,u=Ut(()=>n(fe),a),d=Ut(()=>n(he),a),m=W(f=>{switch(f.key){case gs:n(we);break;case ps:(r?i:l)||(r?d:u)();break;case xs:(r?l:i)||(r?u:d)();break}});s.useEffect(()=>e(mt,m),[e,m])}function Zt({label:e,icon:t,renderIcon:r,action:n,onClick:o,disabled:l,style:i}){return s.createElement(Et,{label:e,icon:t,renderIcon:r,className:R(`navigation_${n}`),disabled:l,onClick:o,style:i,...Ws(re().focus,l)})}function Qs({render:{buttonPrev:e,buttonNext:t,iconPrev:r,iconNext:n},styles:o}){const{prev:l,next:i,subscribeSensors:a}=re(),{prevDisabled:u,nextDisabled:d}=In();return Js(a),s.createElement(s.Fragment,null,e?e():s.createElement(Zt,{label:"Previous",action:fe,icon:Rs,renderIcon:r,style:o.navigationPrev,disabled:u,onClick:l}),t?t():s.createElement(Zt,{label:"Next",action:he,icon:Ds,renderIcon:n,style:o.navigationNext,disabled:d,onClick:i}))}const eo=ce(ls,Qs),$t=R(fs),to=R(ln);function no(e){return"style"in e}function Vt(e,t,r){const n=window.getComputedStyle(e),o=r?"padding-left":"padding-right",l=r?n.paddingLeft:n.paddingRight,i=e.style.getPropertyValue(o);return e.style.setProperty(o,`${(De(l)||0)+t}px`),()=>{i?e.style.setProperty(o,i):e.style.removeProperty(o)}}function so({noScroll:{disabled:e},children:t}){const r=yt(),{getOwnerDocument:n,getOwnerWindow:o}=Ct();return s.useEffect(()=>{if(e)return()=>{};const l=[],i=o(),{body:a,documentElement:u}=n(),d=Math.round(i.innerWidth-u.clientWidth);if(d>0){l.push(Vt(a,d,r));const m=a.getElementsByTagName("*");for(let f=0;f<m.length;f+=1){const x=m[f];no(x)&&i.getComputedStyle(x).getPropertyValue("position")==="fixed"&&!x.classList.contains(to)&&l.push(Vt(x,d,r))}}return a.classList.add($t),()=>{a.classList.remove($t),l.forEach(m=>m())}},[r,e,n,o]),s.createElement(s.Fragment,null,t)}const oo=ce(is,so);function zt(e){return Te(ft,e)}function Yt(e,t,r){const n=e.getAttribute(t);return e.setAttribute(t,r),()=>{n?e.setAttribute(t,n):e.removeAttribute(t)}}function ro({children:e,animation:t,styles:r,className:n,on:o,portal:l,close:i}){const[a,u]=s.useState(!1),[d,m]=s.useState(!1),f=s.useRef([]),x=s.useRef(null),{setTimeout:g}=Fe(),{subscribe:p}=Ae(),v=Nt()?0:t.fade;s.useEffect(()=>(u(!0),()=>{u(!1),m(!1)}),[]);const M=W(()=>{f.current.forEach(S=>S()),f.current=[]}),y=W(()=>{var S;m(!1),M(),(S=o.exiting)===null||S===void 0||S.call(o),g(()=>{var b;(b=o.exited)===null||b===void 0||b.call(o),i()},v)});s.useEffect(()=>p(we,y),[p,y]);const L=W(S=>{var b,I,A;S.scrollTop,m(!0),(b=o.entering)===null||b===void 0||b.call(o);const T=(A=(I=S.parentNode)===null||I===void 0?void 0:I.children)!==null&&A!==void 0?A:[];for(let j=0;j<T.length;j+=1){const k=T[j];["TEMPLATE","SCRIPT","STYLE"].indexOf(k.tagName)===-1&&k!==S&&(f.current.push(Yt(k,"inert","true")),f.current.push(Yt(k,"aria-hidden","true")))}f.current.push(()=>{var j,k;(k=(j=x.current)===null||j===void 0?void 0:j.focus)===null||k===void 0||k.call(j)}),g(()=>{var j;(j=o.entered)===null||j===void 0||j.call(o)},v)}),D=s.useCallback(S=>{S?L(S):M()},[L,M]);return a?$n.createPortal(s.createElement(Zs,{ref:D,className:te(n,R(zt()),R(ln),d&&R(zt("open"))),role:"presentation","aria-live":"polite",style:{...t.fade!==Qe.animation.fade?{[K("fade_animation_duration")]:`${v}ms`}:null,...t.easing.fade!==Qe.animation.easing.fade?{[K("fade_animation_timing_function")]:t.easing.fade}:null,...r.root},onFocus:S=>{x.current||(x.current=S.relatedTarget)}},e),l.root||document.body):null}const lo=ce(ft,ro);function io({children:e}){return s.createElement(s.Fragment,null,e)}const co=ce(cs,io);function ao(e){return Te(rn,e)}function uo({toolbar:{buttons:e},render:{buttonClose:t,iconClose:r},styles:n}){const{close:o,setToolbarWidth:l}=re(),{setContainerRef:i,containerRect:a}=_n();se(()=>{l(a==null?void 0:a.width)},[l,a==null?void 0:a.width]);const u=()=>t?t():s.createElement(Et,{key:we,label:"Close",icon:ks,renderIcon:r,onClick:o});return s.createElement("div",{ref:i,style:n.toolbar,className:R(ao())},e==null?void 0:e.map(d=>d===we?u():d))}const fo=ce(rn,uo);function Pn(e,t){var r;return s.createElement(e.module.component,{key:e.module.name,...t},(r=e.children)===null||r===void 0?void 0:r.map(n=>Pn(n,t)))}function ho(e,t={}){const{easing:r,...n}=e,{easing:o,...l}=t;return{easing:{...r,...o},...n,...l}}function Mt({carousel:e,animation:t,render:r,toolbar:n,controller:o,noScroll:l,on:i,plugins:a,slides:u,index:d,...m}){const{animation:f,carousel:x,render:g,toolbar:p,controller:h,noScroll:v,on:M,slides:y,index:L,plugins:D,...S}=Qe,{config:b,augmentation:I}=Ms([Y(lo,[Y(oo,[Y(Xs,[Y(qs),Y(fo),Y(eo)])])])],a||D),A=I({animation:ho(f,t),carousel:{...x,...e},render:{...g,...r},toolbar:{...p,...n},controller:{...h,...o},noScroll:{...v,...l},on:{...M,...i},...S,...m});return A.open?s.createElement(Ts,{...A},s.createElement(Ps,{slides:u||y,index:De(d||L)},s.createElement(Ls,null,s.createElement(_s,null,Pn(Y(co,b),A))))):null}const mo={maxZoomPixelRatio:1,zoomInMultiplier:2,doubleTapDelay:300,doubleClickDelay:500,doubleClickMaxStops:2,keyboardMoveDistance:50,wheelZoomDistanceFactor:100,pinchZoomDistanceFactor:100,scrollToZoom:!1},Ln=e=>({...mo,...e});function go(e,t,r,n){const o=s.useRef(),l=s.useRef(),{zoom:i}=q().animation,a=Nt(),u=W(()=>{var d,m,f;if((d=o.current)===null||d===void 0||d.cancel(),o.current=void 0,l.current&&(n!=null&&n.current)){try{o.current=(f=(m=n.current).animate)===null||f===void 0?void 0:f.call(m,[{transform:l.current},{transform:`scale(${e}) translateX(${t}px) translateY(${r}px)`}],{duration:a?0:i??500,easing:o.current?"ease-out":"ease-in-out"})}catch(x){console.error(x)}l.current=void 0,o.current&&(o.current.onfinish=()=>{o.current=void 0})}});return se(u,[e,t,r,u]),s.useCallback(()=>{l.current=n!=null&&n.current?window.getComputedStyle(n.current).transform:void 0},[n])}function po(e,t){const{on:r}=q(),n=W(()=>{var o;t||(o=r.zoom)===null||o===void 0||o.call(r,{zoom:e})});s.useEffect(n,[e,n])}function Ue(){const{zoom:e}=q();return Ln(e)}function xo(e,t){var r,n;let o={width:0,height:0},l={width:0,height:0};const{currentSlide:i}=ae(),{imageFit:a}=q().carousel,{maxZoomPixelRatio:u}=Ue();if(e&&i){const m={...i,...t};if(Ce(m)){const f=wt(m,a),x=Math.max(...(((r=m.srcSet)===null||r===void 0?void 0:r.map(p=>p.width))||[]).concat(m.width?[m.width]:[])),g=Math.max(...(((n=m.srcSet)===null||n===void 0?void 0:n.map(p=>p.height))||[]).concat(m.height?[m.height]:[]));x>0&&g>0&&e.width>0&&e.height>0&&(l=f?{width:Math.round(Math.min(x,e.width/e.height*g)),height:Math.round(Math.min(g,e.height/e.width*x))}:{width:x,height:g},l={width:l.width*u,height:l.height*u},o=f?{width:Math.min(e.width,l.width,x),height:Math.min(e.height,l.height,g)}:{width:Math.round(Math.min(e.width,e.height/g*x,x)),height:Math.round(Math.min(e.height,e.width/x*g,g))})}}const d=o.width?Math.max(bt(l.width/o.width,5),1):1;return{imageRect:o,maxZoom:d}}function Xt(e,t){return((e.clientX-t.clientX)**2+(e.clientY-t.clientY)**2)**.5}function Ht(e,t,r=100,n=2){return e*Math.min(1+Math.abs(t/r),n)**Math.sign(t)}function vo(e,t,r,n,o,l){const i=s.useRef([]),a=s.useRef(0),u=s.useRef(),{globalIndex:d}=ae(),{getOwnerWindow:m}=Ct(),{containerRef:f,subscribeSensors:x}=re(),{keyboardMoveDistance:g,zoomInMultiplier:p,wheelZoomDistanceFactor:h,scrollToZoom:v,doubleTapDelay:M,doubleClickDelay:y,doubleClickMaxStops:L,pinchZoomDistanceFactor:D}=Ue(),S=s.useCallback(w=>{if(f.current){const{pageX:P,pageY:Z}=w,{scrollX:F,scrollY:_}=m(),{left:O,top:C,width:E,height:U}=f.current.getBoundingClientRect();return[P-O-F-E/2,Z-C-_-U/2]}return[]},[f,m]),b=W(w=>{const P=()=>{w.preventDefault(),w.stopPropagation()};if(e>1){const _=(O,C)=>{P(),o(O,C)};w.key==="ArrowDown"?_(0,g):w.key==="ArrowUp"?_(0,-g):w.key==="ArrowLeft"?_(-g,0):w.key==="ArrowRight"&&_(g,0)}const Z=_=>{P(),n(_)},F=()=>w.getModifierState("Meta");w.key==="+"||w.key==="="&&F()?Z(e*p):w.key==="-"||w.key==="_"&&F()?Z(e/p):w.key==="0"&&F()&&Z(1)}),I=W(w=>{if((w.ctrlKey||v)&&Math.abs(w.deltaY)>Math.abs(w.deltaX)){w.stopPropagation(),n(Ht(e,-w.deltaY,h),!0,...S(w));return}e>1&&(w.stopPropagation(),v||o(w.deltaX,w.deltaY))}),A=s.useCallback(w=>{const P=i.current;P.splice(0,P.length,...P.filter(Z=>Z.pointerId!==w.pointerId))},[]),T=s.useCallback(w=>{A(w),w.persist(),i.current.push(w)},[A]),j=W(w=>{var P;const Z=i.current;if(w.pointerType==="mouse"&&w.buttons>1||!(!((P=l==null?void 0:l.current)===null||P===void 0)&&P.contains(w.target)))return;e>1&&w.stopPropagation();const{timeStamp:F}=w;Z.length===0&&F-a.current<(w.pointerType==="touch"?M:y)?(a.current=0,n(e!==t?e*Math.max(t**(1/L),p):1,!1,...S(w))):a.current=F,T(w),Z.length===2&&(u.current=Xt(Z[0],Z[1]))}),k=W(w=>{const P=i.current,Z=P.find(F=>F.pointerId===w.pointerId);if(P.length===2&&u.current){w.stopPropagation(),T(w);const F=Xt(P[0],P[1]),_=F-u.current;Math.abs(_)>0&&(n(Ht(e,_,D),!0,...P.map(O=>S(O)).reduce((O,C)=>C.map((E,U)=>O[U]+E/2))),u.current=F);return}e>1&&(w.stopPropagation(),Z&&(P.length===1&&o((Z.clientX-w.clientX)/e,(Z.clientY-w.clientY)/e),T(w)))}),z=s.useCallback(w=>{const P=i.current;P.length===2&&P.find(Z=>Z.pointerId===w.pointerId)&&(u.current=void 0),A(w)},[A]),B=s.useCallback(()=>{const w=i.current;w.splice(0,w.length),a.current=0,u.current=void 0},[]);Tn(x,j,k,z,r),s.useEffect(B,[d,B]),s.useEffect(()=>r?()=>{}:xt(B,x(mt,b),x(gt,I)),[r,x,B,b,I])}function bo(e,t,r){const[n,o]=s.useState(1),[l,i]=s.useState(0),[a,u]=s.useState(0),d=go(n,l,a,r),{currentSlide:m,globalIndex:f}=ae(),{containerRect:x,slideRect:g}=re(),{zoomInMultiplier:p}=Ue(),h=m&&Ce(m)?m.src:void 0,v=!h||!(r!=null&&r.current);se(()=>{o(1),i(0),u(0)},[f,h]);const M=s.useCallback((b,I,A)=>{const T=A||n,j=l-(b||0),k=a-(I||0),z=(e.width*T-g.width)/2/T,B=(e.height*T-g.height)/2/T;i(Math.min(Math.abs(j),Math.max(z,0))*Math.sign(j)),u(Math.min(Math.abs(k),Math.max(B,0))*Math.sign(k))},[n,l,a,g,e.width,e.height]),y=s.useCallback((b,I,A,T)=>{const j=bt(Math.min(Math.max(b+.001<t?b:t,1),t),5);j!==n&&(I||d(),M(A?A*(1/n-1/j):0,T?T*(1/n-1/j):0,j),o(j))},[n,t,M,d]),L=W(()=>{n>1&&(n>t&&y(t,!0),M())});se(L,[x.width,x.height,L]);const D=s.useCallback(()=>y(n*p),[n,p,y]),S=s.useCallback(()=>y(n/p),[n,p,y]);return{zoom:n,offsetX:l,offsetY:a,disabled:v,changeOffsets:M,changeZoom:y,zoomIn:D,zoomOut:S}}const On=s.createContext(null),St=ie("useZoom","ZoomControllerContext",On);function wo({children:e}){const[t,r]=s.useState(),{slideRect:n}=re(),{imageRect:o,maxZoom:l}=xo(n,t==null?void 0:t.imageDimensions),{zoom:i,offsetX:a,offsetY:u,disabled:d,changeZoom:m,changeOffsets:f,zoomIn:x,zoomOut:g}=bo(o,l,t==null?void 0:t.zoomWrapperRef);po(i,d),vo(i,l,d,m,f,t==null?void 0:t.zoomWrapperRef);const p=s.useMemo(()=>({zoom:i,maxZoom:l,offsetX:a,offsetY:u,disabled:d,zoomIn:x,zoomOut:g,changeZoom:m}),[i,l,a,u,d,x,g,m]);s.useImperativeHandle(Ue().ref,()=>p,[p]);const h=s.useMemo(()=>({...p,setZoomWrapper:r}),[p,r]);return s.createElement(On.Provider,{value:h},e)}const Co=ge("ZoomIn",s.createElement(s.Fragment,null,s.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),s.createElement("path",{d:"M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"}))),Eo=ge("ZoomOut",s.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14zM7 9h5v1H7z"})),Kt=s.forwardRef(function({zoomIn:t,onLoseFocus:r},n){const o=s.useRef(!1),l=s.useRef(!1),{zoom:i,maxZoom:a,zoomIn:u,zoomOut:d,disabled:m}=St(),{render:f}=q(),x=m||(t?i>=a:i<=1);return s.useEffect(()=>{x&&o.current&&l.current&&r(),x||(o.current=!0)},[x,r]),s.createElement(Et,{ref:n,disabled:x,label:t?"Zoom in":"Zoom out",icon:t?Co:Eo,renderIcon:t?f.iconZoomIn:f.iconZoomOut,onClick:t?u:d,onFocus:()=>{l.current=!0},onBlur:()=>{l.current=!1}})});function No(){const e=s.useRef(null),t=s.useRef(null),{focus:r}=re(),n=s.useCallback(i=>{var a,u;!((a=i.current)===null||a===void 0)&&a.disabled?r():(u=i.current)===null||u===void 0||u.focus()},[r]),o=s.useCallback(()=>n(e),[n]),l=s.useCallback(()=>n(t),[n]);return s.createElement(s.Fragment,null,s.createElement(Kt,{zoomIn:!0,ref:e,onLoseFocus:l}),s.createElement(Kt,{ref:t,onLoseFocus:o}))}function yo(){const{render:e}=q(),t=St();return e.buttonZoom?s.createElement(s.Fragment,null,e.buttonZoom(t)):s.createElement(No,null)}function Mo(e){var t;return(((t=e.srcSet)===null||t===void 0?void 0:t.length)||0)>0}function So({current:e,preload:t},{type:r,source:n}){switch(r){case"fetch":return e?{current:e,preload:n}:{current:n};case"done":return n===t?{current:n}:{current:e,preload:t};default:throw new Error(gn)}}function _o(e){var t,r;const[{current:n,preload:o},l]=s.useReducer(So,{}),{slide:i,rect:a,imageFit:u,render:d,interactive:m}=e,f=i.srcSet.sort((S,b)=>S.width-b.width),x=(t=i.width)!==null&&t!==void 0?t:f[f.length-1].width,g=(r=i.height)!==null&&r!==void 0?r:f[f.length-1].height,p=wt(i,u),h=Math.max(...f.map(S=>S.width)),v=Math.min((p?Math.max:Math.min)(a.width,x*(a.height/g)),h),M=Cs(),y=W(()=>{var S;const b=(S=f.find(I=>I.width>=v*M))!==null&&S!==void 0?S:f[f.length-1];(!n||f.findIndex(I=>I.src===n)<f.findIndex(I=>I===b))&&l({type:"fetch",source:b.src})});se(y,[a.width,a.height,M,y]);const L=W(S=>l({type:"done",source:S})),D={WebkitTransform:m?"initial":"translateZ(0)"};return p||Object.assign(D,a.width/a.height<x/g?{width:"100%",height:"auto"}:{width:"auto",height:"100%"}),s.createElement(s.Fragment,null,o&&o!==n&&s.createElement(Re,{key:"preload",...e,slide:{...i,src:o,srcSet:void 0},style:{position:"absolute",visibility:"hidden",...D},onLoad:()=>L(o),render:{...d,iconLoading:()=>null,iconError:()=>null}}),n&&s.createElement(Re,{key:"current",...e,slide:{...i,src:n,srcSet:void 0},style:D}))}function To({render:e,slide:t,offset:r,rect:n}){var o;const[l,i]=s.useState(),a=s.useRef(null),{zoom:u,maxZoom:d,offsetX:m,offsetY:f,setZoomWrapper:x}=St(),g=u>1,{carousel:p,on:h}=q(),{currentIndex:v}=ae();se(()=>r===0?(x({zoomWrapperRef:a,imageDimensions:l}),()=>x(void 0)):()=>{},[r,l,x]);let M=(o=e.slide)===null||o===void 0?void 0:o.call(e,{slide:t,offset:r,rect:n,zoom:u,maxZoom:d});if(!M&&Ce(t)){const y={slide:t,offset:r,rect:n,render:e,imageFit:p.imageFit,imageProps:p.imageProps,onClick:r===0?()=>{var L;return(L=h.click)===null||L===void 0?void 0:L.call(h,{index:v})}:void 0};M=Mo(t)?s.createElement(_o,{...y,slide:t,interactive:g,rect:r===0?{width:n.width*u,height:n.height*u}:n}):s.createElement(Re,{onLoad:L=>i({width:L.naturalWidth,height:L.naturalHeight}),...y})}return M?s.createElement("div",{ref:a,className:te(R(ds),R(ht),R(cn),g&&R(hs)),style:r===0?{transform:`scale(${u}) translateX(${m}px) translateY(${f}px)`}:void 0},M):null}const kn=({augment:e,addModule:t})=>{e(({zoom:r,toolbar:n,render:o,controller:l,...i})=>{const a=Ln(r);return{zoom:a,toolbar:Ns(n,kt,s.createElement(yo,null)),render:{...o,slide:u=>{var d;return Ce(u.slide)?s.createElement(To,{render:o,...u}):(d=o.slide)===null||d===void 0?void 0:d.call(o,u)}},controller:{...l,preventDefaultWheelY:a.scrollToZoom},...i}}),t(ce(kt,wo))},de=({title:e,children:t})=>{const[r,n]=s.useState(!1);return c.jsxs("div",{children:[c.jsx(V,{level:"2",weight:"2",className:"pl-6 text-[--tg-theme-hint-color]",children:e}),c.jsx(be,{multiline:r,onClick:()=>n(o=>!o),children:t})]})},jo=({taskId:e,closeModal:t})=>{var M,y,L,D,S;const r=it(),n=ne(Gt),o=ne(b=>qt(b,e)),[l,i]=s.useState(!1),[a,u]=s.useState(0),d=b=>{console.log("Open image fullscreen. Index: "+b),i(!0),u(b)},m=()=>{console.log("Close image fullscreen"),i(!1),u(0)},[f,x]=s.useState(!1),[g,p]=s.useState(!1),h=async b=>{o&&(b.preventDefault(),console.log("Clicked accept"),x(!0),setTimeout(()=>{console.log("Do something after 2 secs"),r(Ot({id:o.id,status:"active",userId:n.id})),x(!1),t()},2e3))},v=async b=>{o&&(b.preventDefault(),console.log("Clicked dismiss"),p(!0),await setTimeout(()=>{console.log("Do something after 5 secs"),r(Ot({id:o.id,status:"open",userId:""})),p(!1),t()},2e3))};return c.jsxs("div",{children:[c.jsxs(at,{className:"flex flex-col gap-2 h-full",children:[c.jsx(de,{title:"Title",children:o.title}),c.jsx(de,{title:"Description",children:o.desc}),c.jsx(de,{title:"Reward",children:o.reward}),o.attachments&&o.attachments.length>0&&c.jsx(de,{title:"Attachments",children:c.jsx("div",{className:"p-2 grid grid-flow-row grid-cols-3 gap-2",children:o.attachments.map((b,I)=>c.jsx(ut,{size:96,src:b,onClick:()=>d(I)},I+b))})}),c.jsx(de,{title:"Customer",children:o.customer}),c.jsx("div",{children:c.jsx(de,{title:"Address",children:(y=(M=o==null?void 0:o.location)==null?void 0:M.address)==null?void 0:y.formattedAdress})}),c.jsx("div",{children:c.jsx(de,{title:"On map",children:c.jsx(es,{available:o.location.available,type:"target",center:{latitude:Number((L=o.location.latLong)==null?void 0:L.latitude),longitude:Number((D=o.location.latLong)==null?void 0:D.longitude)}})})})]}),c.jsxs("div",{className:"w-full flex justify-around pb-8",children:[o.status==="open"&&c.jsx(oe,{className:"bg-green-600 w-2/6",onClick:h,loading:f,children:"Accept"}),o.status==="active"&&c.jsx(oe,{className:"bg-red-600 w-2/6",onClick:v,loading:g,children:"Decline"})]}),c.jsx(Mt,{open:l,controller:{closeOnPullDown:!0,closeOnBackdropClick:!0,closeOnPullUp:!0},close:m,index:a,plugins:[kn],slides:(S=o==null?void 0:o.attachments)==null?void 0:S.map(b=>({src:b}))})]})},Io=Jt.lazy(()=>Qt(()=>import("./GeolocationRequest-DnLnRJ7A.js").then(e=>e.c),__vite__mapDeps([0,1,2,3]),import.meta.url).then(({MapContainerYandex:e})=>({default:e}))),Po=({taskId:e,endEditing:t})=>{var _,O;const r=it(),n=ne(C=>qt(C,e)),[o,l]=s.useState(!1),[i,a]=s.useState(!1),[u,d]=s.useState((n==null?void 0:n.title)||""),[m,f]=s.useState((n==null?void 0:n.desc)||""),[x,g]=s.useState((n==null?void 0:n.reward.split(" ")[0])||""),[p,h]=s.useState(n==null?void 0:n.reward.split(" ")[1]),[v,M]=s.useState((n==null?void 0:n.attachments)||[]),[y,L]=s.useState((n==null?void 0:n.location)||{available:!1}),D=s.useCallback(()=>{var E,U;const C=JSON.parse(sessionStorage.getItem("edited-task-"+e)||"{}");try{d(C.title),f(C.desc),g(((E=C==null?void 0:C.reward)==null?void 0:E.split(" ")[0])||""),h((U=C==null?void 0:C.reward)==null?void 0:U.split(" ")[1]),M(C.attachments||[]),L(C.location)}catch{console.log("Cant parse saved task")}},[e]),S=s.useCallback(()=>{if(n)return{...n,title:u,desc:m,reward:x+" "+p,attachments:v,location:y}},[n,u,m,x,p,v,y]),[b,I]=s.useState(ne(C=>Oe(C,e)));s.useEffect(()=>{b&&(console.log("Restore edited task"),D())},[]),s.useEffect(()=>{u.trim()!==(n==null?void 0:n.title)||m.trim()!==n.desc||x.trim()!==n.reward.split(" ")[0]||(p||"").trim()!==n.reward.split(" ")[1]||v!==n.attachments||y!==n.location?(console.log("Changes made"),I(!0)):(console.log("No changes"),I(!1))},[n,u,m,x,p,v,y]),s.useEffect(()=>{b?(console.log("Add edited task to session storage"),sessionStorage.setItem("edited-task-"+e,JSON.stringify(S())),console.log("Add edited task in changes state"),r(Vn(e))):(console.log("Remove edited task from session storage"),sessionStorage.removeItem("edited-task-"+e),console.log("Remove edited task from changes state"),r(zn(e))),i&&t()},[e,b,r,S,i,t]);const A=C=>{const E=C.currentTarget.files;if(E&&(E==null?void 0:E.length)>0){const U=[];for(let le=0;le<E.length;le++)U.push(URL.createObjectURL(E[le]));M([...v||[],...U])}},T=C=>{const E=[...v];E.splice(C,1),M(E)},j=()=>{const C=document.getElementsByTagName("input");for(let U=0;U<C.length;U++)C[U].blur();if(u.trim().length===0||m.trim().length===0||x.length===0||(p||"")===""||!y.available)return l(!0);const E=S();E&&(r(Yn(E)),I(!1),a(!0))},k=()=>{I(!1),a(!0)},[z,B]=s.useState(!1),[w,P]=s.useState(0),Z=C=>{console.log("Open image fullscreen. Index: "+C),B(!0),P(C)},F=()=>{B(!1),P(0)};return c.jsxs("div",{children:[c.jsxs("div",{children:[b&&c.jsx("div",{className:"bg-yellow-400 text-center rounded-lg mb-1",children:"You have uncommited changes!!!"}),c.jsxs(at,{className:"flex flex-col gap-2 h-full",children:[c.jsxs("div",{children:[c.jsxs(V,{level:"2",weight:"2",className:"pl-6 text-[--tg-theme-hint-color]",children:["Title",c.jsx("span",{className:"text-red-600",children:"*"})]}),c.jsx(ve,{value:u,status:u.length===0&&o?"error":"default",placeholder:"Title...",onChange:C=>{const E=C.currentTarget.value;d(E)}}),c.jsx(V,{className:"pl-8 text-red-400",hidden:!(u.length===0&&o),children:"This field cant be empty"})]}),c.jsxs("div",{children:[c.jsxs(V,{level:"2",weight:"2",className:"pl-6 text-[--tg-theme-hint-color]",children:["Description",c.jsx("span",{className:"text-red-600",children:"*"})]}),c.jsx(ve,{placeholder:"Description...",value:m,status:m.length===0&&o?"error":"default",onChange:C=>f(C.currentTarget.value)}),c.jsx(V,{className:"pl-8 text-red-400",hidden:!(m.length===0&&o),children:"This field cant be empty"})]}),c.jsxs("div",{children:[c.jsxs(V,{level:"2",weight:"2",className:"pl-6 text-[--tg-theme-hint-color]",children:["Reward",c.jsx("span",{className:"text-red-600",children:"*"})]}),c.jsxs("div",{className:"flex items-center justify-stretch h-fit",children:[c.jsxs("div",{className:"w-2/5 h-full flex flex-col justify-between",children:[c.jsx(ve,{placeholder:"Cost...",inputMode:"numeric",type:"number",status:x.length===0&&o?"error":"default",value:x||"",onChange:C=>{g(C.currentTarget.value)}}),c.jsx(V,{className:"pl-8 text-red-400",hidden:!(x.length===0&&o),children:"This field cant be empty"})]}),c.jsxs("div",{className:"w-3/5 flex flex-col h-full justify-between",children:[c.jsxs(dt,{className:"h-12 items-center",children:[c.jsx(me,{onClick:()=>h("TON"),mode:p==="TON"?"bezeled":"plain",children:"TON"}),c.jsx(me,{onClick:()=>h("USDT"),mode:p==="USDT"?"bezeled":"plain",children:"USDT"}),c.jsx(me,{onClick:()=>h("BTC"),mode:p==="BTC"?"bezeled":"plain",children:"BTC"})]}),c.jsx(V,{className:"pl-8 text-red-400",hidden:!((p||"")===""&&o),children:"Please select currency"})]})]})]}),c.jsxs("div",{children:[c.jsx(V,{level:"2",weight:"2",className:"pl-6 text-[--tg-theme-hint-color]",children:"Attachments"}),c.jsx("div",{className:"p-2 grid grid-flow-row grid-cols-4 gap-2",children:v.map((C,E)=>c.jsxs("div",{className:"relative",children:[c.jsx(ut,{size:96,className:"w-full",src:C,onClick:()=>Z(E)}),c.jsx(ct,{className:"absolute right-0 -top-2 w-6 h-6 border border-gray-500 rounded-full bg-gray-400 bg-opacity-55",onClick:()=>T(E)})]},E+"/"+C))}),v&&v.length>0&&v.map((C,E)=>c.jsx(be,{className:"pl-6",after:c.jsx(oe,{mode:"plain",onClick:()=>T(E),children:"X"}),children:c.jsx(lt,{children:C})},E+C)),c.jsx(tn,{multiple:!0,label:"Attach a new file",accept:"image/*",onChange:A})]}),c.jsxs("div",{children:[c.jsxs(V,{level:"2",weight:"2",className:"pl-6 text-[--tg-theme-hint-color]",children:["Address",c.jsx("span",{className:"text-red-600",children:"*"})]}),c.jsxs("div",{className:"overflow-visible",children:[c.jsx(en,{status:!y.available&&o?"error":"default",geoposition:y||{available:!1},setGeoposition:C=>L(C)}),c.jsx(V,{className:"pl-8 text-red-400",hidden:!(!y.available&&o),children:"Oops..."})]})]}),c.jsxs("div",{children:[c.jsx(V,{level:"2",weight:"2",className:"pl-6 text-[--tg-theme-hint-color]",children:"On map"}),c.jsx(be,{children:c.jsx(Io,{available:y.available,type:"target",center:{latitude:Number((_=y.latLong)==null?void 0:_.latitude),longitude:Number((O=y.latLong)==null?void 0:O.longitude)}})})]})]})]}),c.jsx("div",{className:"sticky bottom-0 pt-8",children:c.jsxs("div",{className:"flex flex-row justify-center items-center",children:[c.jsx(oe,{className:"bg-green-400 w-full",onClick:j,children:"Save"}),c.jsx(oe,{className:"bg-red-400 w-full",onClick:k,children:"Cancel"})]})}),c.jsx(Mt,{open:z,close:F,controller:{closeOnPullDown:!0,closeOnBackdropClick:!0,closeOnPullUp:!0},index:w,slides:v.map(C=>({src:C}))})]})},Lo=Jt.lazy(()=>Qt(()=>import("./GeolocationRequest-DnLnRJ7A.js").then(e=>e.c),__vite__mapDeps([0,1,2,3]),import.meta.url).then(({MapContainerYandex:e})=>({default:e}))),Oo=({closeModal:e})=>{var Z,F;const t=ne(Gt),r=it(),[n,o]=s.useState(!1),[l,i]=s.useState(""),[a,u]=s.useState(""),[d,m]=s.useState(""),[f,x]=s.useState(),[g,p]=s.useState([]),[h,v]=s.useState({available:!1}),M=s.useMemo(()=>t.id,[t]),y=()=>{var O,C;const _=JSON.parse(sessionStorage.getItem("saved-task")||"{}");try{i(_.title),u(_.desc),m(((O=_==null?void 0:_.reward)==null?void 0:O.split(" ")[0])||""),x((C=_==null?void 0:_.reward)==null?void 0:C.split(" ")[1]),p(_.attachments||[]),v(_.location)}catch{console.log("Cant parse saved task")}},L=s.useCallback((_,O,C,E,U,Ee,le)=>({id:Date.now().toString(),title:_,desc:O,reward:C+" "+E,attachments:U,location:Ee,customer:le,status:"open"}),[]),[D,S]=s.useState(ne(Xn));s.useEffect(()=>{D&&(console.log("Restore created task"),y())},[D]),s.useEffect(()=>{l.trim()!==""||a.trim()!==""||d.trim()!==""||(f||"").trim()!==""||g.length>0||h.available?(console.log("Changes made"),S(!0),sessionStorage.setItem("saved-task",JSON.stringify(L(l,a,d,f||"TON",g,h,M)))):(S(!1),sessionStorage.removeItem("saved-task"))},[l,a,d,f,g,h,M,L]),s.useEffect(()=>{console.log("Update changes store"),r(Hn(D))},[D,r]);const b=_=>{const O=_.currentTarget.files;if(O&&(O==null?void 0:O.length)>0){const C=[];for(let U=0;U<O.length;U++)C.push(URL.createObjectURL(O[U]));p([...g||[],...C])}},I=_=>{const O=[...g];O.splice(_,1),p(O)},A=()=>{const _=document.getElementsByTagName("input");for(let C=0;C<_.length;C++)_[C].blur();if(l.trim().length===0||a.trim().length===0||d.length===0||(f||"")===""||!h.available)return o(!0);const O=L(l,a,d,f||"TON",g,h,M);r(Kn(O)),S(!1),sessionStorage.removeItem("created-task"),e()},T=()=>{S(!1),sessionStorage.removeItem("saved-task"),e()},[j,k]=s.useState(!1),[z,B]=s.useState(0),w=_=>{console.log("Open image fullscreen. Index: "+_),k(!0),B(_)},P=()=>{console.log("Close image fullscreen"),k(!1),B(0)};return c.jsxs("div",{children:[c.jsxs("div",{children:[D&&c.jsx("div",{className:"bg-yellow-400 text-center rounded-lg mb-1",children:"You have uncommited changes!!!"}),c.jsxs(at,{className:"flex flex-col gap-2 h-full",children:[c.jsxs("div",{children:[c.jsxs(V,{level:"2",weight:"2",className:"pl-6 text-[--tg-theme-hint-color]",children:["Title",c.jsx("span",{className:"text-red-600",children:"*"})]}),c.jsx(ve,{value:l,status:l.length===0&&n?"error":"default",placeholder:"Title...",onChange:_=>{const O=_.currentTarget.value;i(O)}}),c.jsx(V,{className:"pl-8 text-red-400",hidden:!(a.length===0&&n),children:"This field is required"})]}),c.jsxs("div",{children:[c.jsxs(V,{level:"2",weight:"2",className:"pl-6 text-[--tg-theme-hint-color]",children:["Description",c.jsx("span",{className:"text-red-600",children:"*"})]}),c.jsx(ve,{placeholder:"Description...",value:a,status:a.length===0&&n?"error":"default",onChange:_=>u(_.currentTarget.value)}),c.jsx(V,{className:"pl-8 text-red-400",hidden:!(a.length===0&&n),children:"This field is required"})]}),c.jsxs("div",{children:[c.jsxs(V,{level:"2",weight:"2",className:"pl-6 text-[--tg-theme-hint-color]",children:["Reward",c.jsx("span",{className:"text-red-600",children:"*"})]}),c.jsxs("div",{className:"flex items-center justify-stretch h-fit",children:[c.jsxs("div",{className:"w-2/5 h-full flex flex-col justify-between",children:[c.jsx(ve,{placeholder:"Cost...",inputMode:"numeric",type:"number",status:d.length===0&&n?"error":"default",value:d||"",onChange:_=>{m(_.currentTarget.value)}}),c.jsx(V,{className:"pl-8 text-red-400",hidden:!(d.length===0&&n),children:"This field is required"})]}),c.jsxs("div",{className:"w-3/5 flex flex-col h-full justify-between",children:[c.jsxs(dt,{className:"h-12 items-center",children:[c.jsx(me,{onClick:()=>x("TON"),mode:f==="TON"?"bezeled":"plain",children:"TON"}),c.jsx(me,{onClick:()=>x("USDT"),mode:f==="USDT"?"bezeled":"plain",children:"USDT"}),c.jsx(me,{onClick:()=>x("BTC"),mode:f==="BTC"?"bezeled":"plain",children:"BTC"})]}),c.jsx(V,{className:"pl-8 text-red-400",hidden:!((f||"")===""&&n),children:"Please select currency"})]})]})]}),c.jsxs("div",{children:[c.jsx(V,{level:"2",weight:"2",className:"pl-6 text-[--tg-theme-hint-color]",children:"Attachments"}),c.jsx("div",{className:"p-2 grid grid-flow-row grid-cols-4 gap-2",children:g.map((_,O)=>c.jsxs("div",{className:"relative",children:[c.jsx(ut,{size:96,className:"w-full",src:_,onClick:()=>w(O)}),c.jsx(ct,{className:"absolute right-0 -top-2 w-6 h-6 border border-gray-500 rounded-full bg-gray-400 bg-opacity-55",onClick:()=>I(O)})]},O+"/"+_))}),g&&g.length>0&&g.map((_,O)=>c.jsx(be,{className:"pl-6",after:c.jsx(oe,{mode:"plain",onClick:()=>I(O),children:"X"}),children:c.jsx(lt,{children:_})},O+_)),c.jsx(tn,{multiple:!0,label:"Attach a new file",accept:"image/*",onChange:b})]}),c.jsxs("div",{children:[c.jsxs(V,{level:"2",weight:"2",className:"pl-6 text-[--tg-theme-hint-color]",children:["Address",c.jsx("span",{className:"text-red-600",children:"*"})]}),c.jsxs("div",{className:"overflow-visible",children:[c.jsx(en,{status:!h.available&&n?"error":"default",geoposition:h||{available:!1},setGeoposition:_=>v(_)}),c.jsx(V,{className:"pl-8 text-red-400",hidden:!(a.length===0&&n),children:"This field is required"})]})]}),c.jsxs("div",{children:[c.jsx(V,{level:"2",weight:"2",className:"pl-6 text-[--tg-theme-hint-color]",children:"On map"}),c.jsx(be,{children:c.jsx(Lo,{available:h.available,type:"target",center:{latitude:Number(((Z=h.latLong)==null?void 0:Z.latitude)||52.518073),longitude:Number(((F=h.latLong)==null?void 0:F.longitude)||13.376139)}})})]})]})]}),c.jsx("div",{className:"sticky bottom-0 pt-8",children:c.jsxs("div",{className:"flex flex-row justify-center items-center",children:[c.jsx(oe,{className:"bg-green-400 w-full",onClick:A,children:"Create"}),c.jsx(oe,{className:"bg-red-400 w-full",onClick:T,children:"Cancel"})]})}),c.jsx(Mt,{open:j,close:P,controller:{closeOnPullDown:!0,closeOnBackdropClick:!0,closeOnPullUp:!0},index:z,plugins:[kn],slides:g==null?void 0:g.map(_=>({src:_}))})]})},Uo=({task:e,mode:t})=>{const r=ne(Gn),n=ne(x=>Oe(x,e.id)),[o,l]=s.useState(!1),[i,a]=s.useState(!1),u=()=>{l(!0),console.log("Modal opened")},d=()=>{a(!0)},[m,f]=s.useState();return s.useEffect(()=>{var x;f(rs((x=e.location)==null?void 0:x.latLong,r.latLong))},[r,e]),c.jsxs(c.Fragment,{children:[c.jsx(be,{before:c.jsx(ts,{children:"CS"}),id:e.id,className:"w-full select-none",multiline:!1,description:e.desc,after:c.jsx("span",{children:e.reward}),titleBadge:n?c.jsx(qn,{className:"bg-yellow-600",mode:"critical",type:"number",children:"!"}):c.jsx(c.Fragment,{}),subhead:m+" km",onClick:u,children:e.title}),o&&c.jsx(os,{openModal:o,setOpenModal:l,closeModal:d,hidingModal:i,setHidingModal:a,children:c.jsx(ko,{taskId:e.id,closeModal:d,mode:t})})]})},ko=({taskId:e="-1",closeModal:t,mode:r})=>{const[n,o]=s.useState(ne(d=>Oe(d,e))),l=ne(d=>Oe(d,e)),[i,a]=s.useState(!1),u=()=>{l&&a(!0),l||o(d=>!d)};return e?c.jsxs("div",{className:"flex flex-col gap-1",children:[c.jsxs("div",{className:"p-2 flex align-middle items-center justify-between w-full",children:[c.jsx(Qn,{className:"text-center",children:"Task details"}),r==="edit"&&c.jsx(oe,{mode:"plain",onClick:u,className:i?"animate-jiggle text-red-400":"",onAnimationEnd:()=>{a(!1)},children:"Edit"})]}),r!=="create"&&!n&&c.jsx("div",{children:c.jsx(jo,{taskId:e,closeModal:t})}),r!=="create"&&n&&c.jsx("div",{children:c.jsx(Po,{taskId:e,endEditing:()=>o(!1)})}),r==="create"&&c.jsx(Oo,{closeModal:t})]}):c.jsx(Jn,{children:"No passed task id"})};export{ss as M,os as P,ko as T,Uo as a};
