const __vite__fileDeps=["./MapPage-qlvlQRiz.js","./index-EUgHcaMA.js","./index-DMKUZa9E.css","./GeolocationRequest-DFycX8jb.js","./Input-C6oaYfj_.js","./TasksList-B6CszJE8.js","./TaskCard-Dld9mNO4.js","./FileInput-D8bHZj0N.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{k as pt,r as w,l as Xe,j as f,m as J,n as q,o as we,p as de,q as xt,v as wt,C as Z,c as ee,s as Ze,b as vt,w as Je,x as yt,T as Te,y as bt,z as Rt,R as Ke,_ as Qe,A as Ct,h as Tt,d as At,B as jt}from"./index-EUgHcaMA.js";import{S as et,a as re,b as kt,M as Ot,G as St,F as Le}from"./GeolocationRequest-DFycX8jb.js";import{M as De,a as Fe,T as Et}from"./TaskCard-Dld9mNO4.js";import{L as Nt,I as be,C as Ae,B as Re,S as Pt}from"./Input-C6oaYfj_.js";import{F as Mt}from"./FileInput-D8bHZj0N.js";function se(e){return tt(e)?(e.nodeName||"").toLowerCase():"#document"}function I(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function G(e){var t;return(t=(tt(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function tt(e){return e instanceof Node||e instanceof I(e).Node}function V(e){return e instanceof Element||e instanceof I(e).Element}function z(e){return e instanceof HTMLElement||e instanceof I(e).HTMLElement}function _e(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof I(e).ShadowRoot}function ce(e){const{overflow:t,overflowX:s,overflowY:n,display:o}=$(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+s)&&!["inline","contents"].includes(o)}function Lt(e){return["table","td","th"].includes(se(e))}function ke(e){const t=Oe(),s=$(e);return s.transform!=="none"||s.perspective!=="none"||(s.containerType?s.containerType!=="normal":!1)||!t&&(s.backdropFilter?s.backdropFilter!=="none":!1)||!t&&(s.filter?s.filter!=="none":!1)||["transform","perspective","filter"].some(n=>(s.willChange||"").includes(n))||["paint","layout","strict","content"].some(n=>(s.contain||"").includes(n))}function Dt(e){let t=Y(e);for(;z(t)&&!ne(t);){if(ke(t))return t;t=Y(t)}return null}function Oe(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function ne(e){return["html","body","#document"].includes(se(e))}function $(e){return I(e).getComputedStyle(e)}function ve(e){return V(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Y(e){if(se(e)==="html")return e;const t=e.assignedSlot||e.parentNode||_e(e)&&e.host||G(e);return _e(t)?t.host:t}function nt(e){const t=Y(e);return ne(t)?e.ownerDocument?e.ownerDocument.body:e.body:z(t)&&ce(t)?t:nt(t)}function le(e,t,s){var n;t===void 0&&(t=[]),s===void 0&&(s=!0);const o=nt(e),r=o===((n=e.ownerDocument)==null?void 0:n.body),i=I(o);return r?t.concat(i,i.visualViewport||[],ce(o)?o:[],i.frameElement&&s?le(i.frameElement):[]):t.concat(o,le(o,[],s))}const Ft=({children:e})=>{const{portalContainer:t}=pt();return t!=null&&t.current?Xe.createPortal(e,t.current):w.isValidElement(e)?e:null},_t=["top","right","bottom","left"],Be=["start","end"],Ie=_t.reduce((e,t)=>e.concat(t,t+"-"+Be[0],t+"-"+Be[1]),[]),H=Math.min,B=Math.max,me=Math.round,fe=Math.floor,X=e=>({x:e,y:e}),Bt={left:"right",right:"left",bottom:"top",top:"bottom"},It={start:"end",end:"start"};function je(e,t,s){return B(e,H(t,s))}function Q(e,t){return typeof e=="function"?e(t):e}function U(e){return e.split("-")[0]}function W(e){return e.split("-")[1]}function st(e){return e==="x"?"y":"x"}function Se(e){return e==="y"?"height":"width"}function ae(e){return["top","bottom"].includes(U(e))?"y":"x"}function Ee(e){return st(ae(e))}function ot(e,t,s){s===void 0&&(s=!1);const n=W(e),o=Ee(e),r=Se(o);let i=o==="x"?n===(s?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[r]>t.floating[r]&&(i=ge(i)),[i,ge(i)]}function Wt(e){const t=ge(e);return[he(e),t,he(t)]}function he(e){return e.replace(/start|end/g,t=>It[t])}function zt(e,t,s){const n=["left","right"],o=["right","left"],r=["top","bottom"],i=["bottom","top"];switch(e){case"top":case"bottom":return s?t?o:n:t?n:o;case"left":case"right":return t?r:i;default:return[]}}function $t(e,t,s,n){const o=W(e);let r=zt(U(e),s==="start",n);return o&&(r=r.map(i=>i+"-"+o),t&&(r=r.concat(r.map(he)))),r}function ge(e){return e.replace(/left|right|bottom|top/g,t=>Bt[t])}function Ht(e){return{top:0,right:0,bottom:0,left:0,...e}}function it(e){return typeof e!="number"?Ht(e):{top:e,right:e,bottom:e,left:e}}function pe(e){const{x:t,y:s,width:n,height:o}=e;return{width:n,height:o,top:s,left:t,right:t+n,bottom:s+o,x:t,y:s}}function We(e,t,s){let{reference:n,floating:o}=e;const r=ae(t),i=Ee(t),c=Se(i),l=U(t),a=r==="y",u=n.x+n.width/2-o.width/2,m=n.y+n.height/2-o.height/2,h=n[c]/2-o[c]/2;let d;switch(l){case"top":d={x:u,y:n.y-o.height};break;case"bottom":d={x:u,y:n.y+n.height};break;case"right":d={x:n.x+n.width,y:m};break;case"left":d={x:n.x-o.width,y:m};break;default:d={x:n.x,y:n.y}}switch(W(t)){case"start":d[i]-=h*(s&&a?-1:1);break;case"end":d[i]+=h*(s&&a?-1:1);break}return d}const Vt=async(e,t,s)=>{const{placement:n="bottom",strategy:o="absolute",middleware:r=[],platform:i}=s,c=r.filter(Boolean),l=await(i.isRTL==null?void 0:i.isRTL(t));let a=await i.getElementRects({reference:e,floating:t,strategy:o}),{x:u,y:m}=We(a,n,l),h=n,d={},v=0;for(let p=0;p<c.length;p++){const{name:y,fn:g}=c[p],{x:b,y:T,data:R,reset:C}=await g({x:u,y:m,initialPlacement:n,placement:h,strategy:o,middlewareData:d,rects:a,platform:i,elements:{reference:e,floating:t}});u=b??u,m=T??m,d={...d,[y]:{...d[y],...R}},C&&v<=50&&(v++,typeof C=="object"&&(C.placement&&(h=C.placement),C.rects&&(a=C.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:o}):C.rects),{x:u,y:m}=We(a,h,l)),p=-1)}return{x:u,y:m,placement:h,strategy:o,middlewareData:d}};async function ye(e,t){var s;t===void 0&&(t={});const{x:n,y:o,platform:r,rects:i,elements:c,strategy:l}=e,{boundary:a="clippingAncestors",rootBoundary:u="viewport",elementContext:m="floating",altBoundary:h=!1,padding:d=0}=Q(t,e),v=it(d),y=c[h?m==="floating"?"reference":"floating":m],g=pe(await r.getClippingRect({element:(s=await(r.isElement==null?void 0:r.isElement(y)))==null||s?y:y.contextElement||await(r.getDocumentElement==null?void 0:r.getDocumentElement(c.floating)),boundary:a,rootBoundary:u,strategy:l})),b=m==="floating"?{x:n,y:o,width:i.floating.width,height:i.floating.height}:i.reference,T=await(r.getOffsetParent==null?void 0:r.getOffsetParent(c.floating)),R=await(r.isElement==null?void 0:r.isElement(T))?await(r.getScale==null?void 0:r.getScale(T))||{x:1,y:1}:{x:1,y:1},C=pe(r.convertOffsetParentRelativeRectToViewportRelativeRect?await r.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:b,offsetParent:T,strategy:l}):b);return{top:(g.top-C.top+v.top)/R.y,bottom:(C.bottom-g.bottom+v.bottom)/R.y,left:(g.left-C.left+v.left)/R.x,right:(C.right-g.right+v.right)/R.x}}const Ut=e=>({name:"arrow",options:e,async fn(t){const{x:s,y:n,placement:o,rects:r,platform:i,elements:c,middlewareData:l}=t,{element:a,padding:u=0}=Q(e,t)||{};if(a==null)return{};const m=it(u),h={x:s,y:n},d=Ee(o),v=Se(d),p=await i.getDimensions(a),y=d==="y",g=y?"top":"left",b=y?"bottom":"right",T=y?"clientHeight":"clientWidth",R=r.reference[v]+r.reference[d]-h[d]-r.floating[v],C=h[d]-r.reference[d],A=await(i.getOffsetParent==null?void 0:i.getOffsetParent(a));let O=A?A[T]:0;(!O||!await(i.isElement==null?void 0:i.isElement(A)))&&(O=c.floating[T]||r.floating[v]);const N=R/2-C/2,P=O/2-p[v]/2-1,k=H(m[g],P),j=H(m[b],P),S=k,L=O-p[v]-j,D=O/2-p[v]/2+N,M=je(S,D,L),F=!l.arrow&&W(o)!=null&&D!==M&&r.reference[v]/2-(D<S?k:j)-p[v]/2<0,x=F?D<S?D-S:D-L:0;return{[d]:h[d]+x,data:{[d]:M,centerOffset:D-M-x,...F&&{alignmentOffset:x}},reset:F}}});function qt(e,t,s){return(e?[...s.filter(o=>W(o)===e),...s.filter(o=>W(o)!==e)]:s.filter(o=>U(o)===o)).filter(o=>e?W(o)===e||(t?he(o)!==o:!1):!0)}const Gt=function(e){return e===void 0&&(e={}),{name:"autoPlacement",options:e,async fn(t){var s,n,o;const{rects:r,middlewareData:i,placement:c,platform:l,elements:a}=t,{crossAxis:u=!1,alignment:m,allowedPlacements:h=Ie,autoAlignment:d=!0,...v}=Q(e,t),p=m!==void 0||h===Ie?qt(m||null,d,h):h,y=await ye(t,v),g=((s=i.autoPlacement)==null?void 0:s.index)||0,b=p[g];if(b==null)return{};const T=ot(b,r,await(l.isRTL==null?void 0:l.isRTL(a.floating)));if(c!==b)return{reset:{placement:p[0]}};const R=[y[U(b)],y[T[0]],y[T[1]]],C=[...((n=i.autoPlacement)==null?void 0:n.overflows)||[],{placement:b,overflows:R}],A=p[g+1];if(A)return{data:{index:g+1,overflows:C},reset:{placement:A}};const O=C.map(k=>{const j=W(k.placement);return[k.placement,j&&u?k.overflows.slice(0,2).reduce((S,L)=>S+L,0):k.overflows[0],k.overflows]}).sort((k,j)=>k[1]-j[1]),P=((o=O.filter(k=>k[2].slice(0,W(k[0])?2:3).every(j=>j<=0))[0])==null?void 0:o[0])||O[0][0];return P!==c?{data:{index:g+1,overflows:C},reset:{placement:P}}:{}}}},Yt=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var s,n;const{placement:o,middlewareData:r,rects:i,initialPlacement:c,platform:l,elements:a}=t,{mainAxis:u=!0,crossAxis:m=!0,fallbackPlacements:h,fallbackStrategy:d="bestFit",fallbackAxisSideDirection:v="none",flipAlignment:p=!0,...y}=Q(e,t);if((s=r.arrow)!=null&&s.alignmentOffset)return{};const g=U(o),b=U(c)===c,T=await(l.isRTL==null?void 0:l.isRTL(a.floating)),R=h||(b||!p?[ge(c)]:Wt(c));!h&&v!=="none"&&R.push(...$t(c,p,v,T));const C=[c,...R],A=await ye(t,y),O=[];let N=((n=r.flip)==null?void 0:n.overflows)||[];if(u&&O.push(A[g]),m){const S=ot(o,i,T);O.push(A[S[0]],A[S[1]])}if(N=[...N,{placement:o,overflows:O}],!O.every(S=>S<=0)){var P,k;const S=(((P=r.flip)==null?void 0:P.index)||0)+1,L=C[S];if(L)return{data:{index:S,overflows:N},reset:{placement:L}};let D=(k=N.filter(M=>M.overflows[0]<=0).sort((M,F)=>M.overflows[1]-F.overflows[1])[0])==null?void 0:k.placement;if(!D)switch(d){case"bestFit":{var j;const M=(j=N.map(F=>[F.placement,F.overflows.filter(x=>x>0).reduce((x,E)=>x+E,0)]).sort((F,x)=>F[1]-x[1])[0])==null?void 0:j[0];M&&(D=M);break}case"initialPlacement":D=c;break}if(o!==D)return{reset:{placement:D}}}return{}}}};async function Xt(e,t){const{placement:s,platform:n,elements:o}=e,r=await(n.isRTL==null?void 0:n.isRTL(o.floating)),i=U(s),c=W(s),l=ae(s)==="y",a=["left","top"].includes(i)?-1:1,u=r&&l?-1:1,m=Q(t,e);let{mainAxis:h,crossAxis:d,alignmentAxis:v}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...m};return c&&typeof v=="number"&&(d=c==="end"?v*-1:v),l?{x:d*u,y:h*a}:{x:h*a,y:d*u}}const Zt=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var s,n;const{x:o,y:r,placement:i,middlewareData:c}=t,l=await Xt(t,e);return i===((s=c.offset)==null?void 0:s.placement)&&(n=c.arrow)!=null&&n.alignmentOffset?{}:{x:o+l.x,y:r+l.y,data:{...l,placement:i}}}}},Jt=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:s,y:n,placement:o}=t,{mainAxis:r=!0,crossAxis:i=!1,limiter:c={fn:y=>{let{x:g,y:b}=y;return{x:g,y:b}}},...l}=Q(e,t),a={x:s,y:n},u=await ye(t,l),m=ae(U(o)),h=st(m);let d=a[h],v=a[m];if(r){const y=h==="y"?"top":"left",g=h==="y"?"bottom":"right",b=d+u[y],T=d-u[g];d=je(b,d,T)}if(i){const y=m==="y"?"top":"left",g=m==="y"?"bottom":"right",b=v+u[y],T=v-u[g];v=je(b,v,T)}const p=c.fn({...t,[h]:d,[m]:v});return{...p,data:{x:p.x-s,y:p.y-n}}}}},Kt=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:s,rects:n,platform:o,elements:r}=t,{apply:i=()=>{},...c}=Q(e,t),l=await ye(t,c),a=U(s),u=W(s),m=ae(s)==="y",{width:h,height:d}=n.floating;let v,p;a==="top"||a==="bottom"?(v=a,p=u===(await(o.isRTL==null?void 0:o.isRTL(r.floating))?"start":"end")?"left":"right"):(p=a,v=u==="end"?"top":"bottom");const y=d-l.top-l.bottom,g=h-l.left-l.right,b=H(d-l[v],y),T=H(h-l[p],g),R=!t.middlewareData.shift;let C=b,A=T;if(m?A=u||R?H(T,g):g:C=u||R?H(b,y):y,R&&!u){const N=B(l.left,0),P=B(l.right,0),k=B(l.top,0),j=B(l.bottom,0);m?A=h-2*(N!==0||P!==0?N+P:B(l.left,l.right)):C=d-2*(k!==0||j!==0?k+j:B(l.top,l.bottom))}await i({...t,availableWidth:A,availableHeight:C});const O=await o.getDimensions(r.floating);return h!==O.width||d!==O.height?{reset:{rects:!0}}:{}}}};function rt(e){const t=$(e);let s=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const o=z(e),r=o?e.offsetWidth:s,i=o?e.offsetHeight:n,c=me(s)!==r||me(n)!==i;return c&&(s=r,n=i),{width:s,height:n,$:c}}function Ne(e){return V(e)?e:e.contextElement}function te(e){const t=Ne(e);if(!z(t))return X(1);const s=t.getBoundingClientRect(),{width:n,height:o,$:r}=rt(t);let i=(r?me(s.width):s.width)/n,c=(r?me(s.height):s.height)/o;return(!i||!Number.isFinite(i))&&(i=1),(!c||!Number.isFinite(c))&&(c=1),{x:i,y:c}}const Qt=X(0);function lt(e){const t=I(e);return!Oe()||!t.visualViewport?Qt:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function en(e,t,s){return t===void 0&&(t=!1),!s||t&&s!==I(e)?!1:t}function K(e,t,s,n){t===void 0&&(t=!1),s===void 0&&(s=!1);const o=e.getBoundingClientRect(),r=Ne(e);let i=X(1);t&&(n?V(n)&&(i=te(n)):i=te(e));const c=en(r,s,n)?lt(r):X(0);let l=(o.left+c.x)/i.x,a=(o.top+c.y)/i.y,u=o.width/i.x,m=o.height/i.y;if(r){const h=I(r),d=n&&V(n)?I(n):n;let v=h,p=v.frameElement;for(;p&&n&&d!==v;){const y=te(p),g=p.getBoundingClientRect(),b=$(p),T=g.left+(p.clientLeft+parseFloat(b.paddingLeft))*y.x,R=g.top+(p.clientTop+parseFloat(b.paddingTop))*y.y;l*=y.x,a*=y.y,u*=y.x,m*=y.y,l+=T,a+=R,v=I(p),p=v.frameElement}}return pe({width:u,height:m,x:l,y:a})}const tn=[":popover-open",":modal"];function Pe(e){return tn.some(t=>{try{return e.matches(t)}catch{return!1}})}function nn(e){let{elements:t,rect:s,offsetParent:n,strategy:o}=e;const r=o==="fixed",i=G(n),c=t?Pe(t.floating):!1;if(n===i||c&&r)return s;let l={scrollLeft:0,scrollTop:0},a=X(1);const u=X(0),m=z(n);if((m||!m&&!r)&&((se(n)!=="body"||ce(i))&&(l=ve(n)),z(n))){const h=K(n);a=te(n),u.x=h.x+n.clientLeft,u.y=h.y+n.clientTop}return{width:s.width*a.x,height:s.height*a.y,x:s.x*a.x-l.scrollLeft*a.x+u.x,y:s.y*a.y-l.scrollTop*a.y+u.y}}function sn(e){return Array.from(e.getClientRects())}function ct(e){return K(G(e)).left+ve(e).scrollLeft}function on(e){const t=G(e),s=ve(e),n=e.ownerDocument.body,o=B(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),r=B(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let i=-s.scrollLeft+ct(e);const c=-s.scrollTop;return $(n).direction==="rtl"&&(i+=B(t.clientWidth,n.clientWidth)-o),{width:o,height:r,x:i,y:c}}function rn(e,t){const s=I(e),n=G(e),o=s.visualViewport;let r=n.clientWidth,i=n.clientHeight,c=0,l=0;if(o){r=o.width,i=o.height;const a=Oe();(!a||a&&t==="fixed")&&(c=o.offsetLeft,l=o.offsetTop)}return{width:r,height:i,x:c,y:l}}function ln(e,t){const s=K(e,!0,t==="fixed"),n=s.top+e.clientTop,o=s.left+e.clientLeft,r=z(e)?te(e):X(1),i=e.clientWidth*r.x,c=e.clientHeight*r.y,l=o*r.x,a=n*r.y;return{width:i,height:c,x:l,y:a}}function ze(e,t,s){let n;if(t==="viewport")n=rn(e,s);else if(t==="document")n=on(G(e));else if(V(t))n=ln(t,s);else{const o=lt(e);n={...t,x:t.x-o.x,y:t.y-o.y}}return pe(n)}function at(e,t){const s=Y(e);return s===t||!V(s)||ne(s)?!1:$(s).position==="fixed"||at(s,t)}function cn(e,t){const s=t.get(e);if(s)return s;let n=le(e,[],!1).filter(c=>V(c)&&se(c)!=="body"),o=null;const r=$(e).position==="fixed";let i=r?Y(e):e;for(;V(i)&&!ne(i);){const c=$(i),l=ke(i);!l&&c.position==="fixed"&&(o=null),(r?!l&&!o:!l&&c.position==="static"&&!!o&&["absolute","fixed"].includes(o.position)||ce(i)&&!l&&at(e,i))?n=n.filter(u=>u!==i):o=c,i=Y(i)}return t.set(e,n),n}function an(e){let{element:t,boundary:s,rootBoundary:n,strategy:o}=e;const i=[...s==="clippingAncestors"?Pe(t)?[]:cn(t,this._c):[].concat(s),n],c=i[0],l=i.reduce((a,u)=>{const m=ze(t,u,o);return a.top=B(m.top,a.top),a.right=H(m.right,a.right),a.bottom=H(m.bottom,a.bottom),a.left=B(m.left,a.left),a},ze(t,c,o));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function fn(e){const{width:t,height:s}=rt(e);return{width:t,height:s}}function un(e,t,s){const n=z(t),o=G(t),r=s==="fixed",i=K(e,!0,r,t);let c={scrollLeft:0,scrollTop:0};const l=X(0);if(n||!n&&!r)if((se(t)!=="body"||ce(o))&&(c=ve(t)),n){const m=K(t,!0,r,t);l.x=m.x+t.clientLeft,l.y=m.y+t.clientTop}else o&&(l.x=ct(o));const a=i.left+c.scrollLeft-l.x,u=i.top+c.scrollTop-l.y;return{x:a,y:u,width:i.width,height:i.height}}function Ce(e){return $(e).position==="static"}function $e(e,t){return!z(e)||$(e).position==="fixed"?null:t?t(e):e.offsetParent}function ft(e,t){const s=I(e);if(Pe(e))return s;if(!z(e)){let o=Y(e);for(;o&&!ne(o);){if(V(o)&&!Ce(o))return o;o=Y(o)}return s}let n=$e(e,t);for(;n&&Lt(n)&&Ce(n);)n=$e(n,t);return n&&ne(n)&&Ce(n)&&!ke(n)?s:n||Dt(e)||s}const dn=async function(e){const t=this.getOffsetParent||ft,s=this.getDimensions,n=await s(e.floating);return{reference:un(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function mn(e){return $(e).direction==="rtl"}const hn={convertOffsetParentRelativeRectToViewportRelativeRect:nn,getDocumentElement:G,getClippingRect:an,getOffsetParent:ft,getElementRects:dn,getClientRects:sn,getDimensions:fn,getScale:te,isElement:V,isRTL:mn};function gn(e,t){let s=null,n;const o=G(e);function r(){var c;clearTimeout(n),(c=s)==null||c.disconnect(),s=null}function i(c,l){c===void 0&&(c=!1),l===void 0&&(l=1),r();const{left:a,top:u,width:m,height:h}=e.getBoundingClientRect();if(c||t(),!m||!h)return;const d=fe(u),v=fe(o.clientWidth-(a+m)),p=fe(o.clientHeight-(u+h)),y=fe(a),b={rootMargin:-d+"px "+-v+"px "+-p+"px "+-y+"px",threshold:B(0,H(1,l))||1};let T=!0;function R(C){const A=C[0].intersectionRatio;if(A!==l){if(!T)return i();A?i(!1,A):n=setTimeout(()=>{i(!1,1e-7)},1e3)}T=!1}try{s=new IntersectionObserver(R,{...b,root:o.ownerDocument})}catch{s=new IntersectionObserver(R,b)}s.observe(e)}return i(!0),r}function pn(e,t,s,n){n===void 0&&(n={});const{ancestorScroll:o=!0,ancestorResize:r=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:l=!1}=n,a=Ne(e),u=o||r?[...a?le(a):[],...le(t)]:[];u.forEach(g=>{o&&g.addEventListener("scroll",s,{passive:!0}),r&&g.addEventListener("resize",s)});const m=a&&c?gn(a,s):null;let h=-1,d=null;i&&(d=new ResizeObserver(g=>{let[b]=g;b&&b.target===a&&d&&(d.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var T;(T=d)==null||T.observe(t)})),s()}),a&&!l&&d.observe(a),d.observe(t));let v,p=l?K(e):null;l&&y();function y(){const g=K(e);p&&(g.x!==p.x||g.y!==p.y||g.width!==p.width||g.height!==p.height)&&s(),p=g,v=requestAnimationFrame(y)}return s(),()=>{var g;u.forEach(b=>{o&&b.removeEventListener("scroll",s),r&&b.removeEventListener("resize",s)}),m==null||m(),(g=d)==null||g.disconnect(),d=null,l&&cancelAnimationFrame(v)}}const xn=Zt,wn=Gt,vn=Jt,yn=Yt,bn=Kt,He=Ut,Rn=(e,t,s)=>{const n=new Map,o={platform:hn,...s},r={...o.platform,_c:n};return Vt(e,t,{...o,platform:r})};var ue=typeof document<"u"?w.useLayoutEffect:w.useEffect;function xe(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let s,n,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(s=e.length,s!==t.length)return!1;for(n=s;n--!==0;)if(!xe(e[n],t[n]))return!1;return!0}if(o=Object.keys(e),s=o.length,s!==Object.keys(t).length)return!1;for(n=s;n--!==0;)if(!{}.hasOwnProperty.call(t,o[n]))return!1;for(n=s;n--!==0;){const r=o[n];if(!(r==="_owner"&&e.$$typeof)&&!xe(e[r],t[r]))return!1}return!0}return e!==e&&t!==t}function ut(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Ve(e,t){const s=ut(e);return Math.round(t*s)/s}function Ue(e){const t=w.useRef(e);return ue(()=>{t.current=e}),t}function Cn(e){e===void 0&&(e={});const{placement:t="bottom",strategy:s="absolute",middleware:n=[],platform:o,elements:{reference:r,floating:i}={},transform:c=!0,whileElementsMounted:l,open:a}=e,[u,m]=w.useState({x:0,y:0,strategy:s,placement:t,middlewareData:{},isPositioned:!1}),[h,d]=w.useState(n);xe(h,n)||d(n);const[v,p]=w.useState(null),[y,g]=w.useState(null),b=w.useCallback(x=>{x!==A.current&&(A.current=x,p(x))},[]),T=w.useCallback(x=>{x!==O.current&&(O.current=x,g(x))},[]),R=r||v,C=i||y,A=w.useRef(null),O=w.useRef(null),N=w.useRef(u),P=l!=null,k=Ue(l),j=Ue(o),S=w.useCallback(()=>{if(!A.current||!O.current)return;const x={placement:t,strategy:s,middleware:h};j.current&&(x.platform=j.current),Rn(A.current,O.current,x).then(E=>{const _={...E,isPositioned:!0};L.current&&!xe(N.current,_)&&(N.current=_,Xe.flushSync(()=>{m(_)}))})},[h,t,s,j]);ue(()=>{a===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,m(x=>({...x,isPositioned:!1})))},[a]);const L=w.useRef(!1);ue(()=>(L.current=!0,()=>{L.current=!1}),[]),ue(()=>{if(R&&(A.current=R),C&&(O.current=C),R&&C){if(k.current)return k.current(R,C,S);S()}},[R,C,S,k,P]);const D=w.useMemo(()=>({reference:A,floating:O,setReference:b,setFloating:T}),[b,T]),M=w.useMemo(()=>({reference:R,floating:C}),[R,C]),F=w.useMemo(()=>{const x={position:s,left:0,top:0};if(!M.floating)return x;const E=Ve(M.floating,u.x),_=Ve(M.floating,u.y);return c?{...x,transform:"translate("+E+"px, "+_+"px)",...ut(M.floating)>=1.5&&{willChange:"transform"}}:{position:s,left:E,top:_}},[s,c,M.floating,u.x,u.y]);return w.useMemo(()=>({...u,update:S,refs:D,elements:M,floatingStyles:F}),[u,S,D,M,F])}const Tn=e=>{function t(s){return{}.hasOwnProperty.call(s,"current")}return{name:"arrow",options:e,fn(s){const{element:n,padding:o}=typeof e=="function"?e(s):e;return n&&t(n)?n.current!=null?He({element:n.current,padding:o}).fn(s):{}:n?He({element:n,padding:o}).fn(s):{}}}},An=(e,t)=>({...xn(e),options:[e,t]}),jn=(e,t)=>({...vn(e),options:[e,t]}),kn=(e,t)=>({...yn(e),options:[e,t]}),On=(e,t)=>({...bn(e),options:[e,t]}),Sn=(e,t)=>({...wn(e),options:[e,t]}),En=(e,t)=>({...Tn(e),options:[e,t]}),Nn=(e,t={x:0,y:0},s=0,n=!1)=>{const o=r=>{const i={x:t.x||0,y:t.y||0};return n?s:i[r?"y":"x"]+s};return e.startsWith("top")?["bottom",{top:"100%",left:o(!1)}]:e.startsWith("right")?["left",{top:o(!0),left:0}]:e.startsWith("bottom")?[void 0,{bottom:"100%",left:o(!1)}]:["right",{top:o(!0),right:0}]},qe=22,dt=6,Pn=12,Mn=1,Ge=dt+Mn,mt=e=>f.jsx("svg",J(q({width:qe,height:Ge,viewBox:`0 0 ${qe} ${Ge}`,xmlns:"http://www.w3.org/2000/svg"},e),{children:f.jsx("path",{d:"M10.804 0C6.387 0 6.94 6 .865 6h19.878c-6.074 0-5.521-6-9.939-6Z",fill:"currentColor"})})),Ln={right:"tgui-6c3deae89ec68e99",bottom:"tgui-fed67e27ad8cb75f",left:"tgui-b27d1c4f6222569e"},Dn=w.forwardRef((e,t)=>{var{style:s,offset:n,isStaticOffset:o,coords:r,placement:i="bottom",Icon:c=mt,className:l}=e,a=we(e,["style","offset","isStaticOffset","coords","placement","Icon","className"]);const[u,m]=Nn(i,r,n,o);return f.jsx("div",J(q({ref:t,style:q({},m,s),className:de("tgui-97a62789a70393d0",u&&Ln[u],l)},a),{children:f.jsx(c,{className:"tgui-6ae8c47f9448321b"})}))}),Fn={ancestorScroll:!0,ancestorResize:!0,elementResize:!1,animationFrame:!1},_n=(e,t,s,n=Fn)=>{const{elementResize:o=!1}=n,r=we(n,["elementResize"]),i=pn(e,t,s,J(q({},r),{elementResize:!1}));let c=null;if(o){let l=!0;c=new MutationObserver(()=>{l||s(),l=!1}),z(e)&&c.observe(e,{childList:!0,subtree:!0}),c.observe(t,{childList:!0,subtree:!0})}return()=>{c!==null&&(c.disconnect(),c=null),i()}},Bn=e=>!e.startsWith("auto"),In=e=>{const t=e.replace(/auto-|auto/,"");return t==="start"||t==="end"?t:null},Wn=({placement:e="bottom-start",arrowRef:t=null,withArrow:s,arrowHeight:n,arrowPadding:o,sameWidth:r,offsetByMainAxis:i=0,offsetByCrossAxis:c=0,customMiddlewares:l})=>w.useMemo(()=>{const a=Bn(e),u=[An({crossAxis:c,mainAxis:s&&n?i+n:i})];return a?u.push(kn({fallbackAxisSideDirection:"start"})):u.push(Sn({alignment:In(e)})),u.push(jn()),r&&u.push(On({apply({rects:m,elements:h}){Object.assign(h.floating.style,{width:`${m.reference.width}px`})}})),l&&u.push(...l),s&&u.push(En({element:t,padding:o})),{middlewares:u,strictPlacement:a?e:void 0}},[c,t,s,n,o,i,r,l,e]),zn=w.forwardRef((e,t)=>{var{placement:s="auto",sameWidth:n,offsetByMainAxis:o=8,offsetByCrossAxis:r=0,withArrow:i=!0,customMiddlewares:c,autoUpdateOnTargetResize:l=!1,arrowProps:a,ArrowIcon:u=mt,Component:m="div",style:h,targetRef:d,className:v,children:p}=e,y=we(e,["placement","sameWidth","offsetByMainAxis","offsetByCrossAxis","withArrow","customMiddlewares","autoUpdateOnTargetResize","arrowProps","ArrowIcon","Component","style","targetRef","className","children"]);const[g,b]=w.useState(null),{strictPlacement:T,middlewares:R}=Wn({placement:s,sameWidth:n,withArrow:i,arrowRef:g,arrowHeight:(a==null?void 0:a.height)||dt,arrowPadding:(a==null?void 0:a.padding)||Pn,offsetByMainAxis:o,offsetByCrossAxis:r,customMiddlewares:c}),{placement:C,refs:A,middlewareData:O,floatingStyles:N}=Cn({placement:T,middleware:R,whileElementsMounted(...P){return _n(...P,{elementResize:l})}});return xt(()=>{A.setReference("current"in d?d.current:d)},[A.setReference,d]),f.jsx(Ft,{children:f.jsxs(m,J(q({},y),{ref:wt(t,A.setFloating),style:q({},h,N),className:de("tgui-e9c83f4f150e5513",v),children:[i&&f.jsx(Dn,J(q({},a),{coords:O.arrow,placement:C,ref:b,Icon:u})),p]}))})}),ie=e=>{var{mode:t="light",children:s,className:n,arrowProps:o}=e,r=we(e,["mode","children","className","arrowProps"]);return f.jsx(zn,J(q({withArrow:!0,arrowProps:J(q({},o),{className:de("tgui-e0107e1e5ea5b9f3",o==null?void 0:o.className)}),className:de("tgui-5638a4ef4e806d8c",t==="dark"&&"tgui-bc60ca772e3ae3c6",n)},r),{children:f.jsx(Z,{level:"1",children:s})}))};function $n({title:e,titleId:t,...s},n){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},s),e?w.createElement("title",{id:t},e):null,w.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z",clipRule:"evenodd"}))}const Hn=w.forwardRef($n),Vn=({closeModal:e})=>{var M,F;const t=ee(Ze),s=vt(),[n,o]=w.useState(!1),r=w.useRef(null),[i,c]=w.useState(""),l=w.useRef(null),[a,u]=w.useState(""),m=w.useRef(null),[h,d]=w.useState(""),v=w.useRef(null),[p,y]=w.useState(),[g,b]=w.useState([]),T=w.useRef(null),[R,C]=w.useState({available:!1}),A=w.useMemo(()=>t.id,[t]),O=()=>{var E,_;const x=JSON.parse(sessionStorage.getItem("saved-task")||"{}");try{c(x.title),u(x.desc),d(((E=x==null?void 0:x.reward)==null?void 0:E.split(" ")[0])||""),y((_=x==null?void 0:x.reward)==null?void 0:_.split(" ")[1]),b(x.attachments||[]),C(x.location)}catch{console.log("Cant parse saved task")}},N=w.useCallback((x,E,_,Me,oe,ht,gt)=>({id:Date.now().toString(),title:x,desc:E,reward:_+" "+Me,attachments:oe,location:ht,customer:gt,status:"open"}),[]),[P,k]=w.useState(ee(Je));w.useEffect(()=>{P&&(console.log("Restore created task"),O())},[]),w.useEffect(()=>{i.trim()!==""||a.trim()!==""||h.trim()!==""||(p||"").trim()!==""||g.length>0||R.available?(console.log("Changes made"),k(!0),sessionStorage.setItem("saved-task",JSON.stringify(N(i,a,h,p||"TON",g,R,A)))):(k(!1),sessionStorage.removeItem("saved-task"))},[i,a,h,p,g,R,A,N]),w.useEffect(()=>{console.log("Update changes store"),s(yt(P))},[P,s]);const j=x=>{const E=x.currentTarget.files;if(E&&(E==null?void 0:E.length)>0){const _=[];for(let oe=0;oe<E.length;oe++)_.push(URL.createObjectURL(E[oe]));b([...g||[],..._])}},S=x=>{const E=[...g];E.splice(x,1),b(E)},L=()=>{if(i.trim().length===0||a.trim().length===0||h.length===0||(p||"")===""||!R.available)return o(!0);const x=N(i,a,h,p||"TON",g,R,A);s(Rt(x)),k(!1),sessionStorage.removeItem("created-task"),e()},D=()=>{k(!1),sessionStorage.removeItem("created-task"),e()};return f.jsxs("div",{children:[f.jsx("div",{className:"p-2 flex align-middle items-center justify-between w-full",children:f.jsx(Te,{children:"Task details"})}),f.jsx("div",{children:f.jsxs(Nt,{className:"flex flex-col gap-2 h-full",children:[f.jsxs("div",{children:[f.jsxs(Z,{level:"2",weight:"2",className:"pl-6 text-[--tg-theme-hint-color]",children:["Title",f.jsx("span",{className:"text-red-600",children:"*"})]}),f.jsx("div",{ref:r,children:f.jsx(be,{value:i,status:i.length===0&&n?"error":"default",placeholder:"Title...",onChange:x=>{const E=x.currentTarget.value;c(E)}})}),f.jsx(ie,{className:"z-50",mode:"dark",placement:"top",targetRef:r,hidden:!(i.length===0&&n),children:"This field is required"})]}),f.jsxs("div",{children:[f.jsxs(Z,{level:"2",weight:"2",className:"pl-6 text-[--tg-theme-hint-color]",children:["Description",f.jsx("span",{className:"text-red-600",children:"*"})]}),f.jsx("div",{ref:l,children:f.jsx(be,{placeholder:"Description...",value:a,status:a.length===0&&n?"error":"default",onChange:x=>u(x.currentTarget.value)})}),f.jsx(ie,{className:"z-50",mode:"dark",placement:"top",targetRef:l,hidden:!(a.length===0&&n),children:"This field is required"})]}),f.jsxs("div",{children:[f.jsxs(Z,{level:"2",weight:"2",className:"pl-6 text-[--tg-theme-hint-color]",children:["Reward",f.jsx("span",{className:"text-red-600",children:"*"})]}),f.jsxs("div",{className:"flex items-center",children:[f.jsx("div",{ref:m,children:f.jsx(be,{placeholder:"Cost...",inputMode:"numeric",type:"number",status:h.length===0&&n?"error":"default",value:h||"",onChange:x=>{d(x.currentTarget.value)}})}),f.jsx(ie,{className:"z-50",mode:"dark",placement:"top",targetRef:m,hidden:!(h.length===0&&n),children:"This field is required"}),f.jsx("div",{ref:v,children:f.jsxs(et,{className:"h-12 items-center",children:[f.jsx(re,{onClick:()=>y("TON"),selected:p==="TON",children:"TON"}),f.jsx(re,{onClick:()=>y("USDT"),selected:p==="USDT",children:"USDT"}),f.jsx(re,{onClick:()=>y("BTC"),selected:p==="BTC",children:"BTC"})]})}),f.jsx(ie,{className:"z-50",mode:"dark",targetRef:v,hidden:!((p||"").length===0&&n),children:"Please select currency"})]})]}),f.jsxs("div",{children:[f.jsx(Z,{level:"2",weight:"2",className:"pl-6 text-[--tg-theme-hint-color]",children:"Attachments"}),g&&g.length>0&&g.map((x,E)=>f.jsx(Ae,{className:"pl-6",after:f.jsx(Re,{mode:"plain",onClick:()=>S(E),children:"X"}),children:f.jsx(bt,{children:x})},E+x)),f.jsx(Mt,{multiple:!0,label:"Attach a new file",accept:"image/*",onChange:j})]}),f.jsxs("div",{children:[f.jsxs(Z,{level:"2",weight:"2",className:"pl-6 text-[--tg-theme-hint-color]",children:["Address",f.jsx("span",{className:"text-red-600",children:"*"})]}),f.jsx("div",{ref:T,className:"overflow-visible",children:f.jsx(kt,{status:!R.available&&n?"error":"default",geoposition:R||{available:!1},setGeoposition:x=>C(x)})}),f.jsx(ie,{className:"z-50",mode:"dark",placement:"top",targetRef:T,hidden:!(!R.available&&n),children:"This field is required"})]}),R.available&&f.jsxs("div",{children:[f.jsx(Z,{level:"2",weight:"2",className:"pl-6 text-[--tg-theme-hint-color]",children:"On map"}),f.jsx(Ae,{children:f.jsx(Ot,{type:"target",center:{latitude:Number((M=R.latLong)==null?void 0:M.latitude),longitude:Number((F=R.latLong)==null?void 0:F.longitude)}})})]})]})}),f.jsx("div",{className:"sticky bottom-1",children:f.jsxs("div",{className:"flex flex-row justify-center items-center",children:[f.jsx(Re,{className:"bg-green-400 w-full",onClick:L,children:"Create"}),f.jsx(Re,{className:"bg-red-400 w-full",onClick:D,children:"Cancel"})]})})]})},Un=Ke.lazy(()=>Qe(()=>import("./MapPage-qlvlQRiz.js"),__vite__mapDeps([0,1,2,3,4]),import.meta.url).then(({MapPage:e})=>({default:e}))),Ye=Ke.lazy(()=>Qe(()=>import("./TasksList-B6CszJE8.js"),__vite__mapDeps([5,1,2,4,6,3,7]),import.meta.url).then(({TasksList:e})=>({default:e}))),Kn=()=>{const e=Ct();console.log(e==null?void 0:e.height);const[t,s]=w.useState("list"),n=j=>{console.log("Changing mode"),s(j)},[o,r]=w.useState(!1),i=()=>{r(!0),console.log("Modal opened")},c=()=>{r(!1),console.log("Modal closed")},[l,a]=w.useState(),u=j=>{console.log("Selected task: "+j),a([...b,...R].find(S=>S.id===j)),i()},[m,h]=w.useState(!1),d=ee(Je),v=()=>{h(!0),console.log("Modal opened")},p=()=>{h(!1),console.log("Modal closed")},y=ee(Ze),g=ee(Tt),[b,T]=w.useState([]),[R,C]=w.useState([]),A=w.useCallback(j=>{const S=j.filter(L=>L.customer===y.id&&(L.status==="open"||L.status==="active"));return console.log("Function - getActiveTasks: Active tasks length = "+S.length),S},[y]),O=w.useCallback(j=>{const S=j.filter(L=>L.acceptedBy===y.id&&L.status==="closed");return console.log("Function - getFinishedTasks: Finished tasks length = "+S.length),S},[y]),[N,P]=w.useState(!0);w.useEffect(()=>{console.log("MyTasksTab: Tasks array changed"),T(A(g)),C(O(g)),console.log("Force redo accordeon"),P(!1),setTimeout(()=>{P(!0)},50)},[g,A,O]);const k=ee(At);return k.available?f.jsxs("div",{className:"md:container md:mx-auto",children:[f.jsxs(Te,{children:["DEBUG: ",e==null?void 0:e.height," "]}),f.jsx(Pt,{className:"pt-4 h-full",header:f.jsxs("div",{className:"p-2 flex align-middle items-center justify-between w-full",children:[f.jsx(Te,{className:"self-start",children:"Tasks"}),f.jsxs(et,{className:"w-40 h-8 self-end ",children:[f.jsx(re,{className:"w-4 h-8 align-middle p-1",onClick:()=>{n("list")},children:"List"}),f.jsx(re,{className:"w-4 h-8 align-middle p-1",onClick:()=>{n("map")},children:"Map"})]})]}),children:t==="list"?f.jsxs(f.Fragment,{children:[f.jsx(Ae,{before:f.jsxs("div",{children:[f.jsx(Hn,{className:"h-8 w-8"}),d&&f.jsx(jt,{className:"absolute top-1 right-1 bg-yellow-600",type:"number",children:"!"})]}),onClick:v,children:"Create a new task"}),f.jsx(Ye,{title:"Active tasks",tasks:b,mode:"edit",open:N}),f.jsx(Ye,{title:"Finished tasks",tasks:R,mode:"view"})]}):f.jsx(f.Fragment,{children:f.jsx(Un,{tasks:b,position:k,onBubbleClick:u})})}),f.jsx(De,{open:o,onOpenChange:j=>{r(j)},className:"z-10 h-3/4",header:f.jsx(Fe,{after:f.jsx(Le,{className:"text-[--tg-theme-plain-foreground] h-4",onClick:c})}),children:f.jsx(Et,{taskId:l==null?void 0:l.id,closeModal:c,mode:"view"})}),f.jsx(De,{open:m,onOpenChange:j=>{h(j)},className:"z-10",style:{maxHeight:((e==null?void 0:e.height)||1)*.75},header:f.jsx(Fe,{after:f.jsx(Le,{className:"text-[--tg-theme-plain-foreground] h-4",onClick:p})}),children:f.jsx(Vn,{openModal:m,closeModal:p})})]}):f.jsx(St,{})};export{Kn as MyTasksTab};
