const __vite__fileDeps=["./MapPage-D9YQcOO1.js","./index-Bp3gu2hw.js","./index-CvQTBs6Q.css","./GeolocationRequest-DndF6omE.js","./Input-9-LqyrY4.js","./TaskCard-C39MgjDj.js","./FileInput-BSUoeiKE.js","./TasksList-Dd75bqoO.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{r as s,R as j,_ as M,c,s as _,h as R,k as b,d as S,j as e,T as E,B as N}from"./index-Bp3gu2hw.js";import{G as y,S as P,a as x}from"./GeolocationRequest-DndF6omE.js";import{P as A,T as F}from"./TaskCard-C39MgjDj.js";import{S as L,C as O}from"./Input-9-LqyrY4.js";import"./FileInput-BSUoeiKE.js";function V({title:a,titleId:n,...r},o){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":n},r),a?s.createElement("title",{id:n},a):null,s.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z",clipRule:"evenodd"}))}const z=s.forwardRef(V),B=j.lazy(()=>M(()=>import("./MapPage-D9YQcOO1.js"),__vite__mapDeps([0,1,2,3,4,5,6]),import.meta.url).then(({MapPage:a})=>({default:a}))),g=j.lazy(()=>M(()=>import("./TasksList-Dd75bqoO.js"),__vite__mapDeps([7,1,2,4,5,3,6]),import.meta.url).then(({TasksList:a})=>({default:a}))),q=()=>{const[a,n]=s.useState("list"),r=t=>{console.log("Changing mode"),n(t)},[o,d]=s.useState(!1),[k,m]=s.useState(!1),C=()=>{d(!0),console.log("Modal opened")},u=()=>{m(!0)},i=c(_),l=c(R),T=c(b),p=s.useMemo(()=>l.filter(t=>t.customer===i.id&&t.status!=="closed"),[l,i]),v=s.useMemo(()=>l.filter(t=>t.customer===i.id&&t.status==="closed"),[l,i]),[w,h]=s.useState(!0);s.useEffect(()=>{console.log("Force redo accordeon"),h(!1),setTimeout(()=>{h(!0)},50)},[l]);const f=c(S);return f.available?e.jsxs("div",{className:"md:container md:mx-auto",children:[e.jsx(L,{className:"pt-4 h-full",header:e.jsxs("div",{className:"p-2 flex align-middle items-center justify-between w-full",children:[e.jsx(E,{className:"self-start",children:"Tasks"}),e.jsxs(P,{className:"w-40 h-8 self-end ",children:[e.jsx(x,{className:"w-4 h-8 align-middle p-1",onClick:()=>{r("list")},children:"List"}),e.jsx(x,{className:"w-4 h-8 align-middle p-1",onClick:()=>{r("map")},children:"Map"})]})]}),children:a==="list"?e.jsxs(e.Fragment,{children:[e.jsx(O,{disabled:o,before:e.jsxs("div",{children:[T&&e.jsx(N,{className:"absolute z-50 top-1 left-1 bg-yellow-600",type:"number",children:"!"}),e.jsx(z,{className:"h-8 w-8"})]}),onClick:()=>{o||C()},children:"Create a new task"}),e.jsx(g,{title:"Active tasks",tasks:p,mode:"edit",open:w}),e.jsx(g,{title:"Finished tasks",tasks:v,mode:"view"})]}):e.jsx(e.Fragment,{children:e.jsx(B,{parent:"MyTasks",tasks:p,position:f})})}),o&&e.jsx(A,{openModal:o,setOpenModal:d,closeModal:u,hidingModal:k,setHidingModal:m,children:e.jsx(F,{mode:"create",closeModal:u})})]}):e.jsx(y,{})};export{q as MyTasksTab};
