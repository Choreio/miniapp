const __vite__fileDeps=["./MapPage-D17VMzqE.js","./index-CqKroNaL.js","./index-ydVSLv6B.css","./XMarkIcon-bm4MotL5.js","./List-CyIytWhn.js","./Input-DiLwL16Z.js","./Section-BZbLX6v0.js","./Button-N5-XiIyj.js","./TasksList-1NZSZ0xw.js","./TaskCard-C3QV9yMP.js","./MapContainerYandex-CpMKRVqp.js","./Avatar-Bqo6mIVr.js"],__vite__mapDeps=i=>i.map(i=>__vite__fileDeps[i]);
import{r as t,R as k,w as j,J as _,j as e,P as N,k as c,n as R,l as b,x as E,q as y}from"./index-CqKroNaL.js";import{S as P,a as x}from"./SegmentedControl-yLpR63Ng.js";import{M as O,a as F,T as L}from"./TaskCard-C3QV9yMP.js";import{F as A}from"./XMarkIcon-bm4MotL5.js";import{S as D}from"./Section-BZbLX6v0.js";import{C as V}from"./Button-N5-XiIyj.js";import"./MapContainerYandex-CpMKRVqp.js";import"./Avatar-Bqo6mIVr.js";function z({title:a,titleId:l,...n},o){return t.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":l},n),a?t.createElement("title",{id:l},a):null,t.createElement("path",{fillRule:"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 9a.75.75 0 0 0-1.5 0v2.25H9a.75.75 0 0 0 0 1.5h2.25V15a.75.75 0 0 0 1.5 0v-2.25H15a.75.75 0 0 0 0-1.5h-2.25V9Z",clipRule:"evenodd"}))}const B=t.forwardRef(z),H=k.lazy(()=>j(()=>import("./MapPage-D17VMzqE.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]),import.meta.url).then(({MapPage:a})=>({default:a}))),g=k.lazy(()=>j(()=>import("./TasksList-1NZSZ0xw.js"),__vite__mapDeps([8,1,2,4,6,7,9,10,3,11]),import.meta.url).then(({TasksList:a})=>({default:a}))),Q=()=>{if(!_())return e.jsx(N,{header:"Oops",description:"Application was launched with missing init data",children:e.jsx("img",{alt:"Telegram sticker",src:"https://xelene.me/telegram.gif",style:{display:"block",width:"144px",height:"144px"}})});const[l,n]=t.useState("list"),o=s=>{console.log("Changing mode"),n(s)},[w,i]=t.useState(!1),d=()=>{i(!0),console.log("Modal opened")},m=()=>{i(!1),console.log("Modal closed")},[C,h]=t.useState(),v=s=>{console.log("Selected task: "+s),h([...r,...f].find(S=>S.id===s)),d()},M=()=>{console.log("Creating new task!"),h(void 0),d()},T=c(R),p=c(b),u=c(E),r=u.filter(s=>s.customer===p.id&&(s.status==="open"||s.status==="active")),f=u.filter(s=>s.acceptedBy===p.id&&s.status==="closed");return e.jsxs("div",{className:"md:container md:mx-auto",children:[e.jsx(D,{className:"pt-4 h-full",header:e.jsxs("div",{className:"p-2 flex align-middle items-center justify-between w-full",children:[e.jsx(y,{className:"self-start",children:"Tasks"}),e.jsxs(P,{className:"w-40 h-8 self-end ",children:[e.jsx(x,{className:"w-4 h-8 align-middle p-1",onClick:()=>{o("list")},children:"List"}),e.jsx(x,{className:"w-4 h-8 align-middle p-1",onClick:()=>{o("map")},children:"Map"})]})]}),children:l==="list"?e.jsxs(e.Fragment,{children:[e.jsx(V,{before:e.jsx(B,{className:"h-8 w-8"}),onClick:M,children:"Create a new task"}),e.jsx(g,{title:"Active tasks",tasks:r,mode:"edit",open:!0}),e.jsx(g,{title:"Finished tasks",tasks:f,mode:"view"})]}):e.jsx(e.Fragment,{children:e.jsx(H,{tasks:r,position:T,onBubbleClick:v})})}),e.jsx(O,{open:w,onOpenChange:s=>{i(s)},className:"z-10 h-3/4",header:e.jsx(F,{after:e.jsx(A,{className:"text-[--tg-theme-plain-foreground] h-4",onClick:m})}),children:e.jsx(L,{task:C,closeModal:m,mode:"view"})})]})};export{Q as MyTasksTab};
